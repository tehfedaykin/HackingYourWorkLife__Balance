!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=11)}([function(t,e,n){"use strict";n.r(e);var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t};var a=function(t){var e=o(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===r&&e.documentElement.namespaceURI===r?e.createElement(t):e.createElementNS(n,t)}})(e)};function u(){}var c=function(t){return null==t?u:function(){return this.querySelector(t)}};function s(){return[]}var l=function(t){return null==t?s:function(){return this.querySelectorAll(t)}},f=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var h=document.documentElement;if(!h.matches){var d=h.webkitMatchesSelector||h.msMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector;f=function(t){return function(){return d.call(this,t)}}}}var p=f,g=function(t){return new Array(t.length)};function m(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}m.prototype={constructor:m,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var y="$";function v(t,e,n,r,i,o){for(var a,u=0,c=e.length,s=o.length;u<s;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new m(t,o[u]);for(;u<c;++u)(a=e[u])&&(i[u]=a)}function b(t,e,n,r,i,o,a){var u,c,s,l={},f=e.length,h=o.length,d=new Array(f);for(u=0;u<f;++u)(c=e[u])&&(d[u]=s=y+a.call(c,c.__data__,u,e),s in l?i[u]=c:l[s]=c);for(u=0;u<h;++u)(c=l[s=y+a.call(t,o[u],u,o)])?(r[u]=c,c.__data__=o[u],l[s]=null):n[u]=new m(t,o[u]);for(u=0;u<f;++u)(c=e[u])&&l[d[u]]===c&&(i[u]=c)}function _(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var x=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function w(t,e){return t.style.getPropertyValue(e)||x(t).getComputedStyle(t,null).getPropertyValue(e)}function M(t){return t.trim().split(/^|\s+/)}function S(t){return t.classList||new T(t)}function T(t){this._node=t,this._names=M(t.getAttribute("class")||"")}function E(t,e){for(var n=S(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function k(t,e){for(var n=S(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}T.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function A(){this.textContent=""}function O(){this.innerHTML=""}function C(){this.nextSibling&&this.parentNode.appendChild(this)}function N(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function j(){return null}function P(){var t=this.parentNode;t&&t.removeChild(this)}function L(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function F(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var D={},z=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(D={mouseenter:"mouseover",mouseleave:"mouseout"}));function R(t,e,n){return t=I(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function I(t,e,n){return function(r){var i=z;z=r;try{t.call(this,this.__data__,e,n)}finally{z=i}}}function U(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function H(t,e,n){var r=D.hasOwnProperty(t.type)?R:I;return function(i,o,a){var u,c=this.__on,s=r(e,o,a);if(c)for(var l=0,f=c.length;l<f;++l)if((u=c[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=s,u.capture=n),void(u.value=e);this.addEventListener(t.type,s,n),u={type:t.type,name:t.name,value:e,listener:s,capture:n},c?c.push(u):this.__on=[u]}}function B(t,e,n,r){var i=z;t.sourceEvent=z,z=t;try{return e.apply(n,r)}finally{z=i}}function W(t,e,n){var r=x(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var Y=[null];function G(t,e){this._groups=t,this._parents=e}function X(){return new G([[document.documentElement]],Y)}G.prototype=X.prototype={constructor:G,select:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=e[i],s=u.length,l=r[i]=new Array(s),f=0;f<s;++f)(o=u[f])&&(a=t.call(o,o.__data__,f,u))&&("__data__"in o&&(a.__data__=o.__data__),l[f]=a);return new G(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=l(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],c=u.length,s=0;s<c;++s)(a=u[s])&&(r.push(t.call(a,a.__data__,s,u)),i.push(a));return new G(r,i)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&c.push(o);return new G(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),s=-1,this.each(function(t){d[++s]=t}),d;var n=e?b:v,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),u=new Array(o),c=new Array(o),s=0;s<o;++s){var l=r[s],f=i[s],h=f.length,d=t.call(l,l&&l.__data__,s,r),p=d.length,g=u[s]=new Array(p),m=a[s]=new Array(p);n(l,f,g,m,c[s]=new Array(h),d,e);for(var y,_,x=0,w=0;x<p;++x)if(y=g[x]){for(x>=w&&(w=x+1);!(_=m[w])&&++w<p;);y._next=_||null}}return(a=new G(a,r))._enter=u,a._exit=c,a},enter:function(){return new G(this._enter||this._groups.map(g),this._parents)},exit:function(){return new G(this._exit||this._groups.map(g),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=e[u],l=n[u],f=s.length,h=a[u]=new Array(f),d=0;d<f;++d)(c=s[d]||l[d])&&(h[d]=c);for(;u<r;++u)a[u]=e[u];return new G(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=_);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],c=u.length,s=i[o]=new Array(c),l=0;l<c;++l)(a=u[l])&&(s[l]=a);s.sort(e)}return new G(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=o(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):w(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=M(t+"");if(arguments.length<2){for(var r=S(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?E:k)(this,t)}}:e?function(t){return function(){E(this,t)}}:function(t){return function(){k(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?A:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?O:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(C)},lower:function(){return this.each(N)},append:function(t){var e="function"==typeof t?t:a(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:a(t),r=null==e?j:"function"==typeof e?e:c(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(P)},clone:function(t){return this.select(t?F:L)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(u=e?H:U,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var c,s=0,l=u.length;s<l;++s)for(r=0,c=u[s];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return W(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return W(this,t,e)}})(t,e))}};var q=X,V=function(t){return"string"==typeof t?new G([[document.querySelector(t)]],[document.documentElement]):new G([[t]],Y)},$=function(t){return V(a(t).call(document.documentElement))},Z=0;function J(){return new Q}function Q(){this._="@"+(++Z).toString(36)}Q.prototype=J.prototype={constructor:Q,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var K=function(){for(var t,e=z;t=e.sourceEvent;)e=t;return e},tt=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},et=function(t){var e=K();return e.changedTouches&&(e=e.changedTouches[0]),tt(t,e)},nt=function(t){return"string"==typeof t?new G([document.querySelectorAll(t)],[document.documentElement]):new G([null==t?[]:t],Y)},rt=function(t,e,n){arguments.length<3&&(n=e,e=K().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return tt(t,r);return null},it=function(t,e){null==e&&(e=K().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=tt(t,e[n]);return i};n.d(e,"create",function(){return $}),n.d(e,"creator",function(){return a}),n.d(e,"local",function(){return J}),n.d(e,"matcher",function(){return p}),n.d(e,"mouse",function(){return et}),n.d(e,"namespace",function(){return o}),n.d(e,"namespaces",function(){return i}),n.d(e,"clientPoint",function(){return tt}),n.d(e,"select",function(){return V}),n.d(e,"selectAll",function(){return nt}),n.d(e,"selection",function(){return q}),n.d(e,"selector",function(){return c}),n.d(e,"selectorAll",function(){return l}),n.d(e,"style",function(){return w}),n.d(e,"touch",function(){return rt}),n.d(e,"touches",function(){return it}),n.d(e,"window",function(){return x}),n.d(e,"event",function(){return z}),n.d(e,"customEvent",function(){return B})},function(t,e,n){"use strict";n.r(e);var r=new Date,i=new Date;function o(t,e,n,a){function u(e){return t(e=new Date(+e)),e}return u.floor=u,u.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},u.round=function(t){var e=u(t),n=u.ceil(t);return t-e<n-t?e:n},u.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},u.range=function(n,r,i){var o,a=[];if(n=u.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(o=new Date(+n)),e(n,i),t(n)}while(o<n&&n<r);return a},u.filter=function(n){return o(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(u.count=function(e,o){return r.setTime(+e),i.setTime(+o),t(r),t(i),Math.floor(n(r,i))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?u.filter(a?function(e){return a(e)%t==0}:function(e){return u.count(0,e)%t==0}):u:null}),u}var a=o(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):a:null};var u=a,c=a.range,s=6e4,l=6048e5,f=o(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),h=f,d=f.range,p=o(function(t){t.setTime(Math.floor(t/s)*s)},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getMinutes()}),g=p,m=p.range,y=o(function(t){var e=t.getTimezoneOffset()*s%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),v=y,b=y.range,_=o(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*s)/864e5},function(t){return t.getDate()-1}),x=_,w=_.range;function M(t){return o(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*s)/l})}var S=M(0),T=M(1),E=M(2),k=M(3),A=M(4),O=M(5),C=M(6),N=S.range,j=T.range,P=E.range,L=k.range,F=A.range,D=O.range,z=C.range,R=o(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),I=R,U=R.range,H=o(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});H.every=function(t){return isFinite(t=Math.floor(t))&&t>0?o(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var B=H,W=H.range,Y=o(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getUTCMinutes()}),G=Y,X=Y.range,q=o(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),V=q,$=q.range,Z=o(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),J=Z,Q=Z.range;function K(t){return o(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/l})}var tt=K(0),et=K(1),nt=K(2),rt=K(3),it=K(4),ot=K(5),at=K(6),ut=tt.range,ct=et.range,st=nt.range,lt=rt.range,ft=it.range,ht=ot.range,dt=at.range,pt=o(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),gt=pt,mt=pt.range,yt=o(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});yt.every=function(t){return isFinite(t=Math.floor(t))&&t>0?o(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var vt=yt,bt=yt.range;n.d(e,"timeInterval",function(){return o}),n.d(e,"timeMillisecond",function(){return u}),n.d(e,"timeMilliseconds",function(){return c}),n.d(e,"utcMillisecond",function(){return u}),n.d(e,"utcMilliseconds",function(){return c}),n.d(e,"timeSecond",function(){return h}),n.d(e,"timeSeconds",function(){return d}),n.d(e,"utcSecond",function(){return h}),n.d(e,"utcSeconds",function(){return d}),n.d(e,"timeMinute",function(){return g}),n.d(e,"timeMinutes",function(){return m}),n.d(e,"timeHour",function(){return v}),n.d(e,"timeHours",function(){return b}),n.d(e,"timeDay",function(){return x}),n.d(e,"timeDays",function(){return w}),n.d(e,"timeWeek",function(){return S}),n.d(e,"timeWeeks",function(){return N}),n.d(e,"timeSunday",function(){return S}),n.d(e,"timeSundays",function(){return N}),n.d(e,"timeMonday",function(){return T}),n.d(e,"timeMondays",function(){return j}),n.d(e,"timeTuesday",function(){return E}),n.d(e,"timeTuesdays",function(){return P}),n.d(e,"timeWednesday",function(){return k}),n.d(e,"timeWednesdays",function(){return L}),n.d(e,"timeThursday",function(){return A}),n.d(e,"timeThursdays",function(){return F}),n.d(e,"timeFriday",function(){return O}),n.d(e,"timeFridays",function(){return D}),n.d(e,"timeSaturday",function(){return C}),n.d(e,"timeSaturdays",function(){return z}),n.d(e,"timeMonth",function(){return I}),n.d(e,"timeMonths",function(){return U}),n.d(e,"timeYear",function(){return B}),n.d(e,"timeYears",function(){return W}),n.d(e,"utcMinute",function(){return G}),n.d(e,"utcMinutes",function(){return X}),n.d(e,"utcHour",function(){return V}),n.d(e,"utcHours",function(){return $}),n.d(e,"utcDay",function(){return J}),n.d(e,"utcDays",function(){return Q}),n.d(e,"utcWeek",function(){return tt}),n.d(e,"utcWeeks",function(){return ut}),n.d(e,"utcSunday",function(){return tt}),n.d(e,"utcSundays",function(){return ut}),n.d(e,"utcMonday",function(){return et}),n.d(e,"utcMondays",function(){return ct}),n.d(e,"utcTuesday",function(){return nt}),n.d(e,"utcTuesdays",function(){return st}),n.d(e,"utcWednesday",function(){return rt}),n.d(e,"utcWednesdays",function(){return lt}),n.d(e,"utcThursday",function(){return it}),n.d(e,"utcThursdays",function(){return ft}),n.d(e,"utcFriday",function(){return ot}),n.d(e,"utcFridays",function(){return ht}),n.d(e,"utcSaturday",function(){return at}),n.d(e,"utcSaturdays",function(){return dt}),n.d(e,"utcMonth",function(){return gt}),n.d(e,"utcMonths",function(){return mt}),n.d(e,"utcYear",function(){return vt}),n.d(e,"utcYears",function(){return bt})},function(t,e,n){"use strict";n.r(e);var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},i=function(t){return 1===t.length&&(t=function(t){return function(e,n){return r(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var o=i(r),a=o.right,u=o.left,c=a,s=function(t,e){null==e&&(e=l);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return o};function l(t,e){return[t,e]}var f=function(t,e,n){var r,i,o,a,u=t.length,c=e.length,s=new Array(u*c);for(null==n&&(n=l),r=o=0;r<u;++r)for(a=t[r],i=0;i<c;++i,++o)s[o]=n(a,e[i]);return s},h=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},d=function(t){return null===t?NaN:+t},p=function(t,e){var n,r,i=t.length,o=0,a=-1,u=0,c=0;if(null==e)for(;++a<i;)isNaN(n=d(t[a]))||(c+=(r=n-u)*(n-(u+=r/++o)));else for(;++a<i;)isNaN(n=d(e(t[a],a,t)))||(c+=(r=n-u)*(n-(u+=r/++o)));if(o>1)return c/(o-1)},g=function(t,e){var n=p(t,e);return n?Math.sqrt(n):n},m=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},y=Array.prototype,v=y.slice,b=y.map,_=function(t){return function(){return t}},x=function(t){return t},w=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},M=Math.sqrt(50),S=Math.sqrt(10),T=Math.sqrt(2),E=function(t,e,n){var r,i,o,a,u=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=k(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o};function k(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=M?10:o>=S?5:o>=T?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=M?10:o>=S?5:o>=T?2:1)}function A(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=M?i*=10:o>=S?i*=5:o>=T&&(i*=2),e<t?-i:i}var O=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},C=function(){var t=x,e=m,n=O;function r(r){var i,o,a=r.length,u=new Array(a);for(i=0;i<a;++i)u[i]=t(r[i],i,r);var s=e(u),l=s[0],f=s[1],h=n(u,l,f);Array.isArray(h)||(h=A(l,f,h),h=w(Math.ceil(l/h)*h,Math.floor(f/h)*h,h));for(var d=h.length;h[0]<=l;)h.shift(),--d;for(;h[d-1]>f;)h.pop(),--d;var p,g=new Array(d+1);for(i=0;i<=d;++i)(p=g[i]=[]).x0=i>0?h[i-1]:l,p.x1=i<d?h[i]:f;for(i=0;i<a;++i)l<=(o=u[i])&&o<=f&&g[c(h,o,0,d)].push(r[i]);return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:_(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:_([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?_(v.call(t)):_(t),r):n},r},N=function(t,e,n){if(null==n&&(n=d),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},j=function(t,e,n){return t=b.call(t,d).sort(r),Math.ceil((n-e)/(2*(N(t,.75)-N(t,.25))*Math.pow(t.length,-1/3)))},P=function(t,e,n){return Math.ceil((n-e)/(3.5*g(t)*Math.pow(t.length,-1/3)))},L=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},F=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=d(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=d(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},D=function(t,e){var n,i=t.length,o=-1,a=[];if(null==e)for(;++o<i;)isNaN(n=d(t[o]))||a.push(n);else for(;++o<i;)isNaN(n=d(e(t[o],o,t)))||a.push(n);return N(a.sort(r),.5)},z=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},R=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},I=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},U=function(t,e){if(n=t.length){var n,i,o=0,a=0,u=t[a];for(null==e&&(e=r);++o<n;)(e(i=t[o],u)<0||0!==e(u,u))&&(u=i,a=o);return 0===e(u,u)?a:void 0}},H=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},B=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},W=function(t){if(!(i=t.length))return[];for(var e=-1,n=R(t,Y),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r};function Y(t){return t.length}var G=function(){return W(arguments)};n.d(e,"bisect",function(){return c}),n.d(e,"bisectRight",function(){return a}),n.d(e,"bisectLeft",function(){return u}),n.d(e,"ascending",function(){return r}),n.d(e,"bisector",function(){return i}),n.d(e,"cross",function(){return f}),n.d(e,"descending",function(){return h}),n.d(e,"deviation",function(){return g}),n.d(e,"extent",function(){return m}),n.d(e,"histogram",function(){return C}),n.d(e,"thresholdFreedmanDiaconis",function(){return j}),n.d(e,"thresholdScott",function(){return P}),n.d(e,"thresholdSturges",function(){return O}),n.d(e,"max",function(){return L}),n.d(e,"mean",function(){return F}),n.d(e,"median",function(){return D}),n.d(e,"merge",function(){return z}),n.d(e,"min",function(){return R}),n.d(e,"pairs",function(){return s}),n.d(e,"permute",function(){return I}),n.d(e,"quantile",function(){return N}),n.d(e,"range",function(){return w}),n.d(e,"scan",function(){return U}),n.d(e,"shuffle",function(){return H}),n.d(e,"sum",function(){return B}),n.d(e,"ticks",function(){return E}),n.d(e,"tickIncrement",function(){return k}),n.d(e,"tickStep",function(){return A}),n.d(e,"transpose",function(){return W}),n.d(e,"variance",function(){return p}),n.d(e,"zip",function(){return G})},function(t,e,n){"use strict";n.r(e);var r=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function o(){}var a="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s=/^#([0-9a-f]{3})$/,l=/^#([0-9a-f]{6})$/,f=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),h=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),d=new RegExp("^rgba\\("+[a,a,a,u]+"\\)$"),p=new RegExp("^rgba\\("+[c,c,c,u]+"\\)$"),g=new RegExp("^hsl\\("+[u,c,c]+"\\)$"),m=new RegExp("^hsla\\("+[u,c,c,u]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(t){var e;return t=(t+"").trim().toLowerCase(),(e=s.exec(t))?new M((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=l.exec(t))?b(parseInt(e[1],16)):(e=f.exec(t))?new M(e[1],e[2],e[3],1):(e=h.exec(t))?new M(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=d.exec(t))?_(e[1],e[2],e[3],e[4]):(e=p.exec(t))?_(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?S(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?S(e[1],e[2]/100,e[3]/100,e[4]):y.hasOwnProperty(t)?b(y[t]):"transparent"===t?new M(NaN,NaN,NaN,0):null}function b(t){return new M(t>>16&255,t>>8&255,255&t,1)}function _(t,e,n,r){return r<=0&&(t=e=n=NaN),new M(t,e,n,r)}function x(t){return t instanceof o||(t=v(t)),t?new M((t=t.rgb()).r,t.g,t.b,t.opacity):new M}function w(t,e,n,r){return 1===arguments.length?x(t):new M(t,e,n,null==r?1:r)}function M(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function S(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new E(t,e,n,r)}function T(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof E)return new E(t.h,t.s,t.l,t.opacity);if(t instanceof o||(t=v(t)),!t)return new E;if(t instanceof E)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),u=NaN,c=a-i,s=(a+i)/2;return c?(u=e===a?(n-r)/c+6*(n<r):n===a?(r-e)/c+2:(e-n)/c+4,c/=s<.5?a+i:2-a-i,u*=60):c=s>0&&s<1?0:u,new E(u,c,s,t.opacity)}(t):new E(t,e,n,null==r?1:r)}function E(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function k(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}r(o,v,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),r(M,w,i(o,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),r(E,T,i(o,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new E(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new E(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new M(k(t>=240?t-240:t+120,i,r),k(t,i,r),k(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var A=Math.PI/180,O=180/Math.PI,C=.95047,N=1,j=1.08883,P=4/29,L=6/29,F=3*L*L,D=L*L*L;function z(t){if(t instanceof I)return new I(t.l,t.a,t.b,t.opacity);if(t instanceof G){var e=t.h*A;return new I(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof M||(t=x(t));var n=W(t.r),r=W(t.g),i=W(t.b),o=U((.4124564*n+.3575761*r+.1804375*i)/C),a=U((.2126729*n+.7151522*r+.072175*i)/N);return new I(116*a-16,500*(o-a),200*(a-U((.0193339*n+.119192*r+.9503041*i)/j)),t.opacity)}function R(t,e,n,r){return 1===arguments.length?z(t):new I(t,e,n,null==r?1:r)}function I(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function U(t){return t>D?Math.pow(t,1/3):t/F+P}function H(t){return t>L?t*t*t:F*(t-P)}function B(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function W(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Y(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof G)return new G(t.h,t.c,t.l,t.opacity);t instanceof I||(t=z(t));var e=Math.atan2(t.b,t.a)*O;return new G(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new G(t,e,n,null==r?1:r)}function G(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}r(I,R,i(o,{brighter:function(t){return new I(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new I(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=N*H(t),new M(B(3.2404542*(e=C*H(e))-1.5371385*t-.4985314*(n=j*H(n))),B(-.969266*e+1.8760108*t+.041556*n),B(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),r(G,Y,i(o,{brighter:function(t){return new G(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new G(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return z(this).rgb()}}));var X=-.14861,q=1.78277,V=-.29227,$=-.90649,Z=1.97294,J=Z*$,Q=Z*q,K=q*V-$*X;function tt(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof et)return new et(t.h,t.s,t.l,t.opacity);t instanceof M||(t=x(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(K*r+J*e-Q*n)/(K+J-Q),o=r-i,a=(Z*(n-i)-V*o)/$,u=Math.sqrt(a*a+o*o)/(Z*i*(1-i)),c=u?Math.atan2(a,o)*O-120:NaN;return new et(c<0?c+360:c,u,i,t.opacity)}(t):new et(t,e,n,null==r?1:r)}function et(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}r(et,tt,i(o,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new et(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new et(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*A,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new M(255*(e+n*(X*r+q*i)),255*(e+n*(V*r+$*i)),255*(e+n*(Z*r)),this.opacity)}})),n.d(e,"color",function(){return v}),n.d(e,"rgb",function(){return w}),n.d(e,"hsl",function(){return T}),n.d(e,"lab",function(){return R}),n.d(e,"hcl",function(){return Y}),n.d(e,"cubehelix",function(){return tt})},function(t,e,n){"use strict";var r=n(3);function i(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}var o=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],a=t[r+1],u=r>0?t[r-1]:2*o-a,c=r<e-1?t[r+2]:2*a-o;return i((n-r/e)*e,u,o,a,c)}},a=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],a=t[r%e],u=t[(r+1)%e],c=t[(r+2)%e];return i((n-r/e)*e,o,a,u,c)}},u=function(t){return function(){return t}};function c(t,e){return function(n){return t+n*e}}function s(t,e){var n=e-t;return n?c(t,n>180||n<-180?n-360*Math.round(n/360):n):u(isNaN(t)?e:t)}function l(t){return 1==(t=+t)?f:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):u(isNaN(e)?n:e)}}function f(t,e){var n=e-t;return n?c(t,n):u(isNaN(t)?e:t)}var h=function t(e){var n=l(e);function i(t,e){var i=n((t=Object(r.rgb)(t)).r,(e=Object(r.rgb)(e)).r),o=n(t.g,e.g),a=n(t.b,e.b),u=f(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=o(e),t.b=a(e),t.opacity=u(e),t+""}}return i.gamma=t,i}(1);function d(t){return function(e){var n,i,o=e.length,a=new Array(o),u=new Array(o),c=new Array(o);for(n=0;n<o;++n)i=Object(r.rgb)(e[n]),a[n]=i.r||0,u[n]=i.g||0,c[n]=i.b||0;return a=t(a),u=t(u),c=t(c),i.opacity=1,function(t){return i.r=a(t),i.g=u(t),i.b=c(t),i+""}}}d(o),d(a);var p=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=T(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},g=function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}},m=function(t,e){return e-=t=+t,function(n){return t+e*n}},y=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=T(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},v=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(v.source,"g");var _,x,w,M,S=function(t,e){var n,r,i,o=v.lastIndex=b.lastIndex=0,a=-1,u=[],c=[];for(t+="",e+="";(n=v.exec(t))&&(r=b.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:m(n,r)})),o=b.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)u[(n=c[r]).i]=n.x(t);return u.join("")})},T=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?u(e):("number"===i?m:"string"===i?(n=Object(r.color)(e))?(e=n,h):S:e instanceof r.color?h:e instanceof Date?g:Array.isArray(e)?p:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?y:m)(t,e)},E=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},k=180/Math.PI,A={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},O=function(t,e,n,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*k,skewX:Math.atan(c)*k,scaleX:a,scaleY:u}};function C(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,e,null,n);u.push({i:c-4,x:m(t,i)},{i:c-2,x:m(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:m(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,u,c),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:m(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,u,c),function(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:m(t,n)},{i:u-2,x:m(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(t){for(var e,n=-1,r=c.length;++n<r;)u[(e=c[n]).i]=e.x(t);return u.join("")}}}var N=C(function(t){return"none"===t?A:(_||(_=document.createElement("DIV"),x=document.documentElement,w=document.defaultView),_.style.transform=t,t=w.getComputedStyle(x.appendChild(_),null).getPropertyValue("transform"),x.removeChild(_),t=t.slice(7,-1).split(","),O(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),j=C(function(t){return null==t?A:(M||(M=document.createElementNS("http://www.w3.org/2000/svg","g")),M.setAttribute("transform",t),(t=M.transform.baseVal.consolidate())?(t=t.matrix,O(t.a,t.b,t.c,t.d,t.e,t.f)):A)},", ",")",")");Math.SQRT2;function P(t){return function(e,n){var i=t((e=Object(r.hsl)(e)).h,(n=Object(r.hsl)(n)).h),o=f(e.s,n.s),a=f(e.l,n.l),u=f(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(t),e.opacity=u(t),e+""}}}P(s),P(f);function L(t){return function(e,n){var i=t((e=Object(r.hcl)(e)).h,(n=Object(r.hcl)(n)).h),o=f(e.c,n.c),a=f(e.l,n.l),u=f(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=o(t),e.l=a(t),e.opacity=u(t),e+""}}}L(s),L(f);function F(t){return function e(n){function i(e,i){var o=t((e=Object(r.cubehelix)(e)).h,(i=Object(r.cubehelix)(i)).h),a=f(e.s,i.s),u=f(e.l,i.l),c=f(e.opacity,i.opacity);return function(t){return e.h=o(t),e.s=a(t),e.l=u(Math.pow(t,n)),e.opacity=c(t),e+""}}return n=+n,i.gamma=e,i}(1)}F(s);var D=F(f);n.d(e,"a",function(){return T}),n.d(e,!1,function(){return p}),n.d(e,!1,function(){return o}),n.d(e,!1,function(){return a}),n.d(e,!1,function(){return g}),n.d(e,"c",function(){return m}),n.d(e,!1,function(){return y}),n.d(e,"e",function(){return E}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return N}),n.d(e,"h",function(){return j}),n.d(e,!1,function(){}),n.d(e,"d",function(){return h}),n.d(e,!1,function(){}),n.d(e,!1,function(){}),n.d(e,!1,function(){}),n.d(e,!1,function(){}),n.d(e,!1,function(){}),n.d(e,!1,function(){}),n.d(e,!1,function(){}),n.d(e,!1,function(){}),n.d(e,"b",function(){return D}),n.d(e,!1,function(){})},function(t,e,n){window,t.exports=function(t,e,n,r,i,o,a,u,c,s,l,f,h,d,p){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=28)}([function(e,n){e.exports=t},function(t,e,n){"use strict";n.r(e);var r={};n.d(r,"traverseJSON",function(){return lt}),n.d(r,"traverseSpec",function(){return ft}),n.d(r,"clone",function(){return wt}),n.d(r,"isDate",function(){return Mt}),n.d(r,"isObject",function(){return St}),n.d(r,"niceZeroBased",function(){return Tt}),n.d(r,"niceTimeDomain",function(){return Et}),n.d(r,"generateHash",function(){return Ot}),n.d(r,"generateRatioFunction",function(){return Ct}),n.d(r,"isSpecRectCoordsOnly",function(){return Nt}),n.d(r,"throttleLastEvent",function(){return jt}),n.d(r,"splitEvenly",function(){return Pt}),n.d(r,"extRGBColor",function(){return Lt}),n.d(r,"extCSSClass",function(){return Ft}),n.d(r,"toRadian",function(){return Dt}),n.d(r,"normalizeAngle",function(){return zt}),n.d(r,"range",function(){return Rt}),n.d(r,"flatten",function(){return It}),n.d(r,"unique",function(){return Ut}),n.d(r,"groupBy",function(){return Ht}),n.d(r,"union",function(){return Bt}),n.d(r,"intersection",function(){return Wt}),n.d(r,"defaults",function(){return Yt}),n.d(r,"omit",function(){return Gt}),n.d(r,"memoize",function(){return Xt}),n.d(r,"createMultiSorter",function(){return qt}),n.d(r,"pick",function(){return Vt}),n.d(r,"escape",function(){return $t}),n.d(r,"template",function(){return Zt}),n.d(r,"escapeHtml",function(){return Jt}),n.d(r,"xml",function(){return ee}),n.d(r,"take",function(){return ne}),n.d(r,"isChartElement",function(){return ie}),n.d(r,"isFacetUnit",function(){return oe});var i={};n.d(i,"appendTo",function(){return ce}),n.d(i,"getScrollbarSize",function(){return se}),n.d(i,"setScrollPadding",function(){return le}),n.d(i,"getStyle",function(){return fe}),n.d(i,"getStyleAsNum",function(){return he}),n.d(i,"getContainerSize",function(){return de}),n.d(i,"getAxisTickLabelSize",function(){return pe}),n.d(i,"getLabelSize",function(){return ge}),n.d(i,"getCharSize",function(){return me}),n.d(i,"selectOrAppend",function(){return ye}),n.d(i,"selectImmediate",function(){return ve}),n.d(i,"selectAllImmediate",function(){return be}),n.d(i,"sortChildren",function(){return _e}),n.d(i,"classes",function(){return xe}),n.d(i,"dispatchMouseEvent",function(){return we});var o={};n.d(o,"translate",function(){return Me}),n.d(o,"rotate",function(){return Se}),n.d(o,"getOrientation",function(){return Te}),n.d(o,"isIntersect",function(){return Ee}),n.d(o,"getDeepTransformTranslate",function(){return ke}),n.d(o,"raiseElements",function(){return Ae});var a=n(0),u=n(2),c=n(3),s={},l={};function f(t){var e=l[t];return e||(e=function(){for(var e,n,r=this,i=0,o=[];r=r.handler;){if("function"==typeof(n=r.callbacks[t])){if(!e)for(e=[this],i=0;i<arguments.length;i++)e.push(arguments[i]);o.unshift({fn:n,context:r.context,args:e})}if("function"==typeof(n=r.callbacks["*"])){if(!e)for(e=[this],i=0;i<arguments.length;i++)e.push(arguments[i]);o.unshift({fn:n,context:r.context,args:[{sender:this,type:t,args:e}]})}}o.forEach(function(t){return t.fn.apply(t.context,t.args)})},l[t]=e),e}var h,d=function(){function t(){this.handler=null,this.emit_destroy=f("destroy")}return t.prototype.addHandler=function(t,e){e=e||this,this.handler={callbacks:t,context:e,handler:this.handler}},t.prototype.on=function(t,e,n){var r={};return r[t]=e,this.addHandler(r,n),r},t.prototype.fire=function(t,e){f.call(this,t).call(this,e)},t.prototype.removeHandler=function(t,e){var n,r=this;for(e=e||this;n=r,r=r.handler;)if(r.callbacks===t&&r.context===e)return r.callbacks=s,void(n.handler=r.handler)},t.prototype.destroy=function(){this.emit_destroy(),this.handler=null},t}(),p=(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),g=((Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},a),function(t){function e(e){var n=t.call(this)||this;return n.screenModel=null,n._elementNameSpace=e.namespace||"default",n._elementScalesHub={},n}return p(e,t),e.prototype.regScale=function(t,e){return this._elementScalesHub[t]=e,this},e.prototype.getScale=function(t){return this._elementScalesHub[t]||null},e.prototype.fireNameSpaceEvent=function(t,e){var n=this._elementNameSpace;this.fire(t+"."+n,e)},e.prototype.subscribe=function(t,e,n){void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t});var r=this,i={};[{event:"mouseover",limit:0},{event:"mouseout",limit:0},{event:"click",limit:0},{event:"mousemove",limit:"requestAnimationFrame"}].forEach(function(o){var u=o.event,c=o.limit;t.on(u,jt(i,u,function(t){var i={data:e.call(this,t),event:n.call(this,a.event,t)};r.fire(u,i),r.fireNameSpaceEvent(u,i)},c))})},e.prototype.allocateRect=function(){return{left:0,top:0,width:0,height:0}},e.prototype.defineGrammarModel=function(t){return{}},e.prototype.getGrammarRules=function(){return[]},e.prototype.getAdjustScalesRules=function(){return[]},e.prototype.createScreenModel=function(t){return null},e.prototype.getClosestElement=function(t,e){return null},e.prototype.addInteraction=function(){},e.prototype.draw=function(){this.config.options.container=this.config.options.slot(this.config.uid),this.drawFrames(this.config.frames)},e.prototype.data=function(){return this.config.frames.reduce(function(t,e){return t.concat(e.part())},[])},e.prototype.node=function(){return this},e}(d)),m={day:{cast:function(t){var e=new Date(t);return new Date(e.setHours(0,0,0,0))},next:function(t){var e=new Date(t),n=new Date(e.setDate(e.getDate()+1));return this.cast(n)}},week:{cast:function(t){var e=new Date(t);return e=new Date(e.setHours(0,0,0,0)),new Date(e.setDate(e.getDate()-e.getDay()))},next:function(t){var e=new Date(t),n=new Date(e.setDate(e.getDate()+7));return this.cast(n)}},month:{cast:function(t){var e=new Date(t);return e=new Date(e.setHours(0,0,0,0)),e=new Date(e.setDate(1))},next:function(t){var e=new Date(t),n=new Date(e.setMonth(e.getMonth()+1));return this.cast(n)}},quarter:{cast:function(t){var e=new Date(t);e=new Date(e.setHours(0,0,0,0));var n=(e=new Date(e.setDate(1))).getMonth(),r=n-n%3;return new Date(e.setMonth(r))},next:function(t){var e=new Date(t),n=new Date(e.setMonth(e.getMonth()+3));return this.cast(n)}},year:{cast:function(t){var e=new Date(t);return e=new Date(e.setHours(0,0,0,0)),e=new Date(e.setDate(1)),e=new Date(e.setMonth(0))},next:function(t){var e=new Date(t),n=new Date(e.setFullYear(e.getFullYear()+1));return this.cast(n)}}},y={day:{cast:function(t){var e=new Date(t);return new Date(e.setUTCHours(0,0,0,0))},next:function(t){var e=new Date(t),n=new Date(e.setUTCDate(e.getUTCDate()+1));return this.cast(n)}},week:{cast:function(t){var e=new Date(t);return e=new Date(e.setUTCHours(0,0,0,0)),new Date(e.setUTCDate(e.getUTCDate()-e.getUTCDay()))},next:function(t){var e=new Date(t),n=new Date(e.setUTCDate(e.getUTCDate()+7));return this.cast(n)}},month:{cast:function(t){var e=new Date(t);return e=new Date(e.setUTCHours(0,0,0,0)),e=new Date(e.setUTCDate(1))},next:function(t){var e=new Date(t),n=new Date(e.setUTCMonth(e.getUTCMonth()+1));return this.cast(n)}},quarter:{cast:function(t){var e=new Date(t);e=new Date(e.setUTCHours(0,0,0,0));var n=(e=new Date(e.setUTCDate(1))).getUTCMonth(),r=n-n%3;return new Date(e.setUTCMonth(r))},next:function(t){var e=new Date(t),n=new Date(e.setUTCMonth(e.getUTCMonth()+3));return this.cast(n)}},year:{cast:function(t){var e=new Date(t);return e=new Date(e.setUTCHours(0,0,0,0)),e=new Date(e.setUTCDate(1)),e=new Date(e.setUTCMonth(0))},next:function(t){var e=new Date(t),n=new Date(e.setUTCFullYear(e.getUTCFullYear()+1));return this.cast(n)}}},v={add:function(t,e,n){return((void 0===n?{utc:!1}:n).utc?y:m)[t.toLowerCase()]=e,this},get:function(t,e){return((void 0===e?{utc:!1}:e).utc?y:m)[(t||"").toLowerCase()]||null},generate:function(t,e,n,r){var i=(void 0===r?{utc:!1}:r).utc,o=[],a=v.get(n,{utc:i});if(a){var u=a.cast(new Date(e)),c=a.cast(new Date(t));for(o.push(c);(c=a.next(new Date(c)))<=u;)o.push(c)}return o}},b=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(t){function e(e,n,r){var i=t.call(this)||this;return i.name="TauChartError",i.message=e,i.errorCode=n,i.errorArgs=r,i}return b(e,t),e}(Error),x={STACKED_FIELD_NOT_NUMBER:"STACKED_FIELD_NOT_NUMBER",NO_DATA:"NO_DATA",NOT_SUPPORTED_TYPE_CHART:"NOT_SUPPORTED_TYPE_CHART",UNKNOWN_UNIT_TYPE:"UNKNOWN_UNIT_TYPE",INVALID_LOG_DOMAIN:"INVALID_LOG_DOMAIN"},w={},M={get:function(t){return w[t]},reg:function(t,e){return w[t]=e,this}};M.reg("identity",function(){return{}}).reg("flip",function(t){var e=t.scaleY,n=t.scaleX,r=n.domain(),i=n.discrete?r[0]:Math.max(0,Math.min.apply(Math,r)),o=n.value(i)+-.5*n.stepSize(i);return{flip:!0,scaleX:e,scaleY:n,xi:function(t){return e.value(t[e.dim])},yi:function(t){return n.value(t[n.dim])},y0:function(){return o}}}).reg("obsoleteVerticalStackOrder",function(){return{obsoleteVerticalStackOrder:!0}}).reg("positioningByColor",function(t){return(t.scaleX.discrete?function(t){var e=t.data().reduce(function(e,n){var r=n[t.scaleX.dim],i=n[t.scaleColor.dim];return e.hasOwnProperty(r)||(e[r]=[]),e[r].indexOf(i)<0&&e[r].push(i),e},{}),n=t.scaleX,r=t.scaleColor,i=r.discrete?r.domain():r.originalSeries().sort(function(t,e){return t-e}),o=i.length||1,a=i.reduce(function(t,e,n){return t[e]=n,t},{});return Object.keys(e).forEach(function(t){return e[t].sort(function(t,e){return a[t]-a[e]})}),{xi:function(r){var i=r[t.scaleX.dim],a=e[i]||[r[t.scaleColor.dim]],u=a.length,c=a.indexOf(r[t.scaleColor.dim]),s=function(t){return n.stepSize(t[n.dim])*(o/(1+o))}(r)/(o+1);return t.xi(r)-(u+1)*s/2+(1+c)*s}}}:function(){return{}})(t)}).reg("groupOrderByAvg",function(t){var e=t.data().reduce(function(e,n){var r=t.group(n);return e[r]=e[r]||[],e[r].push(n),e},{}),n=Object.keys(e).map(function(n){return[n,(r=e[n],r.map(t.yi).reduce(function(t,e){return t+e},0)/r.length)];var r}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]});return{order:function(t){var e=n.indexOf(t);return e<0?Number.MAX_VALUE:e}}}).reg("stack",function(t){var e=t.data(),n=t.scaleX,r=t.scaleY;if(r.discrete||r.domain().some(function(t){return"number"!=typeof t}))throw new _("Stacked field ["+r.dim+"] should be a number",x.STACKED_FIELD_NOT_NUMBER,{field:r.dim});var i=function(t){return function(e){var i=e[n.dim],o=e[r.dim],a=o>=0?t.positive:t.negative,u=a[i]||0,c=u+o;return a[i]=c,{nextStack:c,prevStack:u}}},o=i({positive:{},negative:{}}),a=i({positive:{},negative:{}}),u=function(e){return Xt(e,t.id)},c=Number.MAX_VALUE,s=Number.MIN_VALUE,l=function(t){return c=t<c?t:c,s=t>s?t:s,r.value(t)},f=u(function(t){return l(o(t).nextStack)}),h=u(function(t){return l(a(t).prevStack)}),d=function(e){return t.group(e)+"/"+(e[r.dim]>=0?1:-1)},p=Ht(e,d),g=Object.keys(p).sort(t.flip||!t.flip&&t.obsoleteVerticalStackOrder?function(e,n){return t.order(e)-t.order(n)}:function(e,n){return t.order(n)-t.order(e)}).reduce(function(t,e){return t.concat(p[e])},[]);return g.forEach(function(t){f(t),h(t)}),r.fixup(function(t){var e={};return(!t.hasOwnProperty("max")||t.max<s)&&(e.max=s),(!t.hasOwnProperty("min")||t.min>c)&&(e.min=c),e}),{group:d,data:function(){return g},yi:f,y0:h}}).reg("size_distribute_evenly",function(t,e){var n=e.minLimit,r=e.maxLimit,i=e.defMin,o=e.defMax,a=t.data(),u=function(t,e){return t-e},c=t.scaleX.discrete?t.scaleX.stepSize()/2:Number.MAX_VALUE,s=a.map(function(e){return t.xi(e)}).sort(u),l=s[0],f=s.slice(1).map(function(t){var e=t-l;return l=t,e}).filter(function(t){return t>0}).sort(u).concat(Number.MAX_VALUE)[0],h=Math.min(f,c),d="number"==typeof n?n:i,p={minSize:d,maxSize:"number"==typeof r?r:Math.max(d,Math.min(o,h))};return t.scaleSize.fixup(function(t){var e={};return t.fixed?t.maxSize>p.maxSize&&(e.maxSize=p.maxSize):(e.fixed=!0,e.minSize=p.minSize,e.maxSize=p.maxSize),e}),{}}).reg("adjustStaticSizeScale",function(t,e){var n=e.minLimit,r=e.maxLimit,i=e.defMin,o=e.defMax,a={minSize:"number"==typeof n?n:i,maxSize:"number"==typeof r?r:o};return t.scaleSize.fixup(function(t){var e={};return t.fixed||(e.fixed=!0,e.minSize=a.minSize,e.maxSize=a.maxSize),e}),{}}).reg("adjustSigmaSizeScale",function(t,e){var n,r,i,o,a=e.minLimit,u=e.maxLimit,c=e.defMin,s=e.defMax,l=function(t,e){return t-e},f=t.data().map(function(e){return t.xi(e)}).sort(l),h=f[0],d=f.slice(1).map(function(t){var e=t-h;return h=t,e}).filter(function(t){return t>0}).sort(l).concat(Number.MAX_VALUE)[0],p=t.scaleX.discrete?t.scaleX.stepSize()/2:Number.MAX_VALUE,g=Math.min(d,p),m="number"==typeof a?a:c,y="number"==typeof u?u:s,v={minSize:m,maxSize:Math.max(m,Math.min(y,(n=g,r=(m+y)/2,i=y,o=m,Math.round(r+(i-r)/(1+Math.exp(-(n-o)/.5))))))};return t.scaleSize.fixup(function(t){var e={};return t.fixed?t.maxSize>v.maxSize&&(e.maxSize=v.maxSize):(e.fixed=!0,e.minSize=v.minSize,e.maxSize=v.maxSize),e}),{}}).reg("avoidScalesOverflow",function(t,e){var n,r,i=e.sizeDirection,o=function(t,e){return!t||t.discrete||"logarithmic"===t.scaleType||i.indexOf(e)<0},a=o(t.scaleX,"x"),u=o(t.scaleY,"y");if(a&&u)return{};t.scaleSize.fixup(function(t){return n=t.minSize,r=t.maxSize,t});var c=t.data().reduce(function(e,i){var o,c,s=t.size(i),l=(s>=n?s:n+s*(r-n))/2;return a||(o=t.xi(i),e.left=Math.min(e.left,o-l),e.right=Math.max(e.right,o+l)),u||(c=t.yi(i),e.top=Math.min(e.top,c-l),e.bottom=Math.max(e.bottom,c+l)),e},{top:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,left:Number.MAX_VALUE}),s=function(e,n,r,i){var o=e.domain(),a=Math.abs(e.value(o[1])-e.value(o[0])),u=(o[1]-o[0])/a;if(0===a)return 1;var c=Math.max(0,-n),s=Math.max(0,r-a),l=t.flip?s:c,f=t.flip?c:s,h=Number(o[0])-(i?f:l)*u,d=Number(o[1])+(i?l:f)*u;return e.fixup(function(t){var e={};if(t.fixedBorders){var i=t.fixedBorders.slice(),o=i[0],a=i[1];(o>n||a<r)&&(e.min=Math.min(t.min,h),e.max=Math.max(t.max,d),o=Math.min(n,o),a=Math.max(r,a)),e.fixedBorders=[o,a]}else e.fixed=!0,e.min=h,e.max=d,e.nice=!1,e.fixedBorders=[n,r];return e}),a/(l+a+f)},l=a?1:s(t.scaleX,c.left,c.right,!1),f=u?1:s(t.scaleY,c.top,c.bottom,!0),h=Math.min(n*l,n*f),d=Math.min(r*l,r*f);return t.scaleSize.fixup(function(){return{minSize:h,maxSize:d}}),{}}).reg("fillGaps",function(t,e){var n=e.isStack,r=e.xPeriod,i=e.utc,o=Ht(t.data(),t.group),a=Object.keys(o).sort(function(e,n){return t.order(e)-t.order(n)}).reduce(function(t,e){return t.concat([o[e]])},[]),u=t.scaleX.dim,c=t.scaleY.dim,s=t.scaleColor.dim,l=t.scaleSplit.dim,f=function(t){return t[c]>=0?1:-1},h=function(e,n,r){var i=Ht(n,function(t){return t[u]}),o=n[0];return e.reduce(function(e,n){return e.concat(i[n]||function(e,n,r){var i,o=[e,t.id(n),r].join(" ");return(i={})[u]=e,i[c]=1e-10*r,i[l]=n[l],i[s]=n[s],i.taucharts_synthetic_record=!0,i.taucharts_synthetic_recordid=o,i}(n,o,r))},[])},d=function(t,e){return t-e},p=function(){return Ut(a.reduce(function(t,e){return t.concat(e.map(function(t){return t[u]}))},[])).sort(d)},g=r?function(){var e=p(),n=Math.max.apply(Math,e.map(function(t){return Number(t)})),o=t.scaleX.domain(),a=v.generate(o[0],o[1],r,{utc:i}).filter(function(t){return t>=o[0]&&t<=o[1]}),u=0,c=[],s=v.get(r,{utc:i});return a.forEach(function(t){var r=Number(t);if(!(r>=n)){for(var i=u;i<e.length;i++)if(Number(s.cast(e[i]))===r)return void u++;c.push(t)}}),e.concat(c).sort(d)}():p(),m=a.map(function(e){return e.sort(function(e,n){return t.xi(e)-t.xi(n)})}).reduce(n?function(t,e){var n=Ht(e,function(t){return String(f(t))});return Object.keys(n).reduce(function(t,e){return t.concat(h(g,n[e],e))},t)}:function(t,e){Ht(e,function(t){return String(f(t))});var n=Math.max.apply(Math,e.map(function(t){return t[u]}));return t.concat(h(g.filter(function(t){return t<=n}),e,0))},[]);return{data:function(){return m},size:function(e){return e.taucharts_synthetic_record?t.scaleSize(0):t.size(e)},id:function(e){return e.taucharts_synthetic_record?e.taucharts_synthetic_recordid:t.id(e)}}});var S=n(5);function T(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return 2===e.length?e[0]*(1-t)+e[1]*t:3===e.length?e[0]*(1-t)*(1-t)+2*e[1]*(1-t)*t+e[2]*t*t:e[0]*(1-t)*(1-t)*(1-t)+3*e[1]*(1-t)*(1-t)*t+3*e[2]*(1-t)*t*t+e[3]*t*t*t}function E(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e.map(function(t){return t.x}),i=e.map(function(t){return t.y});return{x:T.apply(void 0,[t].concat(r)),y:T.apply(void 0,[t].concat(i))}}function k(t,e,n,r,i){var o=E(t,e,n),a=E(t,e,n,r),u=E(t,n,r,i),c=E(t,r,i);return[e,o,a,E(t,a,u),u,c,i]}function A(t){var e=t.polylineFrom,n=t.polylineTo,r=t.isCubic,i=t.toOppositeScale,o=e.length>n.length?e:n,a=1===n.length,u=e[0].id!==n[0].id,c=Boolean(u!==a);return function(t){var e=(r?z:D)({t:t,polyline:o,decreasing:a,rightToLeft:c});a===c?e.shift():e.pop();var n=F(e.map(i),e,a?1-t:t);return n.forEach(function(t){return t.positionIsBeingChanged=!0}),n}}function O(t){var e=t.polylineFrom,n=t.polylineTo,r=t.isCubic,i=e.length,o=n.length;if(o!==i){var a=o<i,u=a?e:n,c=(r?function(t){var e=t.smallerPolyline,n=t.biggerPolyline,r=t.decreasing,i=(e.length-1)/3,o=(n.length-1)/3,a=Math.floor(o/i)+1,u=o%i,c=Rt(i).map(function(t){return a+Number(t<u)}),s=[e[0]],l=3;return c.forEach(function(t){if(t>2){var i=function(t,e){for(var n,r,i=[e[0]],o=0;o<t.length;o++)n=0===o?t[0]:t[o]/(1-t[o-1]),r=U(n,e),j(i,r.slice(1,4)),e=r.slice(3);return j(i,e.slice(1)),i}(Rt(1,t-1).map(function(e){return e/(t-1)}),e.slice(l-3,l+1));Rt(t-2).forEach(function(t){return i[3*(t+1)].id=n[s.length-1+3*t].id}),r&&i.forEach(function(t,e){e>0&&e<i.length-1&&(t.isInterpolated=!0)}),j(s,i.slice(1))}else{var o=Object.assign({},e[l-2]),a=Object.assign({},e[l-1]),u=Object.assign({},e[l]);r||(u.id=n[s.length+2].id),s.push(o,a,u)}l+=3}),s}:function(t){var e=t.smallerPolyline,n=t.biggerPolyline,r=t.decreasing,i=e.length-1,o=n.length-1,a=Math.floor(o/i)+1,u=o%i,c=Rt(i).map(function(t){return a+Number(t<u)}),s=[e[0]],l=1;return c.forEach(function(t){Rt(1,t).forEach(function(i){var o;i===t-1?(o=Object.assign({},e[l]),r||(o.id=n[s.length].id)):((o=L(e[l-1],e[l],i/(t-1))).id=n[s.length].id,r&&(o.isInterpolated=!0)),s.push(o)}),l++}),s})({smallerPolyline:a?n:e,biggerPolyline:u,decreasing:a}),s=u.slice(1,u.length-1),l=c.slice(1,c.length-1);return function(t){var e=F(l,s,a?1-t:t);return e.forEach(function(t){return t.positionIsBeingChanged=!0}),e}}var f=e.slice(1,e.length-1),h=n.slice(1,n.length-1);return function(t){var e=F(f,h,t);return e.forEach(function(t){return t.positionIsBeingChanged=!0}),e}}function C(t){var e=t.pointFrom,n=t.pointTo;return function(t){return[L(e,n,t)]}}function N(t){var e=t.polylineFrom,n=t.polylineTo,r=t.isCubic,i=0===n.length,o=i,a=i?e:n;return function(t){var e=(r?z:D)({t:t,polyline:a,decreasing:i,rightToLeft:o});return e.forEach(function(t,e){e>0&&(t.positionIsBeingChanged=!0)}),e}}function j(t,e){return Array.prototype.push.apply(t,e)}function P(t,e,n){return void 0===e?t:"number"==typeof e?t+n*(e-t):e}function L(t,e,n){if(t===e)return e;var r={};return Object.keys(t).forEach(function(i){return r[i]=P(t[i],e[i],n)}),void 0!==e.id&&(r.id=e.id),r}function F(t,e,n){return t.map(function(t,r){return L(t,e[r],n)})}function D(t){var e=t.t,n=t.polyline,r=t.decreasing,i=t.rightToLeft,o=Boolean(r)!==Boolean(i),a=function(t,e){var n=0;if(t>0){for(var r,i,o,a,u=[0],c=0,s=1;s<e.length;s++)o=e[s-1].x,a=e[s-1].y,r=e[s].x,i=e[s].y,c+=Math.sqrt((r-o)*(r-o)+(i-a)*(i-a)),u.push(c);var l=t*c;for(s=1;s<u.length;s++)if(l<=u[s]){n=Math.min(1,(s-1+(l-u[s-1])/(u[s]-u[s-1]))/(e.length-1));break}}var f=Math.floor((e.length-1)*n)+1,h=e.length-f,d=f,p=e.slice(0,f);if(n<1){var g=n*(e.length-1)%1,m=L(e[f-1],e[f],g);j(p,Rt(h).map(function(t){return Object.assign({},m,{id:e[d+t].id,isInterpolated:!0})}))}return p}(r?1-e:e,o?n.slice(0).reverse():n);return o&&a.reverse(),a}function z(t){var e=t.t,n=t.polyline,r=t.decreasing,i=t.rightToLeft,o=Boolean(r)!==Boolean(i),a=function(t,e){var n=(e.length-1)/3+1,r=0;if(t>0){for(var i,o,a,u,c,s,l,f,h=[0],d=0,p=1;p<n;p++)a=e[3*p-3].x,u=e[3*p-3].y,c=e[3*p-2].x,s=e[3*p-2].y,l=e[3*p-1].x,f=e[3*p-1].y,i=e[3*p].x,o=e[3*p].y,d+=(I(a,u,c,s)+I(c,s,l,f)+I(l,f,i,o)+I(i,o,a,u))/2,h.push(d);var g=t*d;for(p=1;p<h.length;p++)if(g<=h[p]){r=Math.min(1,(p-1+(g-h[p-1])/(h[p]-h[p-1]))/(n-1));break}}var m=Math.floor((n-1)*r)+1,y=n-m,v=3*m,b=e.slice(0,3*(m-1)+1);if(r<1){var _=U(r*(n-1)%1,e.slice(3*(m-1),3*m+1)).slice(1,4);_.forEach(function(t){return t.isInterpolated=!0}),_[2].id=e[v].id,j(b,_),Rt(1,y).forEach(function(t){j(b,[{x:_[2].x,y:_[2].y,isCubicControl:!0,isInterpolated:!0},{x:_[2].x,y:_[2].y,isCubicControl:!0,isInterpolated:!0},Object.assign({},_[2],{id:e[v+3*t].id,isInterpolated:!0})])})}return b}(r?1-e:e,o?n.slice(0).reverse():n);return o&&a.reverse(),a}function R(t,e){var n,r,i,o,a=[],u=[],c=0,s=t.length,l=e.length;for(n=0;n<s;n++)for(i=t[n],r=c;r<l;r++)if(o=e[r],i.id===o.id){c=r+1,a.push(i),u.push(o);break}if(a.length<1||u.length<1)return function(t){return t};var f=Object.keys(a[0]).filter(function(t){return"number"==typeof a[0][t]}).filter(function(t){return"id"!==t}),h={},d=function(t,e,n,r){return function(i){return r+(i-e)*(r-n)/(e-t)}};return f.forEach(function(t){for(var e,n,r=a[0][t],i=u[0][t],o=a.length-1;o>0;o--)if((e=a[o][t])!==r)return n=u[o][t],void(h[t]=d(r,e,i,n));h[t]=function(t,e){return function(n){return n-t+e}}(r,i)}),function(t){var e=Object.assign({},t);return f.forEach(function(n){e[n]=h[n](t[n])}),e}}function I(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}function U(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=k(t,n,r,i,o);return[a[1],a[2],a[4],a[5]].forEach(function(t){return t.isCubicControl=!0}),Object.keys(o).forEach(function(e){"x"!==e&&"y"!==e&&"id"!==e&&(a[3][e]=P(n[e],o[e],t))}),a}function H(t,e){if(t.length<2)return t.slice(0);if(2===t.length)return[t[0],{x:B(t[0].x,t[1].x,1/3),y:B(t[0].y,t[1].y,1/3)},{x:B(t[0].x,t[1].x,2/3),y:B(t[0].y,t[1].y,2/3)},t[1]];for(var n,r,i,o,a,u,c,s,l,f,h,d,p,g,m=new Array(3*(t.length-1)+1),y=m.length-1,v=0;v<t.length;v++)m[3*v]=t[v],v>0&&(m[3*v-2]=E(1/3,t[v-1],t[v]),m[3*v-1]=E(2/3,t[v-1],t[v]));for(var b=m.slice(0),_=0;_<3;_++){for(m[1]={x:B(m[0].x,m[3].x,1/3),y:B(m[0].y,B(m[3].y,m[2].y,1.5),2/3)},m[y-1]={x:B(m[y].x,m[y-3].x,1/3),y:B(m[y].y,B(m[y-3].y,m[y-2].y,1.5),2/3)},e&&((m[1].y-m[0].y)*(m[3].y-m[2].y)<0&&(m[1]={x:m[1].x,y:m[0].y}),(m[y-1].y-m[y].y)*(m[y-3].y-m[y-2].y)<0&&(m[y-1]={x:m[y-1].x,y:m[y].y})),v=6;v<b.length;v+=3)n=b[v-5],r=b[v-3],i=b[v-1],(r.x-n.x)*(i.x-r.x)*1e12<1?(o=B(n.x,r.x,.5),u=B(r.x,i.x,.5),a=B(n.y,r.y,.5),c=B(r.y,i.y,.5)):(f=(r.x-n.x)/(i.x-n.x),s=(r.x-n.x*(1-f)*(1-f)-i.x*f*f)/(2*(1-f)*f),l=(r.y-n.y*(1-f)*(1-f)-i.y*f*f)/(2*(1-f)*f),o=B(n.x,s,f),u=B(s,i.x,f),a=B(n.y,l,f),c=B(l,i.y,f),e&&(d=r.x-o,p=u-r.x,h=(c-r.y)/p,(r.y-n.y)*(i.y-r.y)<=0?h=0:(r.y>n.y==c>i.y&&(p=B(p*(g=(i.y-r.y)/(c-r.y)),p,1/(1+Math.abs(g))),h=(i.y-r.y)/p),r.y>n.y==a<n.y&&(d=B(d*(g=(r.y-n.y)/(r.y-a)),d,1/(1+Math.abs(g))),h=(r.y-n.y)/d)),o=r.x-d,u=r.x+p,a=r.y-h*d,c=r.y+h*p)),m[v-4]={x:o,y:a},m[v-2]={x:u,y:c};b=m.slice(0)}return b}function B(t,e,n){return t+n*(e-t)}var W={linear:function(t){return t},step:function(t){for(var e,n,r,i,o=[],a=void 0!==t[0].id,u=void 0!==t[0].size,c=1;c<t.length;c++)e=t[c-1],n=t[c],r={x:(e.x+n.x)/2,y:e.y},i={x:(e.x+n.x)/2,y:n.y},a&&(r.id=e.id+"-"+n.id+"-1",i.id=e.id+"-"+n.id+"-2"),u&&(r.size=e.size,i.size=n.size),1===c&&o.push(e),o.push(r,i,n);return o},"step-before":function(t){for(var e,n,r,i=[],o=void 0!==t[0].id,a=void 0!==t[0].size,u=1;u<t.length;u++)e=t[u-1],n=t[u],r={x:e.x,y:n.y},o&&(r.id=e.id+"-"+n.id),a&&(r.size=n.size),1===u&&i.push(e),i.push(r,n);return i},"step-after":function(t){for(var e,n,r,i=[],o=void 0!==t[0].id,a=void 0!==t[0].size,u=1;u<t.length;u++)e=t[u-1],r={x:(n=t[u]).x,y:e.y},o&&(r.id=e.id+"-"+n.id),a&&(r.size=e.size),1===u&&i.push(e),i.push(r,n);return i}},Y={smooth:function(t){return H(t,!1)},"smooth-keep-extremum":function(t){return H(t,!0)}};function G(t){return W[t]||Y[t]}function X(t){return void 0!==Y[t]?"cubic":"polyline"}var q=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},a,S),V=function(){return Xt(function(t){return t.node().getComputedTextLength()},function(t){return t.node().textContent.length})},$=function(t,e,n){n=n||V(),t.each(function(){var t=q.select(this.parentNode).data()[0],r=e(t),i=q.select(this),o=!1,a=i.text().split(/\s+/).reduce(function(t,e,a){if(o)return t;var u=a>0?[t,e].join(" "):e,c=n(i.text(u));if(c<r)t=u;else{var s=Math.floor(r/c*u.length);t=u.substr(0,s-4)+"...",o=!0}return t},"");i.text(a)})},Z=function(t,e,n,r,i,o){o=o||V();var a=function(t,e,n,r,i,o,a){var u=a*n+o;return t.append("tspan").attr("x",r).attr("y",i).attr("dy",u+"em").text(e)};t.each(function(){var t=q.select(this.parentNode).data()[0],u=e(t),c=q.select(this),s=c.text().split(/\s+/),l=c.attr("x"),f=c.attr("y"),h=parseFloat(c.attr("dy"));c.text(null);var d=a(c,null,1.1,l,f,h,0),p=!1,g=s.length-1,m=s.reduce(function(t,e,r){if(p)return t;var i=t.length===n||r===g,a=t[t.length-1],c=""!==a?a+" "+e:e,s=o(d.text(c)),l=s>u;if(l&&i){var f=Math.floor(u/s*c.length);t[t.length-1]=c.substr(0,f-4)+"...",p=!0}return l&&!i&&t.push(e),l||(t[t.length-1]=c),t},[""]).filter(function(t){return t.length>0});f=i?-1*(m.length-1)*Math.floor(.5*r):f,m.forEach(function(t,e){return a(c,t,1.1,l,f,h,e)}),d.remove()})},J=function(t,e,n){return e>0&&!document.hidden&&((t=t.transition(n).duration(e)).attr=Q),t.onTransitionEnd=function(t){return et(this,t),this},t},Q=function(t,e){var n,r=this,i=q.transition.prototype.attr.apply(this,arguments);if(0===arguments.length)throw new Error("Unexpected `transition().attr()` arguments.");1===arguments.length?n=t:arguments.length>1&&((c={})[t]=e,n=c);var o="__transitionAttrs__",a="__lastTransitions__",u=tt();this.each(function(){var t=this,e={};for(var r in n)"function"==typeof n[r]?e[r]=n[r].apply(this,arguments):e[r]=n[r];this[o]=Object.assign(this[o]||{},e),this[o][a]||Object.defineProperty(this[o],a,{value:{}}),Object.keys(e).forEach(function(e){return t[o][a][e]=u})});var c,s=function(){var t=this;this[o]&&(Object.keys(n).filter(function(e){return t[o][a][e]===u}).forEach(function(e){return delete t[o][e]}),0===Object.keys(this[o]).length&&delete this[o])};return this.on("interrupt."+u,function(){return r.each(s)}),this.on("end."+u,function(){return r.each(s)}),i},K=0,tt=function(){return++K},et=function(t,e){if(q.transition.prototype.isPrototypeOf(t)&&!t.empty()){var n=function(){return e.call(null,t)};return t.on("interrupt.d3_on_transition_end",n),t.on("end.d3_on_transition_end",n),t}e.call(null,t)},nt=function(t,e,n,r){var i=r||function(t){return t},o=function(){i(this)};return function(r){var i=r;return e&&(i=i.call(ot(Yt(e,n)))),i=(i=J(i,t)).call(ot(n)),t>0?i.on("end.d3_animationInterceptor",function(){return i.each(o)}):i.each(o),i}},rt=function(t,e){var n=t.node();return t.selectAll(e).filter(function(){return this.parentNode===n})},it=function(t,e,n,r,i){void 0===i&&(i="linear");var o="__pathPoints__";return function(t){var a=this;this[o]||(this[o]=n.map(function(){return[]}));var u=n.map(function(e,n){var u=Ut(t,r).map(e),c=(G(i)||G("linear"))(u),s=a[o][n];return{pointsFrom:s,pointsTo:c,interpolate:function(t,e,n){var r;return void 0===n&&(n="polyline"),function(i){return 0===i?t:1===i?e:(r||(r=("cubic"===n?function(t,e){for(var n=2;n<t.length-1;n+=3)t[n-1].isCubicControl=!0,t[n].isCubicControl=!0;for(n=2;n<e.length-1;n+=3)e[n-1].isCubicControl=!0,e[n].isCubicControl=!0;var r,i;for(t=t.filter(function(t){return!t.isInterpolated}),n=t.length-2;n>=0;n--)i=t[n+1],(r=t[n]).isCubicControl||i.isCubicControl||(t.splice(n+1,0,E(1/3,i,r),E(2/3,i,r)),t[n+1].isCubicControl=!0,t[n+2].isCubicControl=!0);var o=t.filter(function(t,e){return e%3==0}),a=e.filter(function(t,e){return e%3==0}),u=o.map(function(t){return t.id}),c=a.map(function(t){return t.id}),s=u.reduce(function(e,n){return e[n]=t.findIndex(function(t){return t.id===n}),e},{}),l=c.reduce(function(t,n){return t[n]=e.findIndex(function(t){return t.id===n}),t},{}),f=u.filter(function(t){return c.indexOf(t)>=0}),h=o.filter(function(t){return!t.positionIsBeingChanged}),d=a.filter(function(t){return!t.positionIsBeingChanged}),p=R(h,d),g=R(d,h),m=[];return f.forEach(function(n,r){var i,o,a,u=s[n],c=l[n];if(0===r&&(u>0||c>0)&&m.push(A({polylineFrom:t.slice(0,u+1),polylineTo:e.slice(0,c+1),toOppositeScale:0===c?p:g,isCubic:!0})),r>0){var h=s[f[r-1]],d=l[f[r-1]];u-h>3||c-d>3?m.push(O({polylineFrom:t.slice(h,u+1),polylineTo:e.slice(d,c+1),isCubic:!0})):m.push((i={polylineFrom:t.slice(h,u+1),polylineTo:e.slice(d,c+1)},o=i.polylineFrom,a=i.polylineTo,function(t){return F(o.slice(1,3),a.slice(1,3),t)}))}m.push(C({pointFrom:t[u],pointTo:e[c]})),r===f.length-1&&(t.length-u-1>0||e.length-c-1>0)&&m.push(A({polylineFrom:t.slice(u),polylineTo:e.slice(c),toOppositeScale:e.length-c==1?p:g,isCubic:!0}))}),0===m.length&&(e.length>0&&0===f.length||t.length>0&&0===f.length)&&m.push(N({polylineFrom:t.slice(0),polylineTo:e.slice(0),isCubic:!0})),function(t){var e=[];return m.forEach(function(n){var r=n(t);j(e,r)}),e}}:function(t,e){var n=(t=t.filter(function(t){return!t.isInterpolated})).map(function(t){return t.id}),r=e.map(function(t){return t.id}),i=n.filter(function(t){return r.indexOf(t)>=0}),o=t.filter(function(t){return!t.positionIsBeingChanged}),a=e.filter(function(t){return!t.positionIsBeingChanged}),u=R(o,a),c=R(a,o),s=[];return i.forEach(function(o,a){var l=n.indexOf(o),f=r.indexOf(o);if(0===a&&(l>0||f>0)&&s.push(A({isCubic:!1,polylineFrom:t.slice(0,l+1),polylineTo:e.slice(0,f+1),toOppositeScale:0===f?u:c})),a>0){var h=n.indexOf(i[a-1]),d=r.indexOf(i[a-1]);(l-h>1||f-d>1)&&s.push(O({isCubic:!1,polylineFrom:t.slice(h,l+1),polylineTo:e.slice(d,f+1)}))}s.push(C({pointFrom:t[l],pointTo:e[f]})),a===i.length-1&&(t.length-l-1>0||e.length-f-1>0)&&s.push(A({isCubic:!1,polylineFrom:t.slice(l),polylineTo:e.slice(f),toOppositeScale:e.length-f==1?u:c}))}),0===s.length&&(e.length>0&&0===i.length||t.length>0&&0===i.length)&&s.push(N({isCubic:!1,polylineFrom:t.slice(0),polylineTo:e.slice(0)})),function(t){var e=[];return s.forEach(function(n){var r=n(t);j(e,r)}),e}})(t,e)),r(i))}}(s,c,X(i))}});return function(t){if(0===t){var n=u.map(function(t){return t.pointsFrom});return e.apply(void 0,n)}if(1===t){var r=u.map(function(t){return t.pointsTo});return a[o]=r,e.apply(void 0,r)}var i=u.map(function(e){return e.interpolate(t)});return a[o]=i,e.apply(void 0,i)}}},ot=function(t){return function(e){return Object.keys(t).forEach(function(n){return e.attr(n,t[n])}),e}},at=function(t){return function(e){return Object.keys(t).forEach(function(n){return e.classed(n,t[n])}),e}},ut=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=function(t){function e(e){var n=t.call(this,e)||this;n.config=e,n.config.guide=Yt(n.config.guide||{},{animationSpeed:0,enableColorToBarPosition:!1}),n.config.guide.size=n.config.guide.size||{};var r=n.config.stack,i=n.config.guide.enableColorToBarPosition,o=[e.flip&&M.get("flip"),r&&M.get("stack"),i&&M.get("positioningByColor")];return n.decorators=(n.config.transformRules||o).concat(e.transformModel||[]),n.adjusters=(n.config.adjustRules||[]).concat(e.adjustScales||[]),n}return ut(e,t),e.prototype.defineGrammarModel=function(t){var e=this,n=this.config;this.regScale("x",t("pos",n.x,[0,n.options.width])).regScale("y",t("pos",n.y,[n.options.height,0])).regScale("y",t("pos",n.y,function(t){return["ordinal","period"].indexOf(t.type)>=0?[0,n.options.height]:[n.options.height,0]})).regScale("size",t("size",n.size,{})).regScale("color",t("color",n.color,{})).regScale("split",t("split",n.split,{})).regScale("label",t("label",n.label,{})).regScale("identity",t("identity",n.identity,{}));var r=this.getScale("x"),i=this.getScale("y"),o=this.getScale("size"),a=this.getScale("label"),u=this.getScale("color"),c=this.getScale("split"),s=this.getScale("identity"),l=i.domain(),f=i.discrete?l[0]:Math.max(0,Math.min.apply(Math,l)),h=i.value(f)+.5*i.stepSize(f),d=u.domain(),p={data:function(){return e.data()},flip:!1,scaleX:r,scaleY:i,scaleSize:o,scaleLabel:a,scaleColor:u,scaleSplit:c,scaleIdentity:s,color:function(t){return u.value(t[u.dim])},label:function(t){return a.value(t[a.dim])},group:function(t){return t[u.dim]+"(@taucharts@)"+t[c.dim]},order:function(t){var e=t.split("(@taucharts@)")[0],n=d.indexOf(e);return n<0?Number.MAX_VALUE:n},size:function(t){return o.value(t[o.dim])},id:function(t){return s.value(t[s.dim],t)},xi:function(t){return r.value(t[r.dim])},yi:function(t){return i.value(t[i.dim])},y0:function(){return h}};return p.data().forEach(function(t){return p.id(t)}),p},e.prototype.getGrammarRules=function(){return this.decorators.filter(function(t){return t})},e.prototype.getAdjustScalesRules=function(){return(this.adjusters||[]).filter(function(t){return t})},e.prototype.createScreenModel=function(t){var e=t.flip,n=function(t,e,n){return t?e:n};return{flip:e,id:t.id,x:n(e,t.yi,t.xi),y:n(e,t.xi,t.yi),x0:n(e,t.y0,t.xi),y0:n(e,t.xi,t.y0),size:t.size,group:t.group,order:t.order,label:t.label,color:function(e){return t.scaleColor.toColor(t.color(e))},class:function(e){return t.scaleColor.toClass(t.color(e))},model:t,toFibers:function(){var e=Ht(t.data(),t.group);return Object.keys(e).sort(function(e,n){return t.order(e)-t.order(n)}).reduce(function(t,n){return t.concat([e[n]])},[])}}},e.prototype.drawFrames=function(){var t=this,e=this.config.options,n=function(e){return n=t.screenModel.size(e)/2,r=Math.pow(10,4),Math.round(r*n)/r;var n,r},r=nt,i=function(e,n,i){var o=t.config.guide.animationSpeed,u=e.selectAll("."+n).data(function(t){return[t]},t.screenModel.id);u.exit().call(r(o,null,{width:0},function(t){return a.select(t).remove()})),u.call(r(o,null,i)),u.enter().append("rect").style("stroke-width",0).call(r(o,{width:0},i))},o=this.config.flip,u=o?"y":"x",c=o?"x":"y",s=o?"x0":"y0",l=o?"height":"width",f=o?"width":"height",h=function(e){var r,o,a;i(e,"lvl-top",((r={})[l]=function(t){return n(t)},r[f]=1,r[u]=function(e){return t.screenModel[u](e)-n(e)/2},r[c]=function(e){return t.screenModel[c](e)},r.fill=function(e){return t.screenModel.color(e)},r.class=function(e){return"lvl-top "+t.screenModel.class(e)},r)),i(e,"lvl-btm",((o={})[l]=function(t){return n(t)},o[f]=1,o[u]=function(e){return t.screenModel[u](e)-n(e)/2},o[c]=function(e){return t.screenModel[s](e)},o.fill=function(e){return t.screenModel.color(e)},o.class=function(e){return"lvl-btm "+t.screenModel.class(e)},o)),i(e,"lvl-link",((a={})[l]=.5,a[f]=function(e){return Math.abs(t.screenModel[c](e)-t.screenModel[s](e))},a[u]=function(e){return t.screenModel[u](e)-.25},a[c]=function(e){return Math.min(t.screenModel[c](e),t.screenModel[s](e))},a.fill=function(e){return t.screenModel.color(e)},a.class=function(e){return"lvl-link "+t.screenModel.class(e)},a))},d=function(e){e.attr("class","frame-id-"+t.config.uid).call(function(e){var n=e.selectAll(".generic").data(function(t){return t},t.screenModel.id);n.exit().remove(),n.call(h),n.enter().append("g").attr("class","generic").call(h)})},p=Ht(this.data(),t.screenModel.group),g=Object.keys(p).sort(function(e,n){return t.screenModel.order(e)-t.screenModel.order(n)}).reduce(function(t,e){return t.concat([p[e]])},[]),m=e.container.selectAll(".frame-id-"+t.config.uid).data(g);m.exit().remove(),m.call(d),m.enter().append("g").call(d)},e}(g),st=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},u,c);function lt(t,e,n,r){var i=r(n(t),t);return(i[e]||[]).forEach(function(t){return lt(t,e,n,r)}),i}function ft(t,e,n,r){void 0===r&&(r=0),e(t,r)&&(t.units||[]).map(function(t){return ft(t,e,n,r+1)}),n(t,r)}var ht=function(){var t=[];function e(t){for(var e in t)this[e]=t[e]}function n(){this.copiedObjects=[];var t=this;this.recursiveDeepCopy=function(e){return t.deepCopy(e)},this.depth=0}function r(t,e){var r=new n;return e&&(r.maxDepth=e),r.deepCopy(t)}return e.prototype={constructor:e,canCopy:function(t){return!1},create:function(t){},populate:function(t,e,n){}},n.prototype={constructor:n,maxDepth:256,cacheResult:function(t,e){this.copiedObjects.push([t,e])},getCachedResult:function(t){for(var e=this.copiedObjects,n=e.length,r=0;r<n;r++)if(e[r][0]===t)return e[r][1]},deepCopy:function(e){if(null===e)return null;if("object"!=typeof e)return e;var n=this.getCachedResult(e);if(n)return n;for(var r=0;r<t.length;r++){var i=t[r];if(i.canCopy(e))return this.applyDeepCopier(i,e)}throw new Error("no DeepCopier is able to copy "+e)},applyDeepCopier:function(t,e){var n=t.create(e);if(this.cacheResult(e,n),this.depth++,this.depth>this.maxDepth)throw new Error("Exceeded max recursion depth in deep copy.");return t.populate(this.recursiveDeepCopy,e,n),this.depth--,n}},r.DeepCopier=e,r.deepCopiers=t,r.register=function(n){n instanceof e||(n=new e(n)),t.unshift(n)},r.register({canCopy:function(){return!0},create:function(t){return t instanceof t.constructor?"object"==typeof(e=t.constructor.prototype)?JSON.parse(JSON.stringify(e)):e:{};var e},populate:function(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}}),r.register({canCopy:function(t){return t instanceof Array},create:function(t){return new t.constructor},populate:function(t,e,n){for(var r=0;r<e.length;r++)n.push(t(e[r]));return n}}),r.register({canCopy:function(t){return t instanceof Date},create:function(t){return new Date(t)}}),r}(),dt=function(t){return/^(#|rgb\(|rgba\()/.test(t)},pt=/(.)^/,gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},mt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},yt=/\\|'|\r|\n|\u2028|\u2029/g,vt="(?:"+Object.keys(gt).join("|")+")",bt=RegExp(vt),_t=RegExp(vt,"g"),xt={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function wt(t){return ht(t)}function Mt(t){return t instanceof Date&&!isNaN(Number(t))}function St(t){return null!=t&&"object"==typeof t}function Tt(t){var e=parseFloat(Math.min.apply(Math,t).toFixed(15)),n=parseFloat(Math.max.apply(Math,t).toFixed(15));e===n&&(n-=(n>=0?-1:1)*(n||1)/10);for(var r=[e=Math.min(0,e),n=Math.max(0,n)],i=r[1]-r[0],o=Math.pow(10,Math.floor(Math.log(i/10)/Math.LN10)),a=10/i*o,u=[[.15,10],[.35,5],[.75,2],[1,1],[2,1]],c=-1;a>u[++c][0];);o*=u[c][1],r[0]=Math.floor(r[0]/o)*o,r[1]=Math.ceil(r[1]/o)*o;var s=e-r[0],l=r[1]-n,f=o/2;if(e<0){var h=s>=f?-s:0;r[0]=r[0]-h}if(n>0){var d=l>=f?-l:0;r[1]=r[1]+d}return[parseFloat(r[0].toFixed(15)),parseFloat(r[1].toFixed(15))]}function Et(t,e,n){var r=(void 0===n?{utc:!1}:n).utc,i=st.extent(t),o=i[0],a=i[1],u=+a-+o,c=r?st.scaleUtc:st.scaleTime;if(0===u)return o=new Date(o.getTime()-864e5),a=new Date(a.getTime()+864e5),c().domain([o,a]).nice(e).domain();var s=c().domain([o,a]).nice(e);if(e)return s.domain();var l=c().domain([o,a]).nice(e).domain(),f=l[0],h=l[1],d=s.ticks(),p=d.length-1;return(+o-+f)/(+d[1]-+f)<.5&&(o=f),(+h-+a)/(+h-+d[p-1])<.5&&(a=h),[o,a]}var kt=0,At={};function Ot(t){var e=btoa(encodeURIComponent(t)).replace(/=/g,"_");return At.hasOwnProperty(e)||(At[e]="H"+ ++kt),At[e]}function Ct(t,e,n){var r=0,i=null,o=Xt(function(t,e){return Ut(t.map(function(t){return e.reduce(function(e,n){return e.concat(Mt(r=t[n])?r.getTime():r);var r},[])}),function(t){return JSON.stringify(t)}).reduce(function(t,e){var n=e[0];return t[n]=t[n]||0,t[n]+=1,t},{})},function(t,e){var n=i===t?r:++r;return i=t,e.join("")+"-"+n});return function(r,i,a){var u=a.length,c=n.getSpec(),s=c.sources["/"].data,l=c.unit.units[0].guide||{};l.padding=l.padding||{l:0,r:0,t:0,b:0};var f=0;"x"===t?f=l.padding.l+l.padding.r:"y"===t&&(f=l.padding.t+l.padding.b);var h,d=(i-u*f)/(h=o(s,e),Object.keys(h).reduce(function(t,e){return t+h[e]},0));return(function(t,e){return o(s,t)[e]}(e,r)*d+f)/i}}function Nt(t){var e=!0;try{ft(t,function(t){if(0===t.type.indexOf("COORDS.")&&"COORDS.RECT"!==t.type)throw new Error("Not applicable")},function(t){return t})}catch(t){"Not applicable"===t.message&&(e=!1)}return e}function jt(t,e,n,r){if(void 0===r&&(r=0),"requestAnimationFrame"===r){var i=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];i||(requestAnimationFrame(function(){i=!1}),n.apply(this,r),i=!0),t.e=e,t.ts=Date.now()}}return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a={e:e,ts:Date.now()};(t.e&&t.e===a.e?a.ts-t.ts:r)>=r&&n.apply(this,i),t.e=a.e,t.ts=a.ts}}function Pt(t,e){var n=t[0],r=t[1],i=(r-n)/(e-1),o=e>=2?Rt(e-2).map(function(t){return n+i*(t+1)}):[];return[n].concat(o,[r])}function Lt(t){return dt(t)?t:""}function Ft(t){return dt(t)?"":t}function Dt(t){return t/180*Math.PI}function zt(t){return Math.abs(t)>=360&&(t%=360),t<0&&(t=360+t),t}function Rt(t,e){1===arguments.length&&(e=t,t=0);for(var n=[],r=t;r<e;r++)n.push(r);return n}function It(t){return Array.isArray(t)?[].concat.apply([],t.map(function(t){return It(t)})):t}function Ut(t,e){for(var n={},r=[],i=t.length,o=e||function(t){return String(t)},a=0;a<i;++a){var u=t[a],c=o(u);n.hasOwnProperty(c)||(n[c]=!0,r.push(u))}return r}function Ht(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})}function Bt(t,e){return Ut(t.concat(e))}function Wt(t,e){return t.filter(function(t){return-1!==e.indexOf(t)})}function Yt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e.length;if(0===r||!t)return t;for(var i=0;i<r;i++)for(var o=e[i],a=St(o)?Object.keys(o):[],u=a.length,c=0;c<u;c++){var s=a[c];void 0===t[s]&&(t[s]=o[s])}return t}function Gt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Object.assign({},t);return e.forEach(function(t){delete r[t]}),r}function Xt(t,e){var n=function(r){var i=n.cache,o=String(e?e.apply(this,arguments):r);return i.hasOwnProperty(o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n}function qt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e,n){var r=0;return t.every(function(t){return 0===(r=t(e,n))}),r}}function Vt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return null==t?{}:e.reduce(function(e,n){var r=t[n];return r&&(e[n]=r),e},{})}function $t(t){return t=null==t?"":String(t),bt.test(t)?t.replace(_t,function(t){return gt[t]}):t}function Zt(t,e,n){!e&&n&&(e=n),e=Yt({},e,xt);var r=RegExp([(e.escape||pt).source,(e.interpolate||pt).source,(e.evaluate||pt).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,u){return o+=t.slice(i,u).replace(yt,function(t){return"\\"+mt[t]}),i=u+e.length,n?o+="'+\n((__t=("+n+"))==null?'':utils.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj",o)}catch(t){throw t.source=o,t}var u=function(t){return a.call(this,t)},c=e.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u}function Jt(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var Qt="  ",Kt=32,te=["img","input","br","embed","link","meta","area","base","basefont","bgsound","col","command","frame","hr","image","isindex","keygen","menuitem","nextid","param","source","track","wbr","circle","ellipse","line","path","polygon","rect"].reduce(function(t,e){return t[e]=!0,t},{});function ee(t){var e=2,n=arguments[1];("object"!=typeof arguments[1]||Array.isArray(arguments[1]))&&(e=1,n={});var r=It(Array.prototype.slice.call(arguments,e)),i=1===r.length&&"<"!==r[0].trim()[0],o=te[t];if(o&&r.length>0)throw new Error('Tag "'+t+'" is void but content is assigned to it');var a="<"+t,u=Object.keys(n).map(function(t){return" "+t+'="'+n[t]+'"'}).join("");u.length>Kt&&(u=Object.keys(n).map(function(t){return"\n"+Qt+t+'="'+n[t]+'"'}).join(""));var c=i?r[0]:"\n"+r.map(function(t){return String(t).split("\n").map(function(t){return""+Qt+t}).join("\n")}).join("\n")+"\n";return""+a+u+(o?"/>":">"+c+"</"+t+">")}function ne(t){var e=t,n={then:function(t){return e=t(e),n},result:function(){return e}};return n}var re=[ct];function ie(t){return re.some(function(e){return t instanceof e})}function oe(t){return(t.units||[]).some(function(t){return t.hasOwnProperty("units")})}var ae=document.createElement("div"),ue=new WeakMap;function ce(t,e){var n;return t instanceof Node?n=t:(ae.insertAdjacentHTML("afterbegin",t),n=ae.childNodes[0]),e.appendChild(n),n}function se(t){if(ue.has(t))return ue.get(t);var e=t.style.overflow;t.style.overflow="scroll";var n={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight};return t.style.overflow=e,ue.set(t,n),n}function le(t,e){var n="horizontal"===(e=e||"both")||"both"===e,r="vertical"===e||"both"===e,i=se(t),o=r?i.width+"px":"0",a=n?i.height+"px":"0";t.style.overflow="hidden",t.style.padding="0 "+o+" "+a+" 0";var u=t.scrollWidth>t.clientWidth,c=t.scrollHeight>t.clientHeight,s=r&&!c?i.width+"px":"0",l=n&&!u?i.height+"px":"0";return t.style.padding="0 "+s+" "+l+" 0",t.style.overflow="",t.style.overflowX=u?"scroll":"hidden",t.style.overflowY=c?"scroll":"hidden",i}function fe(t,e){return window.getComputedStyle(t).getPropertyValue(e)}function he(t,e){return parseInt(fe(t,e)||"0",10)}function de(t){var e=he(t,"padding-left"),n=he(t,"padding-right"),r=he(t,"padding-bottom"),i=he(t,"padding-top"),o=he(t,"border-top-width")+he(t,"border-left-width")+he(t,"border-right-width")+he(t,"border-bottom-width"),a=t.getBoundingClientRect();return{width:a.width-e-n-2*o,height:a.height-r-i-2*o}}function pe(t){var e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width="100px",e.style.height="100px",e.style.border="1px solid green",e.style.top="0",document.body.appendChild(e),e.innerHTML='<svg class="tau-chart__svg">\n                <g class="tau-chart__cell cell">\n                <g class="x axis">\n                <g class="tick"><text>'+t+"</text></g>\n                </g>\n                </g>\n                </svg>";var n={width:0,height:0},r=e.querySelector(".x.axis .tick text").getBoundingClientRect();n.width=r.right-r.left,n.height=r.bottom-r.top;var i=0!==t.length?n.width/t.length:0;return n.width=n.width+1.5*i,document.body.removeChild(e),n}function ge(t,e){for(var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o="string"==typeof n?n:n+"px",a=0,u=0,c=t.length-1,s=0;s<=c;s++){var l=t.charAt(s),f=me(l,{fontSize:o,fontFamily:r,fontWeight:i});a+=f.width,u=Math.max(u,f.height)}return{width:a,height:parseInt(o)}}var me=Xt(function(t,e){var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=document.createElement("div");o.style.position="absolute",o.style.visibility="hidden",o.style.border="0px",o.style.top="0",o.style.fontSize=n,o.style.fontFamily=r,o.style.fontWeight=i,document.body.appendChild(o),o.innerHTML=" "===t?"&nbsp;":t;var a={width:0,height:0},u=o.getBoundingClientRect();return a.width=u.right-u.left,a.height=u.bottom-u.top,document.body.removeChild(o),a},function(t,e){return t+"_"+JSON.stringify(e)});function ye(t,e){var n={".":function(t,e){return e.classed(t,!0)},"#":function(t,e){return e.attr("id",t)}},r=Object.keys(n).join("");if(e.indexOf(" ")>=0)throw new Error("Selector should not contain whitespaces.");if(r.indexOf(e[0])>=0)throw new Error("Selector must have tag at the beginning.");var i,o=t instanceof Element,u=o?a.select(t):t,c=function(t){return o?t.node():t},s=u.selectAll(e).filter(function(){return this.parentNode===u.node()}).filter(function(t,e){return 0===e});if(!s.empty())return c(s);for(var l,f=-1,h=null,d=1,p=e.length;d<=p;d++)(d==p||r.indexOf(e[d])>=0)&&(l=e.substring(f+1,d),f<0?i=u.append(l):n[h].call(null,l,i),h=e[d],f=d);return c(i)}function ve(t,e){return be(t,e)[0]||null}function be(t,e){for(var n=[],r=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,i=t.firstElementChild;Boolean(i);i=i.nextElementSibling)r.call(i,e)&&n.push(i);return n}function _e(t,e){if(t.childElementCount>0){var n,r,i=Array.prototype.filter.call(t.childNodes,function(t){return t.nodeType===Node.ELEMENT_NODE}),o=i.slice().sort(e),a=i.reduce(function(t,e,n){return t.set(e,n),t},new Map),u=o.reduce(function(t,e,i){var u=a.get(e),c=i-u;return c!==r&&(n&&t.push(n),r=c,n={from:u,to:i,elements:[]}),n.elements.push(e),i===o.length-1&&t.push(n),t},[]),c=u.slice().sort(function(t,e){return t.from-e.from}),s=c.reduce(function(t,e,n){return t.set(e,n),t},new Map),l=function(t){for(var e,n,r,i=u.map(function(t,e){return{elements:t.elements,from:s.get(t),to:e}}).sort(qt(function(t,e){return t.elements.length-e.elements.length},t?function(t,e){return e.to-t.to}:function(t,e){return t.to-e.to})),o=0;o<i.length;o++){if((n=i[o]).from>n.to)for(e=o+1;e<i.length;e++)(r=i[e]).from>=n.to&&r.from<n.from&&r.from++;if(n.from<n.to)for(e=o+1;e<i.length;e++)(r=i[e]).from>n.from&&r.from<=n.to&&r.from--}return i.filter(function(t){return t.from!==t.to})},f=l(!0),h=l(!1),d=f.length<h.length?f:h,p=c.map(function(t){return t.elements});d.forEach(function(e){var n,r=p.splice(e.from,1)[0],i=p[e.to],o=i?i[0]:null;1===e.elements.length?n=r[0]:(n=document.createDocumentFragment(),r.forEach(function(t){n.appendChild(t)})),t.insertBefore(n,o),p.splice(e.to,0,r)})}}function xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[];return t.filter(function(t){return Boolean(t)}).forEach(function(t){"string"==typeof t?n.push(t):"object"==typeof t&&n.push.apply(n,Object.keys(t).filter(function(e){return Boolean(t[e])}))}),Ut(n).join(" ").trim().replace(/\s{2,}/g," ")}function we(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i,o=document.createEvent("MouseEvents"),a=[!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null],u=n.concat(a.slice(n.length));(i=o).initMouseEvent.apply(i,[e].concat(u)),t.dispatchEvent(o)}function Me(t,e){return"translate("+t+","+e+")"}function Se(t){return"rotate("+t+")"}function Te(t){return["bottom","top"].indexOf(t.toLowerCase())>=0?"h":"v"}function Ee(t,e,n,r,i,o,a,u){var c,s,l,f,h,d;return d=((l=a-i)*(e-o)-(f=u-o)*(t-i))/(-l*(s=r-e)+(c=n-t)*f),(h=(-s*(t-i)+c*(e-o))/(-l*s+c*f))>=0&&h<=1&&d>=0&&d<=1}function ke(t){for(var e,n,r=function(t){var e={x:0,y:0},n=t.indexOf("translate(");if(n>=0){var r=t.indexOf(")",n+10),i=t.substring(n+10,r).trim().replace(","," ").replace(/\s+/," ").split(" ");e.x=parseFloat(i[0]),i.length>1&&(e.y=parseFloat(i[1]))}return e},i={x:0,y:0},o=t;o&&"SVG"!==o.nodeName.toUpperCase();)(n=o.getAttribute("transform"))&&(e=r(n),i.x+=e.x,i.y+=e.y),o=o.parentNode;return i}function Ae(t,e,n){var r=t.selectAll(e).filter(n);if(!r.empty()){var i=a.select(r.node().parentNode).selectAll(e).filter(function(t){return!n(t)}).nodes(),o=i[i.length-1];if(o){var u=Array.prototype.indexOf.call(o.parentNode.childNodes,o),c=o.nextSibling;r.each(function(){Array.prototype.indexOf.call(this.parentNode.childNodes,this)>u||this.parentNode.insertBefore(this,c)})}}}var Oe=function(t){return Mt(t)?t.getTime():t},Ce={cross:function(t,e,n){var r=t(),i=Ut(r.map(function(t){return t[e]}),Oe),o=Ut(r.map(function(t){return t[n]}),Oe),a=0===i.length?[null]:i;return(0===o.length?[null]:o).reduce(function(t,r){return t.concat(a.map(function(t){var i={};return e&&(i[e]=Oe(t)),n&&(i[n]=Oe(r)),i}))},[])},cross_period:function(t,e,n,r,i,o){var a=t(),u=!!o&&o.utcTime,c=Ut(a.map(function(t){return t[e]}),Oe),s=Ut(a.map(function(t){return t[n]}),Oe),l=0===c.length?[null]:c,f=0===s.length?[null]:s;return r&&(l=v.generate(Math.min.apply(Math,c),Math.max.apply(Math,c),r,{utc:u})),i&&(f=v.generate(Math.min.apply(Math,s),Math.max.apply(Math,s),i,{utc:u})),f.reduce(function(t,r){return t.concat(l.map(function(t){var i={};return e&&(i[e]=Oe(t)),n&&(i[n]=Oe(r)),i}))},[])},groupBy:function(t,e){return Ut(t().map(function(t){return t[e]}),Oe).map(function(t){return(n={})[e]=Oe(t),n;var n})},none:function(){return[null]}},Ne=function(){function t(t,e,n){var r=t.key,i=t.pipe,o=t.source,a=t.units;void 0===n&&(n={}),this.key=r,this.pipe=i||[],this.source=o,this.units=a,this._frame={key:r,source:o,pipe:this.pipe},this._data=e,this._pipeReducer=function(t,e){return n[e.type](t,e.args)}}return t.prototype.hash=function(){return Ot([this._frame.pipe,this._frame.key,this._frame.source].map(function(t){return JSON.stringify(t)}).join(""))},t.prototype.full=function(){return this._data},t.prototype.part=function(t){return void 0===t&&(t=function(t){return t}),this._frame.pipe.map(t).reduce(this._pipeReducer,this._data)},t}(),je=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pe=function(t){return Mt(t)?t.getTime():t},Le=function(t){var e=this;Object.keys(t).forEach(function(n){return e[n]=t[n]})},Fe=function(t,e,n){return t.map(function(t){return"string"==typeof t?n.get(t):t}).filter(function(t){return t}).reduce(function(t,e){return n=t,void 0===(r=e(t,{}))&&(r={}),Object.assign(new Le(n),r);var n,r},e)},De=function(t){function e(e,n,r,i){var o=t.call(this)||this;return Yt(e.scales,{size_null:{type:"size",source:"?"},split_null:{type:"value",source:"?"},label_null:{type:"value",source:"?"},color_null:{type:"color",source:"?"},identity_null:{type:"identity",source:"?"},"size:default":{type:"size",source:"?"},"color:default":{type:"color",source:"?"},"split:default":{type:"value",source:"?"},"label:default":{type:"value",source:"?"},"identity:default":{type:"identity",source:"?"}}),e.settings=e.settings||{},o.config=e,o.sources=e.sources,o.scales=e.scales,o.unitSet=r,o.grammarRules=i,o.scalesHub=n,o.transformations=Object.assign(e.transformations||{},{where:function(t,e){var n=Object.keys(e||{}).map(function(t){return function(n){return Pe(n[t])===e[t]}});return t.filter(function(t){return n.every(function(e){return e(t)})})}}),o}return je(e,t),e.traverseSpec=function(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null);var o=[],a=function(t,e,n,r,i){o.push(function(){e(t,r,i)}),t.frames&&t.frames.forEach(function(r){(r.units||[]).map(function(i){return a(i,e,n,t,r)})}),o.push(function(){return n(t,r,i)})};return a(t.unit,e,n,r,i),o},e.prototype.unfoldStructure=function(){return this.root=this._expandUnitsStructure(this.config.unit),this.config},e.prototype.getDrawScenarioQueue=function(t){var e=this,n=this.grammarRules,r=this._flattenDrawScenario(t,function(t,r,i){var o=!1===r.expression.inherit?null:i,a=e._createFrameScalesFactoryMethod(o),u=e.unitSet.create(r.type,Object.assign({},r,{options:t.allocateRect(i.key)})),c=new Le(u.defineGrammarModel(a)),s=Fe(u.getGrammarRules(),c,n);return Fe(u.getAdjustScalesRules(),s,n),u.node().screenModel=u.createScreenModel(s),u}),i=this._flattenDrawScenario(t,function(t,r,i){var o=!1===r.expression.inherit?null:i,a=e._createFrameScalesFactoryMethod(o),u=e.unitSet.create(r.type,Object.assign({},r,{options:t.allocateRect(i.key)})),c=new Le(u.defineGrammarModel(a)),s=Fe(u.getGrammarRules(),c,n);return u.node().screenModel=u.createScreenModel(s),u.parentUnit=t,u.addInteraction(),u});return r.concat(function(){Object.keys(e.scales).forEach(function(t){return e.scalesHub.createScaleInfo(e.scales[t]).commit()})}).concat(i)},e.prototype._flattenDrawScenario=function(t,n){var r={},i=[],o=[t],a=e.traverseSpec({unit:this.root},function(t,e,a){var u;t.uid=(u=Ot((e?e.uid+"/":"")+JSON.stringify(Object.keys(t).filter(function(e){return"string"==typeof t[e]}).reduce(function(e,n){return e[n]=t[n],e},{}))+"-"+JSON.stringify(a.pipe)),r.hasOwnProperty(u)?u+="-"+ ++r[u]:r[u]=0,u),t.guide=wt(t.guide);var c,s=n(o[0],t,a);i.push(s),0===t.type.indexOf("COORDS.")&&(c=s,o.unshift(c))},function(t){0===t.type.indexOf("COORDS.")&&o.shift()},null,this._datify({source:this.root.expression.source,pipe:[]}));return a.push(function(){return i}),a},e.prototype._expandUnitsStructure=function(t,e){var n=this;void 0===e&&(e=[]);var r=this;if(!1===t.expression.operator)t.frames=t.frames.map(function(t){return r._datify(t)});else{var i=this._parseExpression(t.expression,e,t.guide);t.transformation=t.transformation||[],t.frames=i.exec().map(function(n){var o=(i.inherit?e:[]).concat([{type:"where",args:n}]).concat(t.transformation);return r._datify({key:n,pipe:o,source:i.source,units:t.units?t.units.map(function(t){var e=wt(t);return e.guide=t.guide,e}):[]})})}return t.frames.forEach(function(t){return t.units.forEach(function(e){return n._expandUnitsStructure(e,t.pipe)})}),t},e.prototype._createFrameScalesFactoryMethod=function(t){var e=this;return function(n,r,i){var o=r||n+":default";return e.scalesHub.createScaleInfo(e.scales[o],t).create("function"==typeof i?i(e.scales[o]):i)}},e.prototype._datify=function(t){return new Ne(t,this.sources[t.source].data,this.transformations)},e.prototype._parseExpression=function(t,e,n){var r=this,i=t.operator||"none",o=t.source,a=!1!==t.inherit,u=t.params,c={source:o,pipe:a?e:[]},s=Ce[i];if(!s)throw new Error(i+" operator is not supported");return{source:o,inherit:a,func:s,args:u,exec:function(){return s.apply(void 0,[function(){return r._datify(c).part()}].concat(u||[],[n]))}}},e}(d),ze="tau-chart__",Re=n(10),Ie=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Re.Tooltip.defaults.baseClass=ze+"tooltip";var Ue,He,Be=["top","bottom"],We=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype._pickPlace=function(t){if(!this.options.auto)return this.options.place;var e,n,r,i,o,a,u,c,s=0|this.options.winBound,l=(e=s,r=window,i=document.documentElement,o=(r.pageYOffset||i.scrollTop)-i.clientTop,a=(r.pageXOffset||i.scrollLeft)-i.clientTop,u=r.innerWidth||i.clientWidth,c=r.innerHeight||i.clientHeight,{top:(n={top:o,right:a+u,bottom:o+c,left:a,width:u,height:c}).top+e,right:n.right-e,bottom:n.bottom-e,left:n.left+e,width:n.width-2*e,height:n.height-2*e}),f=this.options.place.split("-"),h=this.spacing;if(-1!==Be.indexOf(f[0]))switch(t.top-this.height-h<=l.top?f[0]="bottom":t.bottom+this.height+h>=l.bottom&&(f[0]="top"),f[1]){case"left":t.right-this.width<=l.left&&(f[1]="right");break;case"right":t.left+this.width>=l.right&&(f[1]="left");break;default:t.left+t.width/2+this.width/2>=l.right?f[1]="left":t.right-t.width/2-this.width/2<=l.left&&(f[1]="right")}else switch(t.left-this.width-h<=l.left?f[0]="right":t.right+this.width+h>=l.right&&(f[0]="left"),f[1]){case"top":t.bottom-this.height<=l.top&&(f[1]="bottom");break;case"bottom":t.top+this.height>=l.bottom&&(f[1]="top");break;default:t.top+t.height/2+this.height/2>=l.bottom?f[1]="top":t.bottom-t.height/2-this.height/2<=l.top&&(f[1]="bottom")}return f.join("-")},e}(Re.Tooltip),Ye=function(){function t(t,e){this.chart=e,this.handlers=new Map,this.plugins=t.map(this.initPlugin,this)}return t.prototype.initPlugin=function(t){var e=this;t.init&&t.init(this.chart);var n=[];this.handlers.set(t,n);var r=function(r,i){n.push(e.chart.on(r,i,t))};return t.destroy&&r("destroy",t.destroy.bind(t)),Object.keys(t).forEach(function(e){if(0===e.indexOf("on")){var n=e.substr(2).toLowerCase();r(n,t[e].bind(t))}}),t},t.prototype.destroyPlugin=function(t){var e=this;t.destroy&&t.destroy(),this.handlers.get(t).forEach(function(n){e.chart.removeHandler(n,t)})},t.prototype.destroy=function(){var t=this;this.plugins.forEach(function(e){return t.destroyPlugin(e)})},t}(),Ge={},Xe={},qe={reg:function(t,e,n){return n?(Xe[t]=n,Ge[t]=function(t,e){this.___tauchartsseed___=new e(this.init(t))},Ge[t].prototype=Object.assign({init:function(t){return t},defineGrammarModel:function(t){return this.node().defineGrammarModel(t)},getGrammarRules:function(t){return this.node().getGrammarRules(t)},getAdjustScalesRules:function(t){return this.node().getAdjustScalesRules(t)},createScreenModel:function(t){return this.node().createScreenModel(t)},addInteraction:function(){this.node().addInteraction()},node:function(){return this.___tauchartsseed___},draw:function(){this.node().draw()}},e)):Ge[t]=e,this},get:function(t){if(!Ge.hasOwnProperty(t))throw new _("Unknown unit type: "+t,x.UNKNOWN_UNIT_TYPE);return Ge[t]},create:function(t,e){var n=this.get(t);return Xe[t]?new n(e,this.get(Xe[t])):new n(e)}},Ve={},$e={},Ze={reg:function(t,e,n){return void 0===n&&(n=function(t){return t}),Ve[t]=e,$e[t]=n,Ze},get:function(t){return Ve[t]},instance:function(t){return void 0===t&&(t={}),{create:function(e,n,r){return new(Ze.get(e))(n,(0,$e[e])(r,t))}}}},Je=function(){function t(t,e,n){this.registry=t,this.sources=e,this.scales=n}return t.prototype.createScaleInfo=function(t,e){void 0===e&&(e=null);var n=t.dim,r=t.source,i=(this.sources[r].dims[n]||{}).type,o=this.sources[r].data,a=e||new Ne({source:r},o);return t.dimType=i,this.registry.create(t.type,a,t)},t.prototype.createScaleInfoByName=function(t,e){return void 0===e&&(e=null),this.createScaleInfo(this.scales[t],e)},t}(),Qe=function(t,e,n){var r=!0,i=null;try{t.reduce(function(t,r){var o=function(t,e){var n=r[e],i=St(n)?JSON.stringify(n):n;return t.push(i),t},a=e.reduce(o,[]).join("/"),u=n.reduce(o,[]).join("/");if(t.hasOwnProperty(a)){var c=t[a];if(c!==u)throw i={type:"RelationIsNotAFunction",keyX:e.join("/"),keyY:n.join("/"),valX:a,errY:[c,u]},new Error("RelationIsNotAFunction")}else t[a]=u;return t},{})}catch(t){if("RelationIsNotAFunction"!==t.message)throw t;r=!1}return{result:r,error:i}},Ke=function(t,e,n){var r=t,i=["period","time"].indexOf(n.scale)>=0?function(t){return new Date(t)}:function(t){return t},o=t.reduce(function(t,e,n){return t.set(e,n),t},new Map);if("measure"===n.type||"period"===n.scale)r=t.slice().sort(qt(function(t,n){return i(t[e])-i(n[e])},function(t,e){return o.get(t)-o.get(e)}));else if(n.order){var a=n.order.reduce(function(t,e,n){return t[e]=n,t},{}),u=n.order.length,c="(___"+e+"___)";r=t.map(function(t){var n=a[t[e]];return n=n>=0?n:u,t[c]=n,t}).sort(qt(function(t,e){return t[c]-e[c]},function(t,e){return o.get(t)-o.get(e)})).map(function(t){return delete t[c],t})}return r},tn=function(t,e){var n=document.createElement("div");return n.classList.add(ze+t),e&&e.appendChild(n),n},en=function(){var t=tn("layout"),e=tn("layout__header",t),n=tn("layout__container",t),r=tn("layout__sidebar",n),i=tn("layout__content",n),o=tn("layout__content__wrap",i),a=tn("layout__sidebar-right",n);return{layout:t,header:e,content:o,contentContainer:i,leftSidebar:r,rightSidebar:tn("layout__sidebar-right__wrap",a),rightSidebarContainer:a,footer:tn("layout__footer",t)}},nn=function(){function t(t){this.spec=t,this.dist={sources:{"?":{dims:{},data:[{}]},"/":{dims:{},data:[]}},scales:{x_null:{type:"ordinal",source:"?"},y_null:{type:"ordinal",source:"?"},size_null:{type:"size",source:"?"},color_null:{type:"color",source:"?"},split_null:{type:"value",source:"?"},"pos:default":{type:"ordinal",source:"?"},"size:default":{type:"size",source:"?"},"label:default":{type:"value",source:"?"},"color:default":{type:"color",source:"?"},"split:default":{type:"value",source:"?"}},settings:t.settings}}return t.prototype.convert=function(){var t=this.spec,e=this.dist;return this.ruleAssignSourceDims(t,e),this.ruleAssignStructure(t,e),this.ruleAssignSourceData(t,e),this.ruleApplyDefaults(e),e},t.prototype.ruleApplyDefaults=function(t){var e=t.settings||{},n=function(t,e,r){e(t,r),(t.units||[]).map(function(r){return n(r,e,t)})};n(t.unit,function(t,n){if(t.namespace="chart",t.guide=Yt(t.guide||{},{animationSpeed:e.animationSpeed||0,utcTime:e.utcTime||!1}),n&&!t.hasOwnProperty("units")){t=Yt(t,{x:n.x,y:n.y});var r=wt(n.guide)||{};t.guide.x=Yt(t.guide.x||{},r.x),t.guide.y=Yt(t.guide.y||{},r.y),t.expression.inherit=n.expression.inherit}return!n||t.guide&&t.guide.hasOwnProperty("obsoleteVerticalStackOrder")||(t.guide=Object.assign(t.guide||{},{obsoleteVerticalStackOrder:(n.guide||{}).obsoleteVerticalStackOrder})),t},null)},t.prototype.ruleAssignSourceData=function(t,e){var n=t.spec.dimensions||{},r=e.sources["/"].dims,i=function(t,e){var n=t[e];return St(n)&&!Mt(n)&&Object.keys(n).forEach(function(r){return t[e+"."+r]=n[r]}),t};e.sources["/"].data=t.data.map(function(t){var e=Object.keys(t).reduce(i,t);return Object.keys(r).reduce(function(t,e){return t.hasOwnProperty(e)||(t[e]=null),null!==t[e]&&n[e]&&["period","time"].indexOf(n[e].scale)>=0&&(t[e]=new Date(t[e])),t},e)})},t.prototype.ruleAssignSourceDims=function(t,e){var n=t.spec.dimensions;e.sources["/"].dims=Object.keys(n).reduce(function(t,e){return t[e]={type:n[e].type},t},{})},t.prototype.ruleAssignStructure=function(t,e){var n=this,r=function(t){var i=wt(Gt(t,"unit"));return n.ruleCreateScales(t,i,e.settings),i.expression=n.ruleInferExpression(t),t.unit&&(i.units=t.unit.map(r)),i},i=r(t.spec.unit);i.expression.inherit=!1,e.unit=i},t.prototype.ruleCreateScales=function(t,e,n){var r=this,i=t.guide||{};["identity","color","size","label","x","y","split"].forEach(function(o){t.hasOwnProperty(o)&&(e[o]=r.scalesPool(o,t[o],i[o]||{},n))})},t.prototype.ruleInferDim=function(t,e){var n=t,r=this.spec.spec.dimensions;if(!r.hasOwnProperty(n))return n;e.hasOwnProperty("tickLabel")?n=t+"."+e.tickLabel:r[t].value&&(n=t+"."+r[t].value);var i=this.dist.sources["/"].dims;return i.hasOwnProperty(n)||(i[n]={type:i[t].type},delete i[t]),n},t.prototype.scalesPool=function(t,e,n,r){var i=t+"_"+e;if(this.dist.scales.hasOwnProperty(i))return i;var o=this.spec.spec.dimensions,a={};if("color"===t&&null!==e&&(a={type:"color",source:"/",dim:this.ruleInferDim(e,n)},n.hasOwnProperty("brewer")&&(a.brewer=n.brewer),o[e]&&o[e].hasOwnProperty("order")&&(a.order=o[e].order),n.hasOwnProperty("min")&&(a.min=n.min),n.hasOwnProperty("max")&&(a.max=n.max),n.hasOwnProperty("nice")&&(a.nice=n.nice)),"size"===t&&null!==e&&(a={type:"size",source:"/",dim:this.ruleInferDim(e,n)},n.hasOwnProperty("func")&&(a.func=n.func),n.hasOwnProperty("min")&&(a.min=n.min),n.hasOwnProperty("max")&&(a.max=n.max),n.hasOwnProperty("minSize")&&(a.minSize=n.minSize),n.hasOwnProperty("maxSize")&&(a.maxSize=n.maxSize)),"label"===t&&null!==e&&(a={type:"value",source:"/",dim:this.ruleInferDim(e,n)}),"split"===t&&null!==e&&(a={type:"value",source:"/",dim:this.ruleInferDim(e,n)}),"identity"===t&&null!==e&&(a={type:"identity",source:"/",dim:this.ruleInferDim(e,n)}),o.hasOwnProperty(e)&&("x"===t||"y"===t)){if(a={type:o[e].scale,source:"/",dim:this.ruleInferDim(e,n)},o[e].hasOwnProperty("order")&&(a.order=o[e].order),n.hasOwnProperty("min")&&(a.min=n.min),n.hasOwnProperty("max")&&(a.max=n.max),n.hasOwnProperty("autoScale")?a.autoScale=n.autoScale:a.autoScale=!0,n.hasOwnProperty("nice")?a.nice=n.nice:a.nice=a.autoScale,n.hasOwnProperty("niceInterval")?a.niceInterval=n.niceInterval:a.niceInterval=null,n.hasOwnProperty("tickPeriod")&&(a.period=n.tickPeriod,a.type="period"),n.hasOwnProperty("tickPeriod")&&n.hasOwnProperty("timeInterval"))throw new Error('Use "tickPeriod" for period scale, "timeInterval" for time scale, but not both');if(n.hasOwnProperty("timeInterval")){a.period=n.timeInterval,a.type="time";var u=v.get(a.period,{utc:r.utcTime});n.hasOwnProperty("min")&&(a.min=u.cast(new Date(n.min))),n.hasOwnProperty("max")&&(a.max=u.cast(new Date(n.max)))}a.fitToFrameByDims=n.fitToFrameByDims,a.ratio=n.ratio}return this.dist.scales[i]=a,i},t.prototype.getScaleConfig=function(t,e){var n=t+"_"+e;return this.dist.scales[n]},t.prototype.ruleInferExpression=function(t){var e={operator:"none",params:[]},n=t.guide||{},r=n.x||{},i=n.y||{},o=this.getScaleConfig("x",t.x),a=this.getScaleConfig("y",t.y);return 0===t.type.indexOf("ELEMENT.")?t.color&&(e={operator:"groupBy",params:[this.ruleInferDim(t.color,n.color||{})]}):"COORDS.RECT"===t.type&&1===t.unit.length&&"COORDS.RECT"===t.unit[0].type&&(e=o.period||a.period?{operator:"cross_period",params:[this.ruleInferDim(t.x,r),this.ruleInferDim(t.y,i),o.period,a.period]}:{operator:"cross",params:[this.ruleInferDim(t.x,r),this.ruleInferDim(t.y,i)]}),Object.assign({inherit:!0,source:"/"},e)},t}(),rn=n(9),on=n(8),an=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},rn,on),un=an.format(".4s"),cn=an.format(".2r"),sn=an.format(".1e"),ln=(Ue=/\.0+([^\d].*)?$/,He=/(\.\d+?)0+([^\d].*)?$/,function(t){return t.replace(Ue,"$1").replace(He,"$1$2")}),fn={"x-num-auto":function(t){if(isNaN(t))return"NaN";var e=Math.abs(t);return ln(e<1?0===e?"0":e<1e-6?sn(t):cn(t):un(t))},percent:function(t){return parseFloat((100*t).toFixed(2)).toString()+"%"},day:an.timeFormat("%d-%b-%Y"),"day-utc":an.utcFormat("%d-%b-%Y"),"day-short":an.timeFormat("%d-%b"),"day-short-utc":an.utcFormat("%d-%b"),week:an.timeFormat("%d-%b-%Y"),"week-utc":an.utcFormat("%d-%b-%Y"),"week-short":an.timeFormat("%d-%b"),"week-short-utc":an.utcFormat("%d-%b"),month:function(t){var e=0===new Date(t).getMonth()?"%B, %Y":"%B";return an.timeFormat(e)(t)},"month-utc":function(t){var e=0===new Date(t).getUTCMonth()?"%B, %Y":"%B";return an.utcFormat(e)(t)},"month-short":function(t){var e=0===new Date(t).getMonth()?"%b '%y":"%b";return an.timeFormat(e)(t)},"month-short-utc":function(t){var e=0===new Date(t).getUTCMonth()?"%b '%y":"%b";return an.utcFormat(e)(t)},"month-year":an.timeFormat("%B, %Y"),"month-year-utc":an.utcFormat("%B, %Y"),quarter:function(t){var e=new Date(t),n=e.getMonth();return"Q"+((n-n%3)/3+1)+" "+e.getFullYear()},"quarter-utc":function(t){var e=new Date(t),n=e.getUTCMonth();return"Q"+((n-n%3)/3+1)+" "+e.getUTCFullYear()},year:an.timeFormat("%Y"),"year-utc":an.utcFormat("%Y"),"x-time-auto":null},hn={get:function(t,e){var n=e||"",r=function(t){return String(null===t||void 0===t?n:t)},i=fn.hasOwnProperty(t),o=i?fn[t]:r;return i&&(o=fn[t]),!i&&t&&(o=function(e){return(Mt(e)?an.timeFormat(t):an.format(t))(e)}),i||t||(o=r),o},add:function(t,e){fn[t]=e}},dn=function(t){return t.reduce(function(t,e){return t+e},0)},pn=function(t,e,n){return t[e]=Yt(t[e]||{},{label:""}),t[e].label=St(t[e].label)?t[e].label:{text:t[e].label},t[e].label=Yt(t[e].label,n||{},{padding:32,rotate:0,textAnchor:"middle",cssClass:"label",dock:null}),t[e]},gn=function(t,e,n){return t[e]=Yt(t[e],n||{},{padding:0,density:30,rotate:0,tickPeriod:null,tickFormat:null,autoScale:!0}),t[e].tickFormat=t[e].tickFormat||t[e].tickPeriod,t[e].nice=t[e].hasOwnProperty("nice")?t[e].nice:t[e].autoScale,t[e]},mn=function(t){var e=t.units||[],n=!t.hasOwnProperty("units"),r=!e.some(function(t){return t.hasOwnProperty("units")});return{type:t.type,isLeaf:n,isLeafParent:!n&&r}},yn=function(t,e,n,r){if(0===t.length)return{width:0,height:0};if(null===e){var i=n("TauChart Library");return i.width=.625*r,i}t.every(function(t){return"number"==typeof t})&&(t=c.scaleLinear().domain(t).ticks());var o=t.reduce(function(t,n){var r=e(n).toString().length;return!t.computed||r>t.computed?{value:n,computed:r}:t},{}).value;return n(e(o))},vn=function(t,e){var n=t.dimType,r=t.scaleType,i=[n,r,"*"].join(":"),o=[n,r].join(":");return e[i]||e[o]||e[n]||null},bn=function(t,e,n){return t.hasOwnProperty(e+":"+n)?t[e+":"+n]:t[""+e]},_n=function(t,e){return["day","week","month"].indexOf(t)>=0&&(t+="-short"+(e?"-utc":"")),t},xn=function(t,e){var n=t.width,r=t.height,i=Math.abs(Dt(e));return{width:Math.max(Math.cos(i)*n,r),height:Math.max(Math.sin(i)*n,r)}},wn=function(t,e){void 0===e&&(e="x");var n=zt(t),r="x"===e?[[0,45,"middle"],[45,135,"start"],[135,225,"middle"],[225,315,"end"],[315,360,"middle"]]:[[0,90,"end"],[90,135,"middle"],[135,225,"start"],[225,315,"middle"],[315,360,"end"]];return r[r.findIndex(function(t){return n>=t[0]&&n<t[1]})][2]},Mn=function(t,e,n){var r=Math.ceil(t.width/e);return{height:Math.min(r,n)*t.height,width:e}};function Sn(t,e,n,r,i,o){var a=n.values,u=r.values,c=n.isEmpty||t.x.hideTicks,s=r.isEmpty||t.y.hideTicks,l=yn(a,hn.get(t.x.tickFormat,t.x.tickFormatNullAlias),e.getAxisTickLabelSize,e.xAxisTickLabelLimit),f=yn(u,hn.get(t.y.tickFormat,t.y.tickFormatNullAlias),e.getAxisTickLabelSize,e.yAxisTickLabelLimit),h=l,d=f;l.width>e.xAxisTickLabelLimit&&(t.x.tickFormatWordWrap=!0,t.x.tickFormatWordWrapLines=e.xTickWordWrapLinesLimit,h=Mn(l,e.xAxisTickLabelLimit,e.xTickWordWrapLinesLimit)),f.width>e.yAxisTickLabelLimit&&(t.y.tickFormatWordWrap=!0,t.y.tickFormatWordWrapLines=e.yTickWordWrapLinesLimit,d=Mn(f,e.yAxisTickLabelLimit,e.yTickWordWrapLinesLimit)),o&&(t.y.tickFormatWordWrap=!1,t.y.tickFormatWordWrapLines=1,(d=Mn(f,2*e.yAxisTickLabelLimit,1)).width=20);var p=c?0:1,g=s?0:1,m=t.x.label,y=t.y.label,v=m.text&&!m.hide?1:0,b=y.text&&!y.hide?1:0,_=xn(h,t.x.rotate),x=xn(d,t.y.rotate);i?(m.padding=(-e.xAxisPadding-e.xFontLabelHeight)/2+e.xFontLabelHeight,m.paddingNoTicks=m.padding,y.padding=(-e.yAxisPadding-e.yFontLabelHeight)/2,y.paddingNoTicks=y.padding,v=0,b=0):(m.padding=dn([p*(e.xTickWidth+_.height),v*(e.distToXAxisLabel+e.xFontLabelHeight)]),m.paddingNoTicks=v*(e.distToXAxisLabel+e.xFontLabelHeight),y.padding=dn([g*(e.yTickWidth+x.width),b*e.distToYAxisLabel]),y.paddingNoTicks=b*e.distToYAxisLabel),o&&(y.padding=0,y.paddingNoTicks=0);var w=e.xFontLabelDescenderLineHeight;return t.padding=Object.assign(t.padding,{b:t.x.hide?0:dn([t.x.padding,p*(e.xTickWidth+_.height),v*(e.distToXAxisLabel+e.xFontLabelHeight+w)]),l:t.y.hide?0:dn([t.y.padding,o?0:g*(e.yTickWidth+x.width),b*(e.distToYAxisLabel+e.yFontLabelHeight)])}),t.paddingNoTicks=Object.assign({},t.paddingNoTicks,{b:t.x.hide?0:dn([t.x.padding,v*(e.distToXAxisLabel+e.xFontLabelHeight+w)]),l:t.y.hide?0:dn([t.y.padding,b*(e.distToYAxisLabel+e.yFontLabelHeight)])}),t.x=Object.assign(t.x,{density:_.width+2*bn(e,"xDensityPadding",n.dimType),tickFontHeight:l.height,$minimalDomain:a.length,$maxTickTextW:h.width,$maxTickTextH:h.height,tickFormatWordWrapLimit:e.xAxisTickLabelLimit}),t.y=Object.assign(t.y,{density:x.height+2*bn(e,"yDensityPadding",r.dimType),tickFontHeight:f.height,$minimalDomain:u.length,$maxTickTextW:d.width,$maxTickTextH:d.height,tickFormatWordWrapLimit:e.yAxisTickLabelLimit}),t}var Tn=function(t){var e=t.unit,n=t.meta,r=t.settings,i=t.allowXVertical,o=t.allowYVertical,a=t.inlineLabels,u=n.dimension(e.x),c=n.dimension(e.y),s=n.scaleMeta(e.x,e.guide.x),l=n.scaleMeta(e.y,e.guide.y),f=s.isEmpty,h=l.isEmpty;e.guide.x.tickFormat=_n(e.guide.x.tickFormat||vn(u,r.defaultFormats),r.utcTime),e.guide.y.tickFormat=_n(e.guide.y.tickFormat||vn(c,r.defaultFormats),r.utcTime);var d=!(!i||"measure"===u.dimType),p=!(!o||"measure"===c.dimType);if(e.guide.x.padding=f?0:r.xAxisPadding,e.guide.x.paddingNoTicks=e.guide.x.padding,e.guide.y.padding=h?0:r.yAxisPadding,e.guide.y.paddingNoTicks=e.guide.y.padding,e.guide.x.rotate=d?-90:0,e.guide.x.textAnchor=wn(e.guide.x.rotate,"x"),e.guide.y.rotate=p?-90:0,e.guide.y.textAnchor=wn(e.guide.y.rotate,"y"),e.guide=Sn(e.guide,r,s,l,a,oe(e)),a){var g=e.guide.x.label,m=e.guide.y.label;g.cssClass+=" inline",g.dock="right",g.textAnchor="end",m.cssClass+=" inline",m.dock="right",m.textAnchor="end"}return e},En={NONE:function(t,e,n){var r=wt(t);return kn(wt(r.unit),r.unit,function(t,e){return e.guide.x.tickFontHeight=n.getAxisTickLabelSize("X").height,e.guide.y.tickFontHeight=n.getAxisTickLabelSize("Y").height,e.guide.x.tickFormatWordWrapLimit=n.xAxisTickLabelLimit,e.guide.y.tickFormatWordWrapLimit=n.yAxisTickLabelLimit,e}),r},"BUILD-LABELS":function(t,e){var n=wt(t),r=[],i=[],o=null,a=null;return lt(n.unit,"units",mn,function(t,n){if(t.isLeaf)return n;!o&&n.x&&(o=n),!a&&n.y&&(a=n),n.guide=n.guide||{},n.guide.x=n.guide.x||{label:{text:""}},n.guide.y=n.guide.y||{label:{text:""}},n.guide.x.label=St(n.guide.x.label)?n.guide.x.label:{text:n.guide.x.label&&n.guide.x.label.text?n.guide.x.label.text:""},n.guide.y.label=St(n.guide.y.label)?n.guide.y.label:{text:n.guide.y.label&&n.guide.y.label.text?n.guide.y.label.text:""},n.x&&(n.guide.x.label.text=n.guide.x.label.text||e.dimension(n.x).dimName),n.y&&(n.guide.y.label.text=n.guide.y.label.text||e.dimension(n.y).dimName);var u=n.guide.x.label.text;u&&(r.push(u),n.guide.x.tickFormatNullAlias=n.guide.x.hasOwnProperty("tickFormatNullAlias")?n.guide.x.tickFormatNullAlias:"No "+u,n.guide.x.label.text="",n.guide.x.label._original_text=u);var c=n.guide.y.label.text;return c&&(i.push(c),n.guide.y.tickFormatNullAlias=n.guide.y.hasOwnProperty("tickFormatNullAlias")?n.guide.y.tickFormatNullAlias:"No "+c,n.guide.y.label.text="",n.guide.y.label._original_text=c),n}),o&&(o.guide.x.label.text=o.guide.x.label.hide?"":r.join("  ")),a&&(a.guide.y.label.text=a.guide.y.label.hide?"":i.join("  ")),n},"BUILD-GUIDE":function(t,e,n){var r=wt(t);return kn(wt(r.unit),r.unit,function(t,r){if(t.isLeaf)return r;var i=!t.isLeaf&&!t.isLeafParent,o=e.scaleMeta(r.x,r.guide.x),a=e.scaleMeta(r.y,r.guide.y),u=!i&&Boolean(o.dimType)&&"measure"!==o.dimType;return r.guide.x.rotate=u?-90:0,r.guide.x.textAnchor=wn(r.guide.x.rotate),r.guide.x.tickFormat=r.guide.x.tickFormat||vn(o,n.defaultFormats),r.guide.y.tickFormat=r.guide.y.tickFormat||vn(a,n.defaultFormats),r.guide.x.padding=i?0:n.xAxisPadding,r.guide.x.paddingNoTicks=r.guide.x.padding,r.guide.y.padding=i?0:n.yAxisPadding,r.guide.y.paddingNoTicks=r.guide.y.padding,r.guide=Sn(r.guide,Yt({distToXAxisLabel:o.isEmpty?n.xTickWidth:n.distToXAxisLabel,distToYAxisLabel:a.isEmpty?n.yTickWidth:n.distToYAxisLabel},n),o,a,null,oe(r)),r.guide.x=Object.assign(r.guide.x,{cssClass:i?r.guide.x.cssClass+" facet-axis":r.guide.x.cssClass,avoidCollisions:!!i||r.guide.x.avoidCollisions}),r.guide.y=Object.assign(r.guide.y,{cssClass:i?r.guide.y.cssClass+" facet-axis":r.guide.y.cssClass,avoidCollisions:!i&&r.guide.y.avoidCollisions}),r.guide=Object.assign(r.guide,{showGridLines:r.guide.hasOwnProperty("showGridLines")?r.guide.showGridLines:t.isLeafParent?"xy":""}),r}),r},"BUILD-COMPACT":function(t,e,n){var r=wt(t);return kn(wt(r.unit),r.unit,function(t,r){return t.isLeaf?r:(r.guide.hasOwnProperty("showGridLines")||(r.guide.showGridLines=t.isLeafParent?"xy":""),t.isLeafParent?Tn({unit:r,meta:e,settings:Yt({xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},n),allowXVertical:!0,allowYVertical:!1,inlineLabels:!0}):(r.guide.x.cssClass+=" facet-axis compact",r.guide.x.avoidCollisions=!0,r.guide.y.cssClass+=" facet-axis compact",r.guide.y.avoidCollisions=!0,Tn({unit:r,meta:e,settings:Yt({xAxisPadding:0,yAxisPadding:0,distToXAxisLabel:0,distToYAxisLabel:0,xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},n),allowXVertical:!1,allowYVertical:!0,inlineLabels:!1})))}),r},AUTO:function(t,e,n){return["BUILD-LABELS","BUILD-GUIDE"].reduce(function(t,r){return En[r](t,e,n)},t)},COMPACT:function(t,e,n){return["BUILD-LABELS","BUILD-COMPACT"].reduce(function(t,r){return En[r](t,e,n)},t)}},kn=function(t,e,n){var r,i=((r=e).options=r.options||{},r.guide=r.guide||{},r.guide.padding=Yt(r.guide.padding||{},{l:0,b:0,r:0,t:0}),r.guide.x=pn(r.guide,"x"),r.guide.x=gn(r.guide,"x",{cssClass:"x axis",scaleOrient:"bottom",textAnchor:"middle"}),r.guide.y=pn(r.guide,"y",{rotate:-90}),r.guide.y=gn(r.guide,"y",{cssClass:"y axis",scaleOrient:"left",textAnchor:"end"}),r.guide.size=pn(r.guide,"size"),r.guide.color=pn(r.guide,"color"),r),o=Gt(i=function(t,e){var n=e.guide||{},r={x:["label"],y:["label"],size:["label"],color:["label"],padding:[]};return Object.keys(r).forEach(function(e){var i=r[e];!function(t,e,n,r){var i=t.hasOwnProperty(n)?t[n]:{};i=i||{},r.forEach(function(t){Object.assign(e.guide[n][t],i[t])})}(n,t,e,i)}),Object.assign(t.guide,Object.keys(n).reduce(function(t,e){return r.hasOwnProperty(e)||(t[e]=n[e]),t},{})),t}(i=n(mn(i),i),t),"units");return(i.units||[]).forEach(function(t){return kn(wt(t),(r=o,(e=t).guide=e.guide||{},e.guide.padding=e.guide.padding||{l:0,t:0,r:0,b:0},e.hasOwnProperty("units")||((e=Yt(e,r)).guide=Yt(e.guide,wt(r.guide)),e.guide.x=Yt(e.guide.x,wt(r.guide.x)),e.guide.y=Yt(e.guide.y,wt(r.guide.y))),e),n);var e,r}),i},An=function(){function t(t){this.spec=t,this.isApplicable=Nt(t.unit)}return t.prototype.transform=function(t){var e=this.spec;if(!this.isApplicable)return e;var n=e.settings.size,r=e.settings.specEngine.find(function(t){return n.width<=t.width||n.height<=t.height});return function(t,e,n,r){var i={dimension:function(t){var e=n.scales[t],r=n.sources[e.source].dims[e.dim]||{};return{dimName:e.dim,dimType:r.type,scaleType:e.type}},scaleMeta:function(t){var e=r("pos",t).domain(),i=n.scales[t],o=n.sources[i.source].dims[i.dim]||{};return{dimName:i.dim,dimType:o.type,scaleType:i.type,values:e,isEmpty:null==o.type}}},o=(En[t]||En.NONE)({unit:wt(n.unit)},i,e);return n.unit=o.unit,n}(r.name,e.settings,e,function(e,n){return t.getScaleInfo(n||e+":default")})},t}(),On=function(){function t(){}return t.optimizeXAxisLabel=function(t,e){var n=e.xAxisTickLabelLimit,r=function(t){if(!t.guide.x.hide&&!t.guide.x.hideTicks&&0!==t.guide.x.rotate){t.guide.x.rotate=0,t.guide.x.textAnchor="middle";var e=0-Math.min(n,t.guide.x.$maxTickTextW)+t.guide.x.$maxTickTextH;i(t,e)}(t.units||[]).filter(function(t){return"COORDS.RECT"===t.type}).forEach(function(t){return r(t)})},i=function(e,n){t!==e&&"extract-axes"===e.guide.autoLayout?(t.guide.x.padding+=n,t.guide.padding.b+=n):(e.guide.x.label.padding+=e.guide.x.label.padding>0?n:0,e.guide.padding.b+=e.guide.padding.b>0?n:0)};r(t)},t.hideAxisTicks=function(t,e,n){var r=function(t){var e="x"===n?"b":"l",i=t.guide;if(!i[n].hide&&!i[n].hideTicks){oe(t)&&"y"===n||(i[n].hideTicks=!0);var o=i[n].label.text&&!i[n].label.hide;i.padding[e]=i.paddingNoTicks?i.paddingNoTicks[e]:0,i[n].padding=i[n].paddingNoTicks||0,i[n].label.padding=o?i[n].label.paddingNoTicks:0}(t.units||[]).filter(function(t){return"COORDS.RECT"===t.type}).forEach(function(t){return r(t)})};r(t)},t.facetsLabelsAtTop=function(t,e){var n=function(t){var e=t.units||[];if(oe(t)){var r=t.guide;r.y.facetAxis=!0,r.y.rotate=0,r.y.textAnchor="start",e.forEach(function(t){t.guide.padding.t=20})}e.filter(function(t){return"COORDS.RECT"===t.type}).forEach(function(t){return n(t)})};n(t)},t}(),Cn=function(t){return t.$maxTickTextW},Nn=function(t){return 0==t.rotate?t.$maxTickTextW:t.$maxTickTextH},jn=function(t){return t.density},Pn=function(t){var e=[],n=[],r=function(t){if("COORDS.RECT"===t.type&&t.units&&t.units[0]&&"COORDS.RECT"===t.units[0].type){var i=t.x.replace(/^x_/,""),o=t.y.replace(/^y_/,"");"null"!==i&&e.push(i),"null"!==o&&n.push(o),t.units.forEach(r)}};r(t.unit);var i={},o={},a=function(t){"COORDS.RECT"===t.type&&t.frames.forEach(function(t){t.key&&(Object.keys(t.key).forEach(function(r){e.indexOf(r)>=0&&(i.hasOwnProperty(r)||(i[r]=[]),i[r].indexOf(t.key[r])<0&&i[r].push(t.key[r])),n.indexOf(r)>=0&&(o.hasOwnProperty(r)||(o[r]=[]),o[r].indexOf(t.key[r])<0&&o[r].push(t.key[r]))}),t.units&&t.units.forEach(a))})};return a(t.unit),{xFacetCount:Object.keys(i).reduce(function(t,e){return t*i[e].length},1),yFacetCount:Object.keys(o).reduce(function(t,e){return t*o[e].length},1)}},Ln={"entire-view":function(t,e,n,r){var i=n.unit.guide,o=Pn(n),a=o.xFacetCount,u=o.yFacetCount;u>0&&On.facetsLabelsAtTop(n.unit,n.settings);var c=i.paddingNoTicks?i.padding.l-i.paddingNoTicks.l:0,s=i.paddingNoTicks?i.padding.b-i.paddingNoTicks.b:0,l=i.paddingNoTicks&&t.height-s<n.settings.minChartHeight||u*n.settings.minFacetHeight+s>t.height||a*n.settings.minFacetWidth+c>t.width,f=i.paddingNoTicks&&t.width-c<n.settings.minChartWidth||u*n.settings.minFacetHeight+s>t.height||a*n.settings.minFacetWidth+c>t.width;l&&On.hideAxisTicks(n.unit,n.settings,"x"),f&&On.hideAxisTicks(n.unit,n.settings,"y");var h=t.width;if(e("x",n.unit,Cn)<=t.width)r(n.unit,n.settings);else{var d=e("x",n.unit,Nn);if(d>t.width){var p=Math.max(t.width,e("x",n.unit,jn));h=Math.min(d,p)}}var g=Math.max(t.height,e("y",n.unit,jn));return!l&&h>t.width&&On.hideAxisTicks(n.unit,n.settings,"x"),!f&&g>t.height&&On.hideAxisTicks(n.unit,n.settings,"y"),{newW:t.width,newH:t.height}},minimal:function(t,e,n){return{newW:e("x",n.unit,jn),newH:e("y",n.unit,jn)}},normal:function(t,e,n,r){Pn(n).yFacetCount>0&&On.facetsLabelsAtTop(n.unit,n.settings);var i=n.unit.guide;i.paddingNoTicks&&(t.width-i.padding.l+i.paddingNoTicks.l<n.settings.minChartWidth&&On.hideAxisTicks(n.unit,n.settings,"y"),t.height-i.padding.b+i.paddingNoTicks.b<n.settings.minChartHeight&&On.hideAxisTicks(n.unit,n.settings,"x"));var o=t.width;if(e("x",n.unit,Cn)<=t.width)r(n.unit,n.settings);else{var a=e("x",n.unit,Nn);if(a>t.width){var u=Math.max(t.width,e("x",n.unit,jn));o=Math.min(a,u)}}return{newW:o,newH:Math.max(t.height,e("y",n.unit,jn))}},"fit-width":function(t,e,n,r){var i=n.unit.guide,o=i.paddingNoTicks?i.padding.l-i.paddingNoTicks.l:0;return(i.paddingNoTicks&&t.width-o<n.settings.minChartWidth||Pn(n).xFacetCount*n.settings.minFacetWidth+o>t.width)&&On.hideAxisTicks(n.unit,n.settings,"y"),e("x",n.unit,Cn)<=t.width&&r(n.unit,n.settings),{newW:t.width,newH:e("y",n.unit,jn)}},"fit-height":function(t,e,n){var r=n.unit.guide,i=r.paddingNoTicks?r.padding.b-r.paddingNoTicks.b:0;return(r.paddingNoTicks&&t.height-i<n.settings.minChartHeight||Pn(n).yFacetCount*n.settings.minFacetHeight+i>t.height)&&On.hideAxisTicks(n.unit,n.settings,"x"),{newW:e("x",n.unit,jn),newH:t.height}}},Fn=function(){function t(t){this.spec=t,this.isApplicable=Nt(t.unit)}return t.prototype.transform=function(t){var e=this.spec;if(!this.isApplicable)return e;var n=e.settings.fitModel;if(!n)return e;var r=e.scales,i=function(t,e){return t.discrete?e*t.domain().length:4*e},o=function(e,n,a,u){void 0===u&&(u=null);var c="x"===e?n.x:n.y,s="x"===e?n.y:n.x,l=n.guide,f=a("x"===e?l.x:l.y),h=n.units[0],d="x"===e?l.padding.l+l.padding.r:l.padding.b+l.padding.t;if("ELEMENT.INTERVAL"===h.type&&"y"===e===Boolean(h.flip)&&h.label&&!t.getScaleInfo(h.label,u).isEmpty()){var p,g=2*(l.label&&l.label.fontSize?l.label.fontSize:10),m=t.getScaleInfo(c,u);if(m.discrete&&(null==h.guide.enableColorToBarPosition?!h.stack:h.guide.enableColorToBarPosition)){var y=h.color;if(y){var v=t.getScaleInfo(y,u);v.discrete&&(v.domain(),p=v)}}var b=n.frames.reduce(function(t,e){return t+function(t){var e=t.part(),n=Ut(e.map(function(t){return t[m.dim]})).length,r=1;if(p){var i=e.reduce(function(t,e){var n=e[m.dim],r=e[p.dim];return t[n]=t[n]||{},t[n][r]||(t[n][r]=!0),t},{}),o=Object.keys(i).map(function(t){return Object.keys(i[t]).length});r=Math.max.apply(Math,o)}return n*r*g}(e)},0),_=i(m,f);return d+Math.max(b,_)}if("COORDS.RECT"!==h.type){var x=t.getScaleInfo(c,u);return d+i(x,f)}var w,M,S=(w=n.frames,M=r[s].dim,w.reduce(function(t,e){var n=(e.key||{})[M];return t[n]=t[n]||[],t[n].push(e),t},{})),T=Object.keys(S).map(function(t){return S[t].map(function(t){return o(e,t.units[0],a,t)}).reduce(function(t,e){return t+e},0)});return d+Math.max.apply(Math,T)},a=e.settings.size,u=a.width,c=a.height,s=Ln[n];if(s){var l=s(a,o,e,On.optimizeXAxisLabel);u=l.newW,c=l.newH}return e.settings.size=function(n,r,i){var o=e.settings.getScrollbarSize(t.getLayout().contentContainer),a=r.width>n.width&&r.width<=n.width*i?n.width:r.width,u=r.height>n.height&&r.height<=n.height*i?n.height:r.height,c=n.width-a,s=n.height-u>=0?0:o.width;return{height:u-(c>=0?0:o.height),width:a-s}}(a,{width:u,height:c},e.settings.avoidScrollAtRatio),e},t}(),Dn=function(){function t(t){this.spec=t,this.isApplicable=t.settings.autoRatio&&Nt(t.unit)}return t.prototype.transform=function(t){var e=this.spec;if(!this.isApplicable)return e;try{this.ruleApplyRatio(e,t)}catch(t){if("Not applicable"!==t.message)throw t}return e},t.prototype.ruleApplyRatio=function(t,e){var n=function(t){return"COORDS.RECT"===t.type||"RECT"===t.type},r=function(t,e,n,i){void 0===i&&(i=0),e(t,i)&&(t.units||[]).map(function(t){return r(t,e,n,i+1)}),n(t,i)},i=[],o=[];r(t.unit,function(t,e){if(e>1||!n(t))throw new Error("Not applicable");return i.push(t.x),o.push(t.y),1===(t.units||[]).map(function(t){if(!n(t)&&0!==t.type.indexOf("ELEMENT."))throw new Error("Not applicable");return t}).filter(n).length},function(){return 0});var a=function(e){return t.scales[e]},u=function(t){return"/"===t.source&&!t.ratio&&!t.fitToFrameByDims},c=function(t){return"ordinal"===t.type||"period"===t.type&&!t.period},s=i.map(a).filter(u),l=o.map(a).filter(u);if([s.length,l.length].some(function(t){return 2===t})){var f=function(t){return t.dim},h=function(t,e,n){t.fitToFrameByDims=n.slice(0,e).map(f)},d=function(t,n){2===n.filter(c).length&&(n.forEach(h),n[0].ratio=Ct(t,n.map(f),e))};d("x",s),d("y",l)}},t}(),zn=function(){function t(t){this.spec=t,this.isApplicable="EXTRACT"===t.settings.layoutEngine&&Nt(t.unit)}return t.prototype.transform=function(){var t=this.spec;if(!this.isApplicable)return t;try{this.ruleExtractAxes(t)}catch(t){if("Not applicable"!==t.message)throw t;console.log("[TauCharts]: can't extract axes for the given chart specification")}return t},t.prototype.ruleExtractAxes=function(t){var e=function(t){return"COORDS.RECT"===t.type||"RECT"===t.type},n=function(t){return t?10:0},r={l:0,r:10,t:10,b:0},i={l:0,b:0},o=[],a=[];ft(t.unit,function(t,n){if(n>1||!e(t))throw new Error("Not applicable");t.guide=t.guide||{};var u=t.guide,c=u.padding||{l:0,r:0,t:0,b:0},s=u.paddingNoTicks||{l:0,b:0};return r.l+=c.l,r.r+=c.r,r.t+=c.t,r.b+=c.b,i.l+=s.l,i.b+=s.b,o.push(Object.assign({},r)),a.push(Object.assign({},i)),1===(t.units||[]).map(function(t){if(!e(t)&&0!==t.type.indexOf("ELEMENT."))throw new Error("Not applicable");return t}).filter(e).length},function(t){var e=o.pop(),u=a.pop(),c=t.guide||{};c.x=c.x||{},c.x.padding=c.x.padding||0,c.x.paddingNoTicks=c.x.paddingNoTicks||0,c.y=c.y||{},c.y.padding=c.y.padding||0,c.y.paddingNoTicks=c.y.paddingNoTicks||0,c.padding={l:n(t.y),r:n(1),t:n(1),b:n(t.x)},c.paddingNoTicks={l:0,b:0},c.autoLayout="extract-axes",c.x.padding+=r.b-e.b,c.y.padding+=r.l-e.l,c.x.paddingNoTicks+=i.b-u.b,c.y.paddingNoTicks+=i.l-u.l}),t.unit.guide.padding=r,t.unit.guide.paddingNoTicks=i},t}(),Rn=function(){function t(t){var e=void 0===t?{}:t,n=e.src,r=void 0===n?null:n,i=e.timeout,o=void 0===i?Number.MAX_SAFE_INTEGER:i,a=e.syncInterval,u=void 0===a?Number.MAX_SAFE_INTEGER:a,c=e.callbacks,s=void 0===c?{}:c,l=this;this.setTimeoutDuration(o),this.setSyncInterval(u),this.setCallbacks(s),this._running=!1,this._queue=[],this._result=r,this._syncDuration=0,this._asyncDuration=0,this._requestedFrameId=null,this._visibilityChangeHandler=function(){if(l._running&&l._requestedFrameId){var t=l._getCancelFrameFunction(),e=l._getRequestFrameFunction();t(l._requestedFrameId),l._requestedFrameId=e(l._requestedFrameCallback)}},this._tasksCount=0,this._finishedTasksCount=0}return t.prototype.setTimeoutDuration=function(e){t.checkType(e,"number","timeout"),this._timeout=e},t.prototype.setSyncInterval=function(e){t.checkType(e,"number","syncInterval"),this._syncInterval=e},t.prototype.setCallbacks=function(e){t.checkType(e,"object","callbacks"),this._callbacks=Object.assign(this._callbacks||{},e)},t.prototype.addTask=function(t){return this._queue.push(t),this._tasksCount++,this},t.prototype.run=function(){if(this._running)throw new Error("Task Runner is already running");this._running=!0,t.runnersInProgress++,document.addEventListener("visibilitychange",this._visibilityChangeHandler),this._loopTasks()},t.prototype.isRunning=function(){return this._running},t.prototype._loopTasks=function(){for(var e,n,r,i,o=0,a=this._syncInterval/t.runnersInProgress;this._running&&!(r=this._asyncDuration>this._timeout)&&!(i=o>a)&&(e=this._queue.shift());){if(null===(n=this._runTask(e)))return;this._syncDuration+=n,this._asyncDuration+=n,o+=n}r&&this._queue.length>0&&(this.stop(),this._callbacks.timeout&&this._callbacks.timeout.call(null,this._asyncDuration,this)),!r&&i&&this._queue.length>0&&this._requestFrame(),0===this._queue.length&&(this.stop(),this._callbacks.done&&this._callbacks.done.call(null,this._result,this))},t.prototype._runTask=function(t){var e=performance.now();if(this._callbacks.error)try{this._result=t.call(null,this._result,this)}catch(t){return this.stop(),this._callbacks.error.call(null,t,this),null}else this._result=t.call(null,this._result,this);var n=performance.now()-e;return this._finishedTasksCount++,this._callbacks.progress&&this._callbacks.progress.call(null,this._finishedTasksCount/this._tasksCount,this),n},t.prototype._requestFrame=function(){var t=this,e=performance.now(),n=function(){t._requestedFrameId=null;var n=performance.now();t._asyncDuration+=n-e,t._loopTasks()},r=this._getRequestFrameFunction();this._requestedFrameCallback=n,this._requestedFrameId=r(n)},t.prototype._getRequestFrameFunction=function(){var t=this;return document.hidden?function(e){return t._requestedFrameType="idle",window.requestIdleCallback(e,{timeout:17})}:function(e){return t._requestedFrameType="animation",requestAnimationFrame(e)}},t.prototype._getCancelFrameFunction=function(){switch(this._requestedFrameType){case"animation":return function(t){return cancelAnimationFrame(t)};case"idle":return function(t){return window.cancelIdleCallback(t)}}},t.prototype.stop=function(){if(!this._running)throw new Error("Task Runner is already stopped");this._running=!1,t.runnersInProgress--,document.removeEventListener("visibilitychange",this._visibilityChangeHandler),this._requestedFrameId&&(this._getCancelFrameFunction()(this._requestedFrameId),this._requestedFrameId=null)},t.checkType=function(t,e,n){if(typeof t!==e)throw new Error('Task Runner "'+n+'" property is not "'+e+'"')},t.runnersInProgress=0,t}(),In=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Un=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},a),Hn=ye,Bn=ve,Wn=function(t){function e(e){var n=t.call(this)||this;return n._nodes=[],n._svg=null,n._filtersStore={filters:{},tick:0},n._layout=en(),n.transformers=[Dn,An],n.onUnitsStructureExpandedTransformers=[zn,Fn],n._chartDataModel=function(t){return t},n._reportProgress=null,n._taskRunner=null,n._renderingPhase=null,n.applyConfig(e),n}return In(e,t),e.prototype.on=function(e,n,r){return t.prototype.on.call(this,e,n,r)},e.prototype.updateConfig=function(t){this.applyConfig(t),this.refresh()},e.prototype.applyConfig=function(t){this._filtersStore.filters={},t=this.setupConfigSettings(t),this.configGPL=this.createGPLConfig(t),this._originData=Object.assign({},this.configGPL.sources),this._liveSpec=this.configGPL,this._emptyContainer=t.emptyContainer||"",this.setupPlugins(t)},e.prototype.createGPLConfig=function(t){var n;return this.isGPLConfig(t)?n=t:(t=this.setupConfig(t),n=new nn(t).convert()),n=e.setupPeriodData(n)},e.prototype.isGPLConfig=function(t){return 2===["sources","scales"].filter(function(e){return t.hasOwnProperty(e)}).length},e.prototype.setupPlugins=function(t){var e=t.plugins||[];this._plugins&&this._plugins.destroy(),this._plugins=new Ye(e,this)},e.prototype.setupConfigSettings=function(t){var n;return this._dataRefs=this._dataRefs||(n=0,{references:new WeakMap,refCounter:function(){return++n}}),t.settings=e.setupSettings(Yt(t.settings||{},this._dataRefs)),t},e.prototype.destroy=function(){this.destroyNodes(),Un.select(this._svg).remove(),Un.select(this._layout.layout).remove(),this._cancelRendering(),t.prototype.destroy.call(this)},e.prototype.setupChartSourceModel=function(t){this._chartDataModel=t},e.prototype.setupConfig=function(t){if(!t.spec||!t.spec.unit)throw new Error("Provide spec for plot");var n=Yt(t,{spec:{},data:[],plugins:[],settings:{}});n.spec.dimensions=e.setupMetaInfo(n.spec.dimensions,n.data);var r=n.settings.log;return n.settings.excludeNull&&this.addFilter({tag:"default",src:"/",predicate:function(t,e){var n=Object.keys(t).reduce(function(e,n){var r=t[n];return r.hasOwnProperty("hasNull")&&!r.hasNull||"measure"!==r.type&&"period"!==r.scale||e.push(n),e},[]);return function(t){var r=!n.some(function(e){return!t.hasOwnProperty(e)||null===t[e]});return r||e(t),r}}(n.spec.dimensions,function(t){return r([t,"point was excluded, because it has undefined values."],"WARN")})}),n},e.setupPeriodData=function(t){var n=e.__api__.tickPeriod,r=t.settings.log;return Object.keys(t.scales).map(function(e){return t.scales[e]}).filter(function(t){return"period"===t.type}).forEach(function(e){n.get(e.period,{utc:t.settings.utcTime})||(r(['Unknown period "'+e.period+'".',"Docs: http://api.taucharts.com/plugins/customticks.html#how-to-add-custom-tick-period"],"WARN"),e.period=null)}),t},e.setupMetaInfo=function(t,e){var n=t||function(t){var e={type:"category",scale:"ordinal"};return t.reduce(function(t,n){return Object.keys(n).forEach(function(r){var i=n.hasOwnProperty(r)?n[r]:null;if(t[r]=t[r]||{type:null,hasNull:!1},null===i)t[r].hasNull=!0;else{var o=function(t,e){var n=e;return Mt(t)?(n.type="measure",n.scale="time"):St(t)?(n.type="order",n.scale="ordinal"):Number.isFinite(t)&&(n.type="measure",n.scale="linear"),n}(i,wt(e)),a=o.type,u=o.scale,c=null!==t[r].type&&t[r].type!==a;t[r].type=c?e.type:a,t[r].scale=c?e.scale:u}}),t},{})}(e);return function(t){var e={category:"ordinal",order:"ordinal",measure:"linear"},n={};return Object.keys(t).forEach(function(r){var i=t[r],o=(i.type||"category").toLowerCase();n[r]=Object.assign({},i,{type:o,scale:i.scale||e[o],value:i.value})}),n}(n)},e.setupSettings=function(t){var n=e.globalSettings,r=Object.keys(n).reduce(function(t,e){return t[e]="function"==typeof n[e]?n[e]:wt(n[e]),t},{}),i=Yt(t||{},r);return Array.isArray(i.specEngine)||(i.specEngine=[{width:Number.MAX_VALUE,name:i.specEngine}]),i},e.prototype.insertToLeftSidebar=function(t){return ce(t,this._layout.leftSidebar)},e.prototype.insertToRightSidebar=function(t){return ce(t,this._layout.rightSidebar)},e.prototype.insertToFooter=function(t){return ce(t,this._layout.footer)},e.prototype.insertToHeader=function(t){return ce(t,this._layout.header)},e.prototype.addBalloon=function(t){return new We("",t||{})},e.prototype.destroyNodes=function(){this._nodes.forEach(function(t){return t.destroy()}),this._nodes=[],this._renderedItems=[]},e.prototype.onUnitDraw=function(t){var e=this;this._nodes.push(t),this.fire("unitdraw",t),["click","mouseover","mouseout"].forEach(function(n){return t.on(n,function(t,r){e.fire("element"+n,{element:t,data:r.data,event:r.event})})})},e.prototype.onUnitsStructureExpanded=function(t){var e=this;this.onUnitsStructureExpandedTransformers.forEach(function(n){return new n(t).transform(e)}),this.fire("unitsstructureexpanded",t)},e.prototype._getClosestElementPerUnit=function(t,e){return this._renderedItems.filter(function(t){return t.getClosestElement}).map(function(n){var r=n.getClosestElement(t,e);return{unit:n.node(),closest:r}})},e.prototype.disablePointerEvents=function(){this._layout.layout.style.pointerEvents="none"},e.prototype.enablePointerEvents=function(){this._layout.layout.style.pointerEvents=""},e.prototype._handlePointerEvent=function(t){var e=this._svg.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i="click"===t.type?"data-click":"data-hover",o=null,a=null,u=null,c=this._getClosestElementPerUnit(n,r),s=c.filter(function(t){return t.closest}).sort(function(t,e){return t.closest.distance===e.closest.distance?t.closest.secondaryDistance-e.closest.secondaryDistance:t.closest.distance-e.closest.distance});if(s.length>0){var l=s.findIndex(function(t){return t.closest.distance!==s[0].closest.distance||t.closest.secondaryDistance!==s[0].closest.secondaryDistance}),f=l<0?s:s.slice(0,l);if(1===f.length)o=f[0].closest.data,a=f[0].closest.node,u=f[0].unit;else{var h=f.reduce(function(t,e){return t+e.closest.x},0)/f.length,d=f.reduce(function(t,e){return t+e.closest.y},0)/f.length,p=Math.atan2(d-r,h-n)+Math.PI,g=Math.round((f.length-1)*p/2/Math.PI),m=f[g].closest;o=m.data,a=m.node,u=f[g].unit}}c.forEach(function(e){return e.unit.fire(i,{event:t,data:o,node:a,unit:u})})},e.prototype._initPointerEvents=function(){var t=this;this._liveSpec.settings.syncPointerEvents||(this._pointerAnimationFrameId=null);var e=Un.select(this._svg),n=this._liveSpec.settings.syncPointerEvents?function(t){return function(){return t(a.event)}}:function(e){return function(){var n=a.event;t._pointerAnimationFrameId&&"mousemove"!==n.type&&t._cancelPointerAnimationFrame(),t._pointerAnimationFrameId||(t._pointerAnimationFrameId=requestAnimationFrame(function(){t._pointerAnimationFrameId=null,e(n)}))}},r=function(e){return t._handlePointerEvent(e)};e.on("mousemove",n(r)),e.on("click",n(r)),e.on("mouseleave",n(function(e){"none"!==window.getComputedStyle(t._svg).pointerEvents&&t.select(function(){return!0}).forEach(function(t){return t.fire("data-hover",{event:e,data:null,node:null,unit:null})})}))},e.prototype._cancelPointerAnimationFrame=function(){cancelAnimationFrame(this._pointerAnimationFrameId),this._pointerAnimationFrameId=null},e.prototype._setupTaskRunner=function(t){var e=this;return this._resetTaskRunner(),this._taskRunner=new Rn({timeout:t.settings.renderingTimeout||Number.MAX_SAFE_INTEGER,syncInterval:t.settings.asyncRendering?t.settings.syncRenderingInterval:Number.MAX_SAFE_INTEGER,callbacks:{done:function(){e._completeRendering(),e._renderingPhase=null},timeout:function(t,n){e._displayTimeoutWarning({timeout:t,proceed:function(){e.disablePointerEvents(),n.setTimeoutDuration(Number.MAX_SAFE_INTEGER),n.run()},cancel:function(){e._cancelRendering()}}),e.enablePointerEvents(),e.fire("renderingtimeout",t)},progress:function(t){var n={spec:0,draw:1}[e._renderingPhase]/2+t/2;e._reportProgress(n)},error:t.settings.handleRenderingErrors?function(n){e._cancelRendering(),e._displayRenderingError(n),e.fire("renderingerror",n),t.settings.log(["An error occured during chart rendering.",'Set "handleRenderingErrors: false" in chart settings to debug.',"Error message: "+n.message].join(" "),"ERROR")}:null}}),this._taskRunner},e.prototype._resetTaskRunner=function(){this._taskRunner&&this._taskRunner.isRunning()&&(this._taskRunner.stop(),this._taskRunner=null)},e.prototype.renderTo=function(t,e){this._resetProgressLayout(),this.disablePointerEvents(),this._insertLayout(t,e);var n=this._createLiveSpec();if(!n)return this._svg=null,this._layout.content.innerHTML=this._emptyContainer,void this.enablePointerEvents();var r=this._createGPL(n),i=this._setupTaskRunner(n);this._scheduleDrawScenario(i,r),this._scheduleDrawing(i,r),i.run()},e.prototype._insertLayout=function(t,e){this._target=t,this._defaultSize=Object.assign({},e);var n=Un.select(t).node();if(null===n)throw new Error("Target element not found");this._layout.layout.parentNode!==n&&n.appendChild(this._layout.layout);var r=this._layout.content,i=se(this._layout.contentContainer);this._layout.contentContainer.style.padding="0 "+i.width+"px "+i.height+"px 0",le(this._layout.rightSidebarContainer,"vertical");var o=Object.assign({},e)||{};if(!o.width||!o.height){var a=r.parentElement,u=a.scrollLeft,c=a.scrollTop;r.style.display="none",o=Yt(o,de(r.parentNode)),r.style.display="",r.parentElement.scrollLeft=u,r.parentElement.scrollTop=c,o.height||(o.height=de(this._layout.layout).height)}this.configGPL.settings.size=o},e.prototype._createLiveSpec=function(){var t=this;return this._liveSpec=wt(Gt(this.configGPL,"plugins")),this._liveSpec.sources=this.getDataSources(),this._liveSpec.settings=this.configGPL.settings,this._experimentalSetupAnimationSpeed(this._liveSpec),this.isEmptySources(this._liveSpec.sources)?null:(this._liveSpec=this.transformers.reduce(function(e,n){return new n(e).transform(t)},this._liveSpec),this.destroyNodes(),this.fire("specready",this._liveSpec),this._liveSpec)},e.prototype._experimentalSetupAnimationSpeed=function(t){t.settings.initialAnimationSpeed=t.settings.initialAnimationSpeed||t.settings.animationSpeed;var e=t.settings.experimentalShouldAnimate(t)?t.settings.initialAnimationSpeed:0;t.settings.animationSpeed=e;var n=function(t){t.guide=t.guide||{},t.guide.animationSpeed=e,t.units&&t.units.forEach(n)};n(t.unit)},e.prototype._createGPL=function(t){var e=new De(t,this.getScaleFactory(),qe,M),n=e.unfoldStructure();return this.onUnitsStructureExpanded(n),e},e.prototype._scheduleDrawScenario=function(t,e){var n=this,r=Un.select(this._layout.content),i=e.config.settings.size;t.addTask(function(){return n._renderingPhase="spec"}),e.getDrawScenarioQueue({allocateRect:function(){return{slot:function(t){return r.selectAll(".uid_"+t)},frameId:"root",left:0,top:0,width:i.width,containerWidth:i.width,height:i.height,containerHeight:i.height}}}).forEach(function(e){return t.addTask(e)})},e.prototype._scheduleDrawing=function(t,e){var n=this,r=e.config.settings.size;t.addTask(function(t){n._renderingPhase="draw",n._renderRoot({scenario:t,newSize:r}),n._cancelPointerAnimationFrame(),n._scheduleRenderScenario(t)})},e.prototype._resetProgressLayout=function(){this._createProgressBar(),this._clearRenderingError(),this._clearTimeoutWarning()},e.prototype._renderRoot=function(t){var e=this,n=t.scenario,r=t.newSize,i=Un.select(this._layout.content),o=n[0].config.uid,a=Hn(i,"svg").attr("width",Math.floor(r.width)).attr("height",Math.floor(r.height));a.attr("class")||a.attr("class",ze+"svg"),this._svg=a.node(),this._initPointerEvents(),this.fire("beforerender",this._svg);var u=a.selectAll("g.frame-root").data([o],function(t){return t});u.enter().append("g").classed(ze+"cell cell frame-root uid_"+o,!0).merge(u).call(function(t){t.classed("tau-active",!0),J(t,e.configGPL.settings.animationSpeed,"frameRootToggle").attr("opacity",1)}),u.exit().call(function(t){t.classed("tau-active",!1),J(t,e.configGPL.settings.animationSpeed,"frameRootToggle").attr("opacity",1e-6).remove()})},e.prototype._scheduleRenderScenario=function(t){var e=this;t.forEach(function(t){e._taskRunner.addTask(function(){t.draw(),e.onUnitDraw(t.node()),e._renderedItems.push(t)})})},e.prototype._completeRendering=function(){le(this._layout.contentContainer),this._layout.rightSidebar.style.maxHeight=this._liveSpec.settings.size.height+"px",this.enablePointerEvents(),this._svg&&this.fire("render",this._svg),le(this._layout.rightSidebarContainer,"vertical")},e.prototype._cancelRendering=function(){this.enablePointerEvents(),this._resetTaskRunner(),this._cancelPointerAnimationFrame()},e.prototype._createProgressBar=function(){var t=Un.select(this._layout.header),e=Hn(t,"div."+ze+"progress");e.select("div."+ze+"progress__value").remove();var n=e.append("div").classed(ze+"progress__value",!0).style("width",0);this._reportProgress=function(t){requestAnimationFrame(function(){e.classed(ze+"progress_active",t<1),n.style("width",100*t+"%")})}},e.prototype._displayRenderingError=function(t){this._layout.layout.classList.add(ze+"layout_rendering-error")},e.prototype._clearRenderingError=function(){this._layout.layout.classList.remove(ze+"layout_rendering-error")},e.prototype.getScaleFactory=function(t){return void 0===t&&(t=null),new Je(Ze.instance(this._liveSpec.settings),t||this._liveSpec.sources,this._liveSpec.scales)},e.prototype.getScaleInfo=function(t,e){return void 0===e&&(e=null),this.getScaleFactory().createScaleInfoByName(t,e)},e.prototype.getSourceFiltersIterator=function(t){var e=this,n=It(Object.keys(this._filtersStore.filters).map(function(t){return e._filtersStore.filters[t]})).filter(function(e){return!t(e)}).map(function(t){return t.predicate});return function(t){return n.reduce(function(e,n){return e&&n(t)},!0)}},e.prototype.getDataSources=function(t){var e=this;void 0===t&&(t={});var n=this._chartDataModel(this._originData);return Object.keys(n).filter(function(t){return"?"!==t}).reduce(function(r,i){var o=n[i],a=e.getSourceFiltersIterator(function(e){return function(n){return t.excludeFilter&&-1!==t.excludeFilter.indexOf(n.tag)||n.src!==e}}(i));return r[i]={dims:o.dims,data:o.data.filter(a)},r},{"?":n["?"]})},e.prototype.isEmptySources=function(t){return!Object.keys(t).filter(function(t){return"?"!==t}).filter(function(e){return t[e].data.length>0}).length},e.prototype.getChartModelData=function(t,e){return void 0===t&&(t={}),void 0===e&&(e="/"),this.getDataSources(t)[e].data},e.prototype.getDataDims=function(t){return void 0===t&&(t="/"),this._originData[t].dims},e.prototype.getData=function(t){return void 0===t&&(t="/"),this._originData[t].data},e.prototype.setData=function(t,e){void 0===e&&(e="/"),this._originData[e].data=t,this.refresh()},e.prototype.getSVG=function(){return this._svg},e.prototype.addFilter=function(t){t.src=t.src||"/";var e=t.tag,n=this._filtersStore.filters[e]=this._filtersStore.filters[e]||[],r=this._filtersStore.tick++;return t.id=r,n.push(t),r},e.prototype.removeFilter=function(t){var e=this;return Object.keys(this._filtersStore.filters).map(function(n){e._filtersStore.filters[n]=e._filtersStore.filters[n].filter(function(e){return e.id!==t})}),this},e.prototype.refresh=function(){this._target&&this.renderTo(this._target,this._defaultSize)},e.prototype.resize=function(t){void 0===t&&(t={}),this.renderTo(this._target,t)},e.prototype.select=function(t){return this._nodes.filter(t)},e.prototype.traverseSpec=function(t,e){var n=function(t,e,r,i){e(t,r,i),t.frames?t.frames.forEach(function(r){(r.units||[]).map(function(i){return n(i,e,t,r)})}):(t.units||[]).map(function(r){return n(r,e,t,null)})};n(t.unit,e,null,null)},e.prototype.getSpec=function(){return this._liveSpec},e.prototype.getLayout=function(){return this._layout},e.prototype._displayTimeoutWarning=function(t){var e=this,n=t.proceed,r=t.cancel,i=t.timeout,o=Math.round(100/3/1.5),a=function(t){return Math.round(100/3/1.5*t)};this._layout.content.style.height="100%",this._layout.content.insertAdjacentHTML("beforeend",'\n            <div class="'+ze+'rendering-timeout-warning">\n            <svg\n                viewBox="0 0 200 100">\n                <text\n                    text-anchor="middle"\n                    font-size="'+o+'">\n                    <tspan x="100" y="'+a(1)+'">Rendering took more than '+Math.round(i)/1e3+'s</tspan>\n                    <tspan x="100" y="'+a(2)+'">Would you like to continue?</tspan>\n                </text>\n                <text\n                    class="'+ze+'rendering-timeout-continue-btn"\n                    text-anchor="end"\n                    font-size="'+o+'"\n                    cursor="pointer"\n                    text-decoration="underline"\n                    x="'+(100-o/3)+'"\n                    y="'+a(3)+'">\n                    Continue\n                </text>\n                <text\n                    class="'+ze+'rendering-timeout-cancel-btn"\n                    text-anchor="start"\n                    font-size="'+o+'"\n                    cursor="pointer"\n                    text-decoration="underline"\n                    x="'+(100+o/3)+'"\n                    y="'+a(3)+'">\n                    Cancel\n                </text>\n            </svg>\n            </div>\n        '),this._layout.content.querySelector("."+ze+"rendering-timeout-continue-btn").addEventListener("click",function(){e._clearTimeoutWarning(),n.call(e)}),this._layout.content.querySelector("."+ze+"rendering-timeout-cancel-btn").addEventListener("click",function(){e._clearTimeoutWarning(),r.call(e)})},e.prototype._clearTimeoutWarning=function(){var t=Bn(this._layout.content,"."+ze+"rendering-timeout-warning");t&&(this._layout.content.removeChild(t),this._layout.content.style.height="")},e}(d),Yn={},Gn={},Xn=function(t){var e="Chart type "+t+" is not supported.";throw console.log(e),console.log("Use one of "+Object.keys(Yn).join(", ")+"."),new _(e,x.NOT_SUPPORTED_TYPE_CHART)},qn={validate:function(t,e){return Gn.hasOwnProperty(t)||Xn(t),Gn[t].reduce(function(t,n){return t.concat(n(e)||[])},[])},get:function(t){var e=Yn[t];return"function"!=typeof e&&Xn(t),e},add:function(t,e,n){return void 0===n&&(n=[]),Yn[t]=e,Gn[t]=n,qn},getAllRegisteredTypes:function(){return Yn}},Vn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$n=function(t){function e(n){var r=t.call(this,n)||this;return n.autoResize&&e.winAware.push(r),r}return Vn(e,t),e.prototype.applyConfig=function(e){var n=qn.validate(e.type,e);if(n.length>0)throw new Error(n[0]);var r=qn.get(e.type);(e=Yt(e,{autoResize:!0})).settings=Wn.setupSettings(e.settings),e.dimensions=Wn.setupMetaInfo(e.dimensions,e.data),t.prototype.applyConfig.call(this,r(e))},e.prototype.destroy=function(){var n=e.winAware.indexOf(this);-1!==n&&e.winAware.splice(n,1),t.prototype.destroy.call(this)},e}(Wn);function Zn(t){return t}$n.winAware=[],$n.resizeOnWindowEvent=function(){var t;function e(){t=0;for(var e=0,n=$n.winAware.length;e<n;e++)$n.winAware[e].resize()}return function(){!t&&$n.winAware.length&&(t=window.requestAnimationFrame(e))}}(),window.addEventListener("resize",$n.resizeOnWindowEvent);var Jn=1e-6;function Qn(t){return"translate("+(t+.5)+",0)"}function Kn(t){return"translate(0,"+(t+.5)+")"}var tr={top:1,right:2,bottom:3,left:4};function er(t){var e=tr[t.scaleGuide.scaleOrient],n=t.scale,r=t.scaleGuide,i=r.label,o=Yt(t,{tickSize:6,tickPadding:3,gridOnly:!1}),a=o.ticksCount,u=o.tickFormat,c=o.tickSize,s=o.tickPadding,l=o.gridOnly,f="linear"===n.scaleType,h="ordinal"===n.scaleType||"period"===n.scaleType,d=e===tr.top||e===tr.bottom,p=e===tr.top||e===tr.left?-1:1,g=d?"x":"y",m=d?"y":"x",y=d?Qn:Kn,v=d?1:-1;return function(o){var b;if(n.ticks){b=n.ticks(a);for(var _=Math.floor(1.25*a);b.length>_&&_>2&&b.length>2;)b=n.ticks(--_)}else b=n.domain();r.hideTicks&&(b=l?b.filter(function(t){return 0==t}):[]);var x=null==u?n.tickFormat?n.tickFormat(a):Zn:u,w=Math.max(c,0)+s,M=n.range(),S=M[0]+.5,T=M[M.length-1]+.5,E=(n.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}:Zn)(n);if(r.facetAxis){var k=E;E=function(t){return k(t)-n.stepSize(t)/2}}var A,O=o.selection?o:null,C=O?O.selection():o;function N(t){var n=zt(r.rotate);if(t.attr("transform",Se(n)),Math.abs(n/90)%2>0){var i=n<180?1:-1,o=d?.5:-2,a=e===tr.top||e===tr.left?-1:1,u=o*(e===tr.top||e===tr.bottom?a<0?0:.71:.32);t.attr("x",9*i).attr("y",0).attr("dx",d?null:u+"em").attr("dy",u+"em")}}function j(t){!function(t,e){var n=e?-10:20,r=e?0:1,i=e?1:-1,o=[];t.each(function(){var t=q.select(this),e=t.attr("transform").replace("translate(","").replace(" ",",").split(",")[r],n=i*parseFloat(e),a=t.select("text"),u=a.node().getBBox().width/2,c=n-u,s=n+u;o.push({c:n,s:c,e:s,l:0,textRef:a,tickRef:t})});var a,u=o.sort(function(t,e){return t.c-e.c});a=function(t,r,i){var o,a,u,c=t.e>r.s,s=i.s<r.e;if(c||s){r.l=(o=t.l,a={"[T][1]":-1,"[T][-1]":0,"[T][0]":1,"[F][0]":-1},u="["+c.toString().toUpperCase().charAt(0)+"]["+o+"]",a.hasOwnProperty(u)?a[u]:0);var l=r.textRef.size(),f=r.textRef.text();l>1&&(f=f.replace(/([\.]*$)/gi,"")+"...");var h=11*r.l,d=parseFloat(r.textRef.attr("y"))+h,p=e?0:h,g=e?h:0,m=function(t){var e=0;if(!t)return e;var n=t.indexOf("rotate(");if(n>=0){var r=t.indexOf(")",n+7),i=t.substring(n+7,r);e=parseFloat(i.trim())}return e}(r.textRef.attr("transform"));r.textRef.text(function(t,e){return 0===e?f:""}).attr("transform","translate("+p+","+g+") rotate("+m+")");var y={x1:0,x2:0,y1:d+(e?-1:5),y2:n};e||(y.transform="rotate(-90)"),ye(r.tickRef,"line.label-ref").call(ot(y))}else r.tickRef.selectAll("line.label-ref").remove();return r},u.map(function(t,e,n){return a(n[e-1]||{e:-1/0,s:-1/0,l:0},t,n[e+1]||{e:1/0,s:1/0,l:0})})}(t,d)}C.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===tr.right?"start":e===tr.left?"end":"middle"),l||(A=r.hideTicks||r.hide?[]:[null],ne(C.selectAll(".domain").data(A)).then(function(t){return O&&t.exit().transition(O).attr("opacity",0).remove(),t.merge(t.enter().insert("path",".tick").attr("class","domain").attr("opacity",1).attr("stroke","#000"))}).then(function(t){return O?t.transition(O):t}).then(function(t){t.attr("d",e===tr.left||e==tr.right?"M"+p*c+","+S+"H0.5V"+T+"H"+p*c:"M"+S+","+p*c+"V0.5H"+T+"V"+p*c)}));var P=ne(C.selectAll(".tick").data(b,function(t){return String(n(t))}).order()).then(function(t){var e=t.exit(),n=t.enter().append("g").attr("class","tick");return{tickExit:e,tickEnter:n,tick:t.merge(n)}}).then(function(t){if(f){var e=n.ticks(),r=n.domain(),i=b.length-1,o=e.length>1&&r[0]*r[1]<0&&-r[0]>(e[1]-e[0])/2&&r[1]>(e[i]-e[i-1])/2;t.tick.classed("zero-tick",function(t){return 0==t&&o})}return t}).result();!function(t){ne(t).then(function(t){var e=t.tickEnter,n=t.tickExit,r=t.tick;return O?(e.attr("opacity",Jn).attr("transform",function(t){var e=E(t);return y(e)}),{tick:r.transition(O),tickExit:n.transition(O).attr("opacity",Jn).attr("transform",function(t){var e=E(t);return isFinite(e)?y(e):this.getAttribute("transform")})}):{tick:r,tickExit:n}}).then(function(t){var e=t.tick;t.tickExit.remove(),e.attr("opacity",1).attr("transform",function(t){return y(E(t))})})}(P),r.facetAxis||function(t){var e=p*c,r=h?function(t){return v*n.stepSize(t)/2}:null;ne(t).then(function(t){var n=t.tick,i=t.tickEnter,o=n.select("line"),a=i.append("line").attr("stroke","#000").attr(m+"2",e);return h&&a.attr(g+"1",r).attr(g+"2",r),o.merge(a)}).then(function(t){return O?t.transition(O):t}).then(function(t){t.attr(m+"2",e),h&&t.attr(g+"1",r).attr(g+"2",r)})}(P),h&&l&&h&&b&&b.length&&ne(C.selectAll(".extra-tick-line").data([null])).then(function(t){return t.merge(t.enter().insert("line",".tick").attr("class","extra-tick-line").attr("stroke","#000"))}).then(function(t){return O?t.transition(O):t}).then(function(t){t.attr(g+"1",S).attr(g+"2",S).attr(m+"1",0).attr(m+"2",p*c)}),l||(function(i){var o=r.textAnchor,a=p*w,u=e===tr.top?"0em":e===tr.bottom?"0.71em":"0.32em";function c(e){if(r.facetAxis)return e.attr("dx",18-t.position[0]).attr("dy",16)}ne(i).then(function(t){var e=t.tick,n=t.tickEnter,r=e.select("text"),i=n.append("text").attr("fill","#000").attr(m,a).attr("dy",u);return N(i),c(i),r.merge(i)}).then(function(t){return t.text(x).attr("text-anchor",o),function(t){var e=function(t){return Math.max(n.stepSize(t),r.tickFormatWordWrapLimit)};r.tickFormatWordWrap?Z(t,e,r.tickFormatWordWrapLines,r.tickFontHeight,!d):$(t,e)}(t),d&&"time"===n.scaleType&&function(t){if(!(b.length<2)){var e=0,n=-1,r=t.nodes();r.forEach(function(t,r){var i=t.textContent||"",o=i.length;o>e&&(e=o,n=r)});var i=E(b[1])-E(b[0]),o=!1;if(n>=0){var a=r[n].getBoundingClientRect();o=i-a.width<8}C.classed(ze+"time-axis-overflow",o)}}(t),!d||"time"!==n.scaleType&&"linear"!==n.scaleType||function(t){if(0!==b.length){for(var e=b[0],n=b[b.length-1],r=C.node();r&&"svg"!==r.tagName;)r=r.parentNode;var i=r.getBoundingClientRect(),o=C.append("line").attr("x1",E(e)).attr("x2",E(e)).attr("y1",0).attr("y2",1),a=C.append("line").attr("x1",E(n)).attr("x2",E(n)).attr("y1",0).attr("y2",1),u={left:o.node().getBoundingClientRect().left-i.left,right:i.right-a.node().getBoundingClientRect().right};o.remove(),a.remove();var c=function(t,e,n){var r=t.getBoundingClientRect(),i=e>0?"right":"left",o=(E(n),u[i]),a=Math.ceil(r.width/2-o+1);t.setAttribute("dx",String(a>0?-e*a:0))},s=t.filter(function(t){return t===e}).node(),l=t.filter(function(t){return t===n}).node();t.attr("dx",null),c(s,-1,e),c(l,1,n)}}(t),t}).then(function(t){return O?t.transition(O):t}).then(function(t){t.attr(m,a),N(t),c(t),h&&r.avoidCollisions&&(O?O.on("end.fixTickTextCollision",function(){return j(i.tick)}):j(i.tick))})}(P),i.hide||function(){var t=i,e=ye(C,"text.label").attr("class",xe("label",t.cssClass)).attr("transform",Se(t.rotate)).attr("text-anchor",t.textAnchor);ne(e).then(function(t){return O?t.transition(O):t}).then(function(e){var n=v*t.padding,r=Math.abs(T-S),i=d?r:0;e.attr("x",i).attr("y",n).attr("text-anchor","end")});for(var n=t.text.split("  "),r=n.length-1;r>0;r--)n.splice(r,0,"  ");e.selectAll("tspan").data(n).enter().append("tspan").attr("class",function(t,e){return e%2?"label-token-delimiter label-token-delimiter-"+e:"label-token label-token-"+e}).text(function(t){return t}).exit().remove()}())}}function nr(t){return er({scale:t.scale,scaleGuide:t.scaleGuide,ticksCount:t.ticksCount,tickSize:t.tickSize,gridOnly:!0,position:t.position})}var rr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ir=ye,or=function(t){var e=t<=20?1:.75;return Math.max(2,Math.round(t*e))},ar=function(t){function e(e){var n=t.call(this,e)||this;n.config=e,n.config.guide=Yt(n.config.guide||{},{showGridLines:"xy",padding:{l:50,r:0,t:0,b:50}}),n.config.guide.x=n.config.guide.x||{},n.config.guide.x=Yt(n.config.guide.x,{cssClass:"x axis",textAnchor:"middle",padding:10,hide:!1,scaleOrient:"bottom",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100}),"string"==typeof n.config.guide.x.label&&(n.config.guide.x.label={text:n.config.guide.x.label}),n.config.guide.x.label=Yt(n.config.guide.x.label,{text:"X",rotate:0,padding:40,textAnchor:"middle"}),n.config.guide.y=n.config.guide.y||{},n.config.guide.y=Yt(n.config.guide.y,{cssClass:"y axis",textAnchor:"start",padding:10,hide:!1,scaleOrient:"left",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100}),"string"==typeof n.config.guide.y.label&&(n.config.guide.y.label={text:n.config.guide.y.label}),n.config.guide.y.label=Yt(n.config.guide.y.label,{text:"Y",rotate:-90,padding:20,textAnchor:"middle"});var r=n.config,i=r.guide;if("extract-axes"===i.autoLayout){var o=r.options.containerHeight-(r.options.top+r.options.height);i.x.hide=i.x.hide||Math.floor(o)>0,i.y.hide=i.y.hide||Math.floor(r.options.left)>0}var a=n.config.options,u=n.config.guide.padding;return n.L=a.left+u.l,n.T=a.top+u.t,n.W=a.width-(u.l+u.r),n.H=a.height-(u.t+u.b),n}return rr(e,t),e.prototype.defineGrammarModel=function(t){var e=this.W,n=this.H;return this.xScale=t("pos",this.config.x,[0,e]),this.yScale=t("pos",this.config.y,function(t){return["ordinal","period"].indexOf(t.type)>=0?[0,n]:[n,0]}),this.regScale("x",this.xScale).regScale("y",this.yScale),{scaleX:this.xScale,scaleY:this.yScale,xi:function(){return e/2},yi:function(){return n/2},sizeX:function(){return e},sizeY:function(){return n}}},e.prototype.getGrammarRules=function(){return[function(t){var e=t.scaleX,n=t.scaleY;return{xi:function(n){return n?e(n[e.dim]):t.xi(n)},yi:function(e){return e?n(e[n.dim]):t.yi(e)},sizeX:function(n){return n?e.stepSize(n[e.dim]):t.sizeX(n)},sizeY:function(e){return e?n.stepSize(e[n.dim]):t.sizeY(e)}}}]},e.prototype.createScreenModel=function(t){return t},e.prototype.allocateRect=function(t){var e=this,n=this.screenModel;return{slot:function(t){return e.config.options.container.selectAll(".uid_"+t)},left:n.xi(t)-n.sizeX(t)/2,top:n.yi(t)-n.sizeY(t)/2,width:n.sizeX(t),height:n.sizeY(t),containerWidth:this.W,containerHeight:this.H}},e.prototype.drawFrames=function(t){var e=Object.assign({},this.config),n=e.options,r=this.W,i=this.H;if(e.x=this.xScale,e.y=this.yScale,e.x.scaleObj=this.xScale,e.y.scaleObj=this.yScale,e.x.guide=e.guide.x,e.y.guide=e.guide.y,e.x.guide.label.size=r,e.y.guide.label.size=i,(n.container.attr("transform")?J(n.container,this.config.guide.animationSpeed,"cartesianContainerTransform"):n.container).attr("transform",Me(this.L,this.T)),e.x.guide.hide)this._removeDimAxis(n.container,e.x);else{var o="top"===e.x.guide.scaleOrient?[0,0-e.guide.x.padding]:[0,i+e.guide.x.padding];this._drawDimAxis(n.container,e.x,o,r)}if(e.y.guide.hide)this._removeDimAxis(n.container,e.y);else{var a="right"===e.y.guide.scaleOrient?[r+e.guide.y.padding,0]:[0-e.guide.y.padding,0];this._drawDimAxis(n.container,e.y,a,i)}var u=t.reduce(function(t,e){return t.concat((e.units||[]).map(function(t){return t.uid}))},[]),c=this._drawGrid(n.container,e,r,i,n),s=rt(c,".cell").data(u,function(t){return t});s.enter().append("g").attr("class",function(t){return ze+"cell cell uid_"+t}).merge(s).classed("tau-active",!0),J(s,this.config.guide.animationSpeed).attr("opacity",1),J(s.exit().classed("tau-active",!1),this.config.guide.animationSpeed).attr("opacity",1e-6).remove()},e.prototype._drawDimAxis=function(t,e,n,r){var i=hn.get(e.guide.tickFormat,e.guide.tickFormatNullAlias),a=er({scale:e.scaleObj,scaleGuide:e.guide,ticksCount:i?or(r/e.guide.density):null,tickFormat:i||null,position:n}),u=this.config.guide.animationSpeed;ir(t,this._getAxisSelector(e)).classed("tau-active",!0).classed(e.guide.cssClass,!0).call(function(t){var e=J(t,u,"axisTransition"),r=t.attr("transform");Me.apply(o,n)!==r&&(r?e:t).attr("transform",Me.apply(o,n)),e.call(a),e.attr("opacity",1)})},e.prototype._removeDimAxis=function(t,e){var n=rt(t,this._getAxisSelector(e)).classed("tau-active",!1);J(n,this.config.guide.animationSpeed,"axisTransition").attr("opacity",1e-6).remove()},e.prototype._getAxisSelector=function(t){return"g."+("h"===Te(t.guide.scaleOrient)?"x":"y")+".axis"},e.prototype._drawGrid=function(t,e,n,r){var i=this;return ir(t,"g.grid").attr("transform",Me(0,0)).call(function(t){var o=t,a=i.config.guide.animationSpeed,u=(e.guide.showGridLines||"").toLowerCase();if(u.length>0){var c=ir(o,"g.grid-lines");if(u.indexOf("x")>-1){var s=e.x,l=hn.get(s.guide.tickFormat),f=nr({scale:s.scaleObj,scaleGuide:s.guide,tickSize:r,ticksCount:l?or(n/s.guide.density):null}),h=ir(c,"g.grid-lines-x");J(h,a).call(f)}if(u.indexOf("y")>-1){var d=e.y,p=(l=hn.get(d.guide.tickFormat),nr({scale:d.scaleObj,scaleGuide:d.guide,tickSize:-n,ticksCount:l?or(r/d.guide.density):null})),g=ir(c,"g.grid-lines-y");J(g,a).call(p)}}})},e}(g),ur=n(16),cr=n(7),sr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lr=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},ur,cr,a),fr=function(t){function e(e){var n=t.call(this,e)||this;n.config=e,n.config.guide=Yt(n.config.guide||{},{padding:{l:50,r:50,t:50,b:50},enableBrushing:!1}),n.columnsBrushes={},n.columnsSelections={},n.on("force-brush",function(t,e){return n._forceBrushing(e)});var r=n.config.options,i=n.config.guide.padding;return n.L=r.left+i.l,n.T=r.top+i.t,n.W=r.width-(i.l+i.r),n.H=r.height-(i.t+i.b),n}return sr(e,t),e.prototype.defineGrammarModel=function(t){var e=this.config,n=this.W,r=this.H;this.columnsScalesMap=e.columns.reduce(function(e,n){return e[n]=t("pos",n,[0,r]),e},{});var i=n/(e.columns.length-1),o=e.columns.reduce(function(t,e,n){return t[e]=n*i,t},{});return this.xBase=function(t){return o[t]},this.regScale("columns",this.columnsScalesMap),{}},e.prototype.allocateRect=function(){var t=this;return{slot:function(e){return t.config.options.container.selectAll(".uid_"+e)},left:0,top:0,width:this.W,height:this.H,containerWidth:this.W,containerHeight:this.H}},e.prototype.drawFrames=function(t){var e=this,n=Object.assign({},this.config),r=n.options,i=this._fnDrawGrid(r.container,n,r.frameId,Object.keys(this.columnsScalesMap).reduce(function(t,n){return t.concat([e.columnsScalesMap[n].getHash()])},[]).join("_")),o=i.selectAll(".parent-frame-"+r.frameId).data(t,function(t){return t.hash()});o.exit().remove(),o.enter().append("g").attr("class",function(t){return ze+"cell cell parent-frame-"+r.frameId+" frame-"+t.hash()}).merge(o).each(function(t){var e,n,i,o;e=r.frameId,n=lr.select(this),i=t,(o=n.selectAll(".layer_"+e).data(i.units,function(t){return t.uid})).exit().remove(),o.enter().append("g").attr("class",function(t){return"layer_"+e+" uid_"+t.uid})});var a=this._fnDrawColumns(i,n);n.guide.enableBrushing&&this._enableBrushing(a)},e.prototype._fnDrawGrid=function(t,e,n,r){var i=t.selectAll(".grid_"+n).data([r],function(t){return t});return i.exit().remove(),i.enter().append("g").attr("class","grid grid_"+n).attr("transform",Me(this.L,this.T)).merge(i)},e.prototype._fnDrawColumns=function(t,e){var n=e.guide.columns||{},r=this.xBase,i=this.columnsScalesMap,o=lr.axisLeft(),a=t.selectAll(".column").data(e.columns,function(t){return t});return a.exit().remove(),a.enter().append("g").attr("class","column").attr("transform",function(t){return Me(r(t),0)}).call(function(t){t.append("g").attr("class","y axis").each(function(t){var e=i[t].dim,r=o.scale(i[t]),a=n[e]||{},u=hn.get(a.tickFormat,a.tickFormatNullAlias);null!==u&&r.tickFormat(u),lr.select(this).call(r)}).append("text").attr("class","label").attr("text-anchor","middle").attr("y",-9).text(function(t){return((n[t]||{}).label||{}).text||i[t].dim})}).merge(a)},e.prototype._enableBrushing=function(t){var e=this,n=this.columnsSelections,r=this.columnsScalesMap,i=this.columnsBrushes,o=!0,u=function(t){return t},c=function(t){return t},s=function(){var t=Object.keys(i).find(function(t){return i[t]===a.event.target});if(n[t]=a.event.selection,o){var u=Object.keys(i).filter(function(t){return n[t]}).map(function(t){var e=[];if(r[t].discrete){var i=n[t];e=r[t].domain().filter(function(e){var n=r[t](e);return i[0]<=n&&i[1]>=n})}else{var o=n[t].map(r[t].invert);e=[o[0],o[1]]}return{dim:r[t].dim,func:r[t].discrete?"inset":"between",args:e}});e.fire("brush",u)}};return t.selectAll(".brush").remove(),t.append("g").attr("class","brush").each(function(t){var e=r[t].range();i[t]=lr.brushY().extent([[0,e[0]],[16,e[1]]]).on("start",u).on("brush",s).on("end",c),lr.select(this).classed("brush-"+Ot(t),!0).call(i[t]),o=!1,i[t].move(lr.select(this),e),o=!0}).selectAll("rect").attr("transform","translate(-8,0)").attr("width",16),t},e.prototype._forceBrushing=function(t){void 0===t&&(t={});var e=this.columnsBrushes,n=this.columnsScalesMap;this.columnsSelections,Object.keys(t).filter(function(r){return e[r]&&n[r]&&t[r]}).forEach(function(r){var i=t[r],o=[];if(n[r].discrete){var a=i.map(n[r]).filter(function(t){return t>=0}),u=n[r].stepSize()/2;o=[Math.min.apply(Math,a)-u,Math.max.apply(Math,a)+u]}else o=[i[0],i[1]];var c=Ot(r);e[r](lr.select(".brush-"+c)),e[r].move(lr.select(".brush-"+c),o.map(n[r]))})},e}(g),hr=n(15),dr=n(14),pr=n(4),gr=function(){var t,e=[],n=[],r=1,i=1,o={},a=!1,u=function(t){var r=e.length,i=0,o=e[t].x-n[t].x,a=n[t].y-e[t].y,u=Math.sqrt(o*o+a*a);u>0&&(i+=.2*u),a/=u,i+=(o/=u)>0&&a>0?0:o<0&&a>0?3:o<0&&a<0?6:9;for(var c,s,f,h,d=e[t].x,p=e[t].y-e[t].height+2,g=e[t].x+e[t].width,m=e[t].y+2,y=0;y<r;y++)y!=t&&(l(n[t].x,e[t].x,n[y].x,e[y].x,n[t].y,e[t].y,n[y].y,e[y].y)&&(i+=1),c=e[y].x,f=e[y].y-e[y].height+2,s=e[y].x+e[y].width,h=e[y].y+2,i+=Math.max(0,Math.min(s,g)-Math.max(c,d))*Math.max(0,Math.min(h,m)-Math.max(f,p))*30),c=n[y].x-n[y].r,f=n[y].y-n[y].r,s=n[y].x+n[y].r,h=n[y].y+n[y].r,i+=Math.max(0,Math.min(s,g)-Math.max(c,d))*Math.max(0,Math.min(h,m)-Math.max(f,p))*30;return i},c=function(o){var c,s=Math.floor(Math.random()*e.length),l=e[s].x,f=e[s].y;c=a?t(s,e,n):u(s),e[s].x+=5*(Math.random()-.5),e[s].y+=5*(Math.random()-.5),e[s].x>r&&(e[s].x=l),e[s].x<0&&(e[s].x=l),e[s].y>i&&(e[s].y=f),e[s].y<0&&(e[s].y=f);var h=(a?t(s,e,n):u(s))-c;Math.random()<Math.exp(-h/o)||(e[s].x=l,e[s].y=f)},s=function(o){var c,s=Math.floor(Math.random()*e.length),l=e[s].x,f=e[s].y;c=a?t(s,e,n):u(s);var h=.5*(Math.random()-.5),d=Math.sin(h),p=Math.cos(h);e[s].x-=n[s].x,e[s].y-=n[s].y;var g=e[s].x*p-e[s].y*d,m=e[s].x*d+e[s].y*p;e[s].x=g+n[s].x,e[s].y=m+n[s].y,e[s].x>r&&(e[s].x=l),e[s].x<0&&(e[s].x=l),e[s].y>i&&(e[s].y=f),e[s].y<0&&(e[s].y=f);var y=(a?t(s,e,n):u(s))-c;Math.random()<Math.exp(-y/o)||(e[s].x=l,e[s].y=f)},l=function(t,e,n,r,i,o,a,u){var c,s,l;return s=((e-t)*(i-a)-(o-i)*(t-n))/(l=(u-a)*(e-t)-(r-n)*(o-i)),!((c=((r-n)*(i-a)-(u-a)*(t-n))/l)<0||c>1||s<0||s>1)},f=function(t,e,n){return t-e/n};return o.start=function(t){for(var n=e.length,r=1,i=0;i<t;i++){for(var o=0;o<n;o++)Math.random()<.5?c(r):s(r);r=f(r,1,t)}},o.width=function(t){return arguments.length?(r=t,o):r},o.height=function(t){return arguments.length?(i=t,o):i},o.label=function(t){return arguments.length?(e=t,o):e},o.anchor=function(t){return arguments.length?(n=t,o):n},o.alt_energy=function(e){return arguments.length?(t=e,a=!0,o):u},o.alt_schedule=function(){return arguments.length?o:f},o},mr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yr=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},u,hr,dr,a),vr=["land","continents","georegions","countries","regions","subunits","states","counties"],br=function(t){function e(e){var n=t.call(this,e)||this;return n.config=e,n.config.guide=Yt(n.config.guide||{},{defaultFill:"rgba(128,128,128,0.25)",padding:{l:0,r:0,t:0,b:0},showNames:!0}),n.contourToFill=null,n.on("highlight-area",function(t,e){return n._highlightArea(e)}),n.on("highlight-point",function(t,e){return n._highlightPoint(e)}),n.on("highlight",function(t,e){return n._highlightPoint(e)}),n}return mr(e,t),e.prototype.defineGrammarModel=function(t){var e=this.config,n=e.options,r=e.guide.padding,i=n.width-(r.l+r.r),o=n.height-(r.t+r.b);return this.latScale=t("pos",e.latitude,[0,o]),this.lonScale=t("pos",e.longitude,[i,0]),this.sizeScale=t("size",e.size),this.colorScale=t("color",e.color),this.codeScale=t("value",e.code),this.fillScale=t("fill",e.fill),this.W=i,this.H=o,this.regScale("latitude",this.latScale).regScale("longitude",this.lonScale).regScale("size",this.sizeScale).regScale("color",this.colorScale).regScale("code",this.codeScale).regScale("fill",this.fillScale),{}},e.prototype.drawFrames=function(t){var e=this,n=this.config.guide;"string"==typeof n.sourcemap?yr.json(n.sourcemap,function(n,r){if(n)throw n;e._drawMap(t,r)}):this._drawMap(t,n.sourcemap)},e.prototype._calcLabels=function(t,e,n){var r=this.W,i=this.H,o={};return e.forEach(function(e){var a=(pr.feature(t,t.objects[e]).features||[]).map(function(t){var i=t.properties||{},o=n.centroid(t),a=n.bounds(t),u=o[0],c=o[1],s=a[1][0]-a[0][0],l=i.name||"",f=i.abbr||l,h=s<5.5*l.length?f:l,d=s<13.75,p=d?r-u-16.5:0;return{id:e+"-"+t.id,sx:u,sy:c,x:u+p,y:c,width:5.5*h.length,height:10,name:h,r:p,isRef:d}}).filter(function(t){return!Number.isNaN(t.x)&&!Number.isNaN(t.y)}),u=a.map(function(t){return{x:t.sx,y:t.sy,r:t.r}});gr().label(a).anchor(u).width(r).height(i).start(10),a.filter(function(t){return!t.isRef}).map(function(t){return t.x=t.sx,t.y=t.sy,t}).reduce(function(t,e){return t[e.id]=e,t},o);var c=a.filter(function(t){return t.isRef});c.length<6&&c.reduce(function(t,e){return t[e.id]=e,t},o)}),o},e.prototype._drawMap=function(t,e){var n,r,i=this,o=this,u=this.config.guide,c=this.config.options,s=this.config.options.container,l=this.latScale,f=this.lonScale,h=this.sizeScale,d=this.colorScale,p=this.codeScale,g=this.fillScale,m=this.W,y=this.H,v=vr.filter(function(t){return(e.objects||{}).hasOwnProperty(t)});if(0===v.length)throw new Error("Invalid map: should contain some contours");if(g.dim){if(!p.georole)throw console.log("Specify [georole] for code scale"),new Error("[georole] is missing");if(-1===v.indexOf(p.georole))throw console.log('There is no contour for georole "'+p.georole+'"'),console.log("Available contours are: "+v.join(" | ")),new Error("Invalid [georole]");n=p.georole}else n=v[v.length-1];if(this.contourToFill=n,l.dim&&f.dim){var b=yr.extent(l.domain()),_=yr.extent(f.domain());r=[(_[1]+_[0])/2,(b[1]+b[0])/2]}var x=this._createProjection(e,v[0],r),w=yr.geoPath().projection(x),M=s.selectAll(".map-container").data([""+m+y+r+v.join("-")],function(t){return t});M.exit().remove();var S=M.enter().append("g").call(function(t){var n=t;n.attr("class","map-container");var r={},i=v.reduceRight(function(t,e){return t.concat(e)},[]);if(u.showNames&&(r=o._calcLabels(e,i,w)),i.forEach(function(t,i){var o=function(e){return r[t+"-"+e.id]};n.selectAll(".map-contour-"+t).data(pr.feature(e,e.objects[t]).features||[]).enter().append("g").call(function(e){var n=e;n.attr("class","map-contour-"+t+" map-contour-level map-contour-level-"+i).attr("fill","none"),n.append("title").text(function(t){return(t.properties||{}).name}),n.append("path").attr("d",w),n.append("text").attr("class","place-label-"+t).attr("transform",function(t){var e=o(t);return e?"translate("+[e.x,e.y]+")":""}).text(function(t){var e=o(t);return e?e.name:""}),n.append("line").attr("class","place-label-link-"+t).attr("stroke","gray").attr("stroke-width",.25).attr("x1",function(t){var e=o(t);return e&&e.isRef?e.sx:0}).attr("y1",function(t){var e=o(t);return e&&e.isRef?e.sy:0}).attr("x2",function(t){var e=o(t);return e&&e.isRef?e.x-.6*e.name.length*5.5:0}).attr("y2",function(t){var e=o(t);return e&&e.isRef?e.y-3.5:0})})}),e.objects.hasOwnProperty("places")){var a=pr.feature(e,e.objects.places),c=a.features.map(function(t){var e=x(t.geometry.coordinates);return{x:e[0]+3.5,y:e[1]+3.5,width:5.5*t.properties.name.length,height:12,name:t.properties.name}}),s=a.features.map(function(t){var e=x(t.geometry.coordinates);return{x:e[0],y:e[1],r:2.5}});gr().label(c).anchor(s).width(m).height(y).start(100),n.selectAll(".place").data(s).enter().append("circle").attr("class","place").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).attr("r",function(t){return t.r+"px"}),n.selectAll(".place-label").data(c).enter().append("text").attr("class","place-label").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).text(function(t){return t.name})}}).merge(M);this.groupByCode=t.reduce(function(t,e){return e.part().reduce(function(t,e){return t[(e[p.dim]||"").toLowerCase()]=e,t},t)},{});var T=this._resolveFeature.bind(this);if(S.selectAll(".map-contour-"+n).data(pr.feature(e,e.objects[n]).features).call(function(t){t.classed("map-contour",!0).attr("fill",function(t){var e=T(t);return null===e?u.defaultFill:g(e[g.dim])})}).on("mouseover",function(t){return i.fire("area-mouseover",{data:T(t),event:a.event})}).on("mouseout",function(t){return i.fire("area-mouseout",{data:T(t),event:a.event})}).on("click",function(t){return i.fire("area-click",{data:T(t),event:a.event})}),!l.dim||!f.dim)return[];var E=function(t){return t.attr("r",function(t){return h(t[h.dim])}).attr("transform",function(t){var e=t.data;return"translate("+x([e[f.dim],e[l.dim]])+")"}).attr("class",function(t){var e=t.data;return d(e[d.dim])}).attr("opacity",.5).on("mouseover",function(t){var e=t.data;return o.fire("point-mouseover",{data:e,event:a.event})}).on("mouseout",function(t){var e=t.data;return o.fire("point-mouseout",{data:e,event:a.event})}).on("click",function(t){var e=t.data;return o.fire("point-click",{data:e,event:a.event})})},k=S.selectAll(".frame").data(t.map(function(t){return{tags:t.key||{},hash:t.hash(),data:t.part()}}),function(t){return t.hash});return k.exit().remove(),k.enter().append("g").merge(k).call(function(t){t.attr("class",function(t){return"frame frame-"+t.hash}).call(function(t){var e=t.selectAll("circle").data(function(t){return t.data.map(function(t){return{data:t,uid:c.uid}})});e.exit().remove(),e.call(E),e.enter().append("circle").call(E)})}),[]},e.prototype._resolveFeature=function(t){var e,n=this.groupByCode,r=t.properties,i=["c1","c2","c3","abbr","name"].filter(function(t){return r.hasOwnProperty(t)&&r[t]&&n.hasOwnProperty(r[t].toLowerCase())});if(0===i.length)e=null;else if(i.length>0){var o=r[i[0]].toLowerCase();e=n[o]}return e},e.prototype._highlightArea=function(t){var e=this,n=this.config.options.container,r=this.contourToFill;n.selectAll(".map-contour-"+r).classed("map-contour-highlighted",function(n){return t(e._resolveFeature(n))})},e.prototype._highlightPoint=function(t){this.config.options.container.selectAll("circle").classed("map-point-highlighted",function(e){var n=e.data;return t(n)}).attr("opacity",function(e){var n=e.data;return t(n)?.5:.1})},e.prototype._createProjection=function(t,e,n){var r=this.W,i=this.H,o=this.config.guide,a=100,u=[r/2,i/2],c=n||t.center,s=o.projection||t.projection||"mercator",l=this._createD3Projection(s,c,a,u),f=yr.geoPath().projection(l).bounds(pr.feature(t,t.objects[e])),h=a*r/(f[1][0]-f[0][0]),d=a*i/(f[1][1]-f[0][1]);return a=h<d?h:d,u=[r-(f[0][0]+f[1][0])/2,i-(f[0][1]+f[1][1])/2],this._createD3Projection(s,c,a,u)},e.prototype._createD3Projection=function(t,e,n,r){var i="geo"+t.substring(0,1).toUpperCase()+t.substring(1),o=yr[i];if(!o)throw console.log('Unknown projection "'+t+'"'),console.log("See available projection types here: https://github.com/mbostock/d3/wiki/Geo-Projections"),new Error('Invalid map: unknown projection "'+t+'"');var a=o();return[{method:"scale",args:n},{method:"center",args:e},{method:"translate",args:r}].filter(function(t){return t.args}).reduce(function(t,e){return t[e.method]&&(t=t[e.method](e.args)),t},a)},e}(g),_r=function(t){return function(){return t}},xr=function(){function t(t){this.model=t.model,this.x=t.x||_r(0),this.y=t.y||_r(0),this.dx=t.dx||_r(0),this.dy=t.dy||_r(0),this.w=t.w||_r(0),this.h=t.h||_r(0),this.hide=t.hide||_r(!1),this.label=t.label||_r(""),this.color=t.color||_r(""),this.angle=t.angle||_r(0)}return t.seed=function(e,n){var r=n.fontColor,i=n.flip,o=n.formatter,a=n.labelRectSize,u=n.paddingKoeff,c=void 0===u?.5:u,s=i?e.yi:e.xi,l=i?e.xi:e.yi,f=function(t){return o(e.label(t))};return new t({model:e,x:function(t){return s(t)},y:function(t){return l(t)},dy:function(t){return a(f(t)).height*c},w:function(t){return a(f(t)).width},h:function(t){return a(f(t)).height},label:f,color:function(){return r},angle:function(){return 0}})},t.compose=function(e,n){return void 0===n&&(n={}),Object.keys(n).reduce(function(t,e){return t[e]=n[e],t},new t(e))},t}(),wr={},Mr=function(){function t(){}return t.regRule=function(t,e){return wr[t]=e,this},t.getRule=function(t){return wr[t]},t}(),Sr=function(t,e,n){return n<e?Math.max(1,Math.floor(n*t.length/e))-1:t.length},Tr=function(t,e){return 0===e?"":t.slice(0,e).replace(/\.+$/g,"")+""},Er=function(t,e){return t.discrete||!t.discrete&&e[t.dim]>=0},kr=function(t,e){return!t.discrete&&e[t.dim]<0},Ar=function(t,e){return t.w(e)/2+Math.floor(t.model.size(e)/5)},Or=function(t,e){return t.h(e)/2+Math.floor(t.model.size(e)/5)},Cr=function(t){return function(e){return{dx:function(n){var r=e.model.scaleY;if("+"===t[2]&&!Er(r,n))return e.dx(n);if("-"===t[2]&&!kr(r,n))return e.dx(n);var i=t[1],o=t[0]===t[0].toUpperCase()?1:0;return e.dx(n)+i*o*e.model.size(n)/2+i*Ar(e,n)}}}},Nr=function(t){return function(e){return{dy:function(n){var r=e.model.scaleY;if("+"===t[2]&&!Er(r,n))return e.dy(n);if("-"===t[2]&&!kr(r,n))return e.dy(n);var i=t[1],o=t[0]===t[0].toUpperCase()?1:0;return e.dy(n)+i*o*e.model.size(n)/2+i*Or(e,n)}}}};Mr.regRule("l",Cr(["l",-1,null])).regRule("L",Cr(["L",-1,null])).regRule("l+",Cr(["l",-1,"+"])).regRule("l-",Cr(["l",-1,"-"])).regRule("L+",Cr(["L",-1,"+"])).regRule("L-",Cr(["L",-1,"-"])).regRule("r",Cr(["r",1,null])).regRule("R",Cr(["R",1,null])).regRule("r+",Cr(["r",1,"+"])).regRule("r-",Cr(["r",1,"-"])).regRule("R+",Cr(["R",1,"+"])).regRule("R-",Cr(["R",1,"-"])).regRule("t",Nr(["t",-1,null])).regRule("T",Nr(["T",-1,null])).regRule("t+",Nr(["t",-1,"+"])).regRule("t-",Nr(["t",-1,"-"])).regRule("T+",Nr(["T",-1,"+"])).regRule("T-",Nr(["T",-1,"-"])).regRule("b",Nr(["b",1,null])).regRule("B",Nr(["B",1,null])).regRule("b+",Nr(["b",1,"+"])).regRule("b-",Nr(["b",1,"-"])).regRule("B+",Nr(["B",1,"+"])).regRule("B-",Nr(["B",1,"-"])).regRule("rotate-on-size-overflow",function(t,e){var n=e.data,r={};return n.reduce(function(e,n){return e+(function(e){return t.model.size(e)<t.w(e)}(n)?1:0)},0)/n.length>.5&&(r={angle:function(){return-90},w:function(e){return t.h(e)},h:function(e){return t.w(e)},dx:function(e){return.5*t.h(e)-2},dy:function(){return 0}}),r}).regRule("hide-by-label-height-vertical",function(t){return{hide:function(e){var n,r;return 0===t.angle(e)?(r=t.h(e),n=Math.abs(t.model.y0(e)-t.model.yi(e))):(r=t.w(e),n=t.model.size(e)),r>n||t.hide(e)}}}).regRule("cut-label-vertical",function(t){return{h:function(e){var n=t.h(e);if(Math.abs(t.angle(e))>0){var r=t.label(e),i=Math.abs(t.model.y0(e)-t.model.yi(e));return Sr(r,n,i)<r.length?i:n}return n},w:function(e){var n=t.w(e);if(0===t.angle(e)){var r=t.label(e),i=t.model.size(e);return Sr(r,n,i)<r.length?i:n}return n},label:function(e){var n,r;0===t.angle(e)?(n=t.w(e),r=t.model.size(e)):(n=t.h(e),r=Math.abs(t.model.y0(e)-t.model.yi(e)));var i=t.label(e),o=Sr(i,n,r);return o<i.length?Tr(i,o):i},dy:function(e){var n=t.dy(e);if(0!==t.angle(e)){var r=t.h(e),i=Math.abs(t.model.y0(e)-t.model.yi(e)),o=t.label(e);return Sr(o,r,i)<o.length?i*n/r:n}return n}}}).regRule("cut-outer-label-vertical",function(t){return{h:function(e,n){var r=t.h(e);if(Math.abs(t.angle(e))>0){var i=t.label(e),o=t.model.y0(e)<t.model.yi(e)?n.maxHeight-t.model.yi(e):t.model.yi(e);return Sr(i,r,o)<i.length?o:r}return r},w:function(e){var n=t.w(e);if(0===t.angle(e)){var r=t.label(e),i=t.model.size(e);return Sr(r,n,i)<r.length?i:n}return n},label:function(e,n){var r,i;0===t.angle(e)?(r=t.w(e),i=t.model.size(e)):(r=t.h(e),i=t.model.y0(e)<t.model.yi(e)?n.maxHeight-t.model.yi(e):t.model.yi(e));var o=t.label(e),a=Sr(o,r,i);return a<o.length?Tr(o,a):o},dy:function(e,n){var r=t.dy(e);if(0!==t.angle(e)){var i=t.h(e),o=t.model.y0(e)<t.model.yi(e)?n.maxHeight-t.model.yi(e):t.model.yi(e),a=t.label(e);return Sr(a,i,o)<a.length?o*r/i:r}return r}}}).regRule("from-beginning",function(t){var e=function(e){return t.model.y0(e)};return t.model.flip?{x:e}:{y:e}}).regRule("to-end",function(t){var e=function(e){return t.model.yi(e)};return t.model.flip?{x:e}:{y:e}}).regRule("towards",function(t){var e=t.model.flip?Ar:Or,n=function(n){return function(t,e){return t.model.yi(e)-t.model.y0(e)>=0?1:-1}(t,n)*e(t,n)};return t.model.flip?{dx:n}:{dy:n}}).regRule("inside-start-then-outside-end-horizontal",function(t,e){var n=[Mr.getRule("from-beginning"),Mr.getRule("towards"),Mr.getRule("cut-label-horizontal")].reduce(function(t,n){return xr.compose(t,n(t,e))},t),r=[Mr.getRule("to-end"),Mr.getRule("towards"),Mr.getRule("cut-outer-label-horizontal")].reduce(function(t,n){return xr.compose(t,n(t,e))},t);return Object.assign({},n,["x","dx","hide","label"].reduce(function(t,e){return t[e]=function(t){return(function(t){return n.label(t).length>=r.label(t).length}(t)?n:r)[e](t)},t},{}))}).regRule("inside-start-then-outside-end-vertical",function(t,e){var n=[Mr.getRule("from-beginning"),Mr.getRule("towards"),Mr.getRule("cut-label-vertical")].reduce(function(t,n){return xr.compose(t,n(t,e))},t),r=[Mr.getRule("to-end"),Mr.getRule("towards"),Mr.getRule("cut-outer-label-vertical")].reduce(function(t,n){return xr.compose(t,n(t,e))},t);return Object.assign({},n,["y","dy","hide","label"].reduce(function(t,e){return t[e]=function(t){return(function(t){return n.label(t).length>=r.label(t).length}(t)?n:r)[e](t)},t},{}))}).regRule("outside-then-inside-horizontal",function(t,e){var n=["r+","l-","cut-outer-label-horizontal"].map(Mr.getRule).reduce(function(t,n){return xr.compose(t,n(t,e))},t),r=["r-","l+","hide-by-label-height-horizontal","cut-label-horizontal"].map(Mr.getRule).reduce(function(t,n){return xr.compose(t,n(t,e))},t);return Object.assign({},n,["x","dx","hide","label"].reduce(function(t,e){return t[e]=function(t){return(function(t){return r.label(t).length>n.label(t).length}(t)?r:n)[e](t)},t},{}))}).regRule("outside-then-inside-vertical",function(t,e){var n=["t+","b-","cut-outer-label-vertical"].map(Mr.getRule).reduce(function(t,n){return xr.compose(t,n(t,e))},t),r=["t-","b+","hide-by-label-height-vertical","cut-label-vertical"].map(Mr.getRule).reduce(function(t,n){return xr.compose(t,n(t,e))},t);return Object.assign({},n,["y","dy","hide","label"].reduce(function(t,i){return t[i]=function(t){return(function(t){return r.label(t,e).length>n.label(t,e).length}(t)?r:n)[i](t,e)},t},{}))}).regRule("hide-by-label-height-horizontal",function(t){return{hide:function(e){return t.model.size(e)<t.h(e)||t.hide(e)}}}).regRule("cut-label-horizontal",function(t){return{dx:function(e){var n=t.label(e),r=t.w(e),i=Math.abs(t.model.y0(e)-t.model.yi(e)),o=Sr(n,r,i),a=t.dx(e);return o<n.length?i*a/r:a},w:function(e){var n=t.label(e),r=t.w(e),i=Math.abs(t.model.y0(e)-t.model.yi(e));return Sr(n,r,i)<n.length?i:r},label:function(e){var n=t.label(e),r=t.w(e),i=Math.abs(t.model.y0(e)-t.model.yi(e)),o=Sr(n,r,i);return o<n.length?Tr(n,o):n}}}).regRule("cut-outer-label-horizontal",function(t,e){return{dx:function(n){var r=t.label(n),i=t.w(n),o=t.model.y0(n)<t.model.yi(n)?e.maxWidth-t.model.yi(n):t.model.yi(n),a=Sr(r,i,o),u=t.dx(n);return a<r.length?o*u/i:u},w:function(n){var r=t.label(n),i=t.w(n),o=t.model.y0(n)<t.model.yi(n)?e.maxWidth-t.model.yi(n):t.model.yi(n);return Sr(r,i,o)<r.length?o:i},label:function(n){var r=t.label(n),i=t.w(n),o=t.model.y0(n)<t.model.yi(n)?e.maxWidth-t.model.yi(n):t.model.yi(n),a=Sr(r,i,o);return a<r.length?Tr(r,a):r}}}).regRule("keep-within-diameter-or-top",function(t){return{dy:function(e){return t.model.size(e)/t.w(e)<1?t.dy(e)-t.h(e)/2-t.model.size(e)/2:t.dy(e)}}}).regRule("keep-in-box",function(t,e){var n=e.maxWidth,r=e.maxHeight;return{dx:function(e){var r=t.dx(e),i=t.x(e)+r,o=t.w(e),a=i+o/2,u=0-(i-o/2);if(u>0)return r+u;var c=a-n;return c>0?r-c:r},dy:function(e){var n=t.dy(e),i=t.y(e)+n,o=t.h(e),a=i+o/2;if(0-(i-o/2)>0)return 0;var u=a-r;return u>0?n-u:n}}});var jr=function(){function t(t){this.minError=Number.MAX_VALUE,this.items=t.items,this.revision=this.items.map(function(t){return{i:t.i,x:t.x,y:t.y}}),this.penalties=t.penalties,this.transactor=t.transactor,this.cooling_schedule=t.cooling_schedule||function(t,e,n){return t-e/n}}return t.prototype.energy=function(t){return this.penalties.reduce(function(e,n){return e+n(t)},0)},t.prototype.move=function(t){var e=Math.floor(Math.random()*this.items.length),n=this.transactor(this.items[e]),r=this.energy(e);this.items[e]=n.modify();var i=this.energy(e),o=i-r,a=o<0?1:Math.exp(-o/t);Math.random()>=a?this.items[e]=n.revert():i<this.minError&&(this.minError=i,this.revision=this.items.map(function(t){return{i:t.i,x:t.x,y:t.y}}))},t.prototype.start=function(t){var e=1,n=this.items.length;t:for(var r=0;r<t;r++){for(var i=0;i<n;i++)if(this.move(e),this.minError<=10)break t;e=this.cooling_schedule(e,1,t)}return this.revision},t}(),Pr=function(t,e,n,r,i,o,a,u){return Ee(t,i,e,o,n,a,r,u)},Lr={},Fr=function(){function t(){}return t.reg=function(t,e){return Lr[t]=e,this},t.get=function(t){return Lr[t]},t}();Fr.reg("auto:avoid-label-label-overlap",function(t,e,n){return void 0===n&&(n=1),function(e){var r=t[e].x,i=t[e].y-t[e].h+2,o=t[e].x+t[e].w,a=t[e].y+2;return t.reduce(function(t,u,c){var s=Number(c!==e),l=u.x,f=u.y-u.h+2,h=u.x+u.w,d=u.y+2;return t+s*(Math.max(0,Math.min(h,o)-Math.max(l,r))*Math.max(0,Math.min(d,a)-Math.max(f,i))*n)},0)}}).reg("auto:avoid-label-anchor-overlap",function(t,e,n){return void 0===n&&(n=1),function(e){var r=t[e],i=r.x-r.w/2,o=r.x+r.w/2,a=r.y-r.h/2+2,u=r.y+r.h/2+2;return t.reduce(function(t,e){var r=e.x0-e.size/2,c=e.x0+e.size/2,s=e.y0-e.size/2,l=e.y0+e.size/2;return t+Math.max(0,Math.min(c,o)-Math.max(r,i))*Math.max(0,Math.min(l,u)-Math.max(s,a))*n},0)}}).reg("auto:avoid-label-edges-overlap",function(t,e,n){return void 0===n&&(n=1),function(r){var i=t[r],o=i.x-i.w/2,a=i.x+i.w/2,u=i.y-i.h/2,c=i.y+i.h/2;return e.reduce(function(t,e){var r=Pr(o,a,e.x0,e.x1,u,c,e.y0,e.y1),i=Pr(o,a,e.x0,e.x1,c,u,e.y0,e.y1);return t+(Number(r)+Number(i))*n},0)}});var Dr=function(t,e,n,r,i,o,a,u){return Ee(t,i,e,o,n,a,r,u)},zr=function(){function t(t,e,n,r){var i=r.width,o=r.height,a=r.container;this.container=a,this.model=t,this.flip=e,this.w=i,this.h=o,this.guide=Yt(n||{},{fontFamily:"Helvetica Neue, Segoe UI, Open Sans, Ubuntu, sans-serif",fontWeight:"normal",fontSize:10,fontColor:"#000",hideEqualLabels:!1,position:[],tickFormat:null,tickFormatNullAlias:""})}return t.prototype.draw=function(t){var e=this,n=this.model,r=this.guide,i=xr.seed(n,{fontColor:r.fontColor,flip:e.flip,formatter:hn.get(r.tickFormat,r.tickFormatNullAlias),labelRectSize:function(t){return ge(t,r)}}),o={maxWidth:e.w,maxHeight:e.h,data:t.reduce(function(t,e){return t.concat(e)},[])},a=r.position.filter(function(t){return-1===t.indexOf("auto:")}).map(Mr.getRule).reduce(function(t,e){return xr.compose(t,e(t,o))},i),u=t.reduce(function(t,e){var n=e.map(function(t){return{data:t,x:a.x(t)+a.dx(t),y:a.y(t)+a.dy(t),w:a.w(t),h:a.h(t,o),hide:a.hide(t),extr:null,size:a.model.size(t),angle:a.angle(t),label:a.label(t),color:a.color(t)}});return t.text=t.text.concat(n),t.edges=t.edges.concat(function(t,e){for(var n=t.length-1,r=[],i=0;i<=n;i++){var o=0===i?i:i-1,a=i,u=i===n?i:i+1;r.push(e(t[o],t[a],t[u]))}return r}(n,function(t,e,n){return e.y===Math.max(e.y,t.y,n.y)?e.extr="min":e.y===Math.min(e.y,t.y,n.y)?e.extr="max":e.extr="norm",{x0:t.x,x1:e.x,y0:t.y,y1:e.y}})),t},{text:[],edges:[]});u.text=u.text.filter(function(t){return t.label}).map(function(t,e){return Object.assign(t,{i:e})});var c=this.guide.position.filter(function(t){return 0===t.indexOf("auto:avoid")});u=u.text.length>0&&c.length>0?this.autoPosition(u,c):u;var s=this.guide.position.reduce(function(t,e){return Object.assign(t,((n={})[e]=!0,n));var n},{});u.text=u.text=s["auto:adjust-on-label-overflow"]?this.adjustOnOverflow(u.text,o):u.text,u.text=s["auto:hide-on-label-edges-overlap"]?this.hideOnLabelEdgesOverlap(u.text,u.edges):u.text,u.text=s["auto:hide-on-label-label-overlap"]?this.hideOnLabelLabelOverlap(u.text):u.text,u.text=s["auto:hide-on-label-anchor-overlap"]?this.hideOnLabelAnchorOverlap(u.text):u.text;var l=u.text,f=function(t){return function(e,n){return l[n][t]}},h=f("x"),d=f("y"),p=f("angle"),g=f("color"),m=f("label"),y=function(t){t.style("fill",g).style("font-size",e.guide.fontSize+"px").style("display",function(t,e){return l[e].hide?"none":null}).attr("class","i-role-label").attr("text-anchor","middle").attr("transform",function(t,e){return"translate("+h(t,e)+","+d(t,e)+") rotate("+p(t,e)+")"}).text(m)};r.hideEqualLabels&&l.filter(function(t){return!t.hide}).filter(function(t,e,n){return e<n.length-1&&t.label===n[e+1].label}).forEach(function(t){return t.hide=!0});var v=this.container.selectAll(".i-role-label").data(l.map(function(t){return t.data}));return v.exit().remove(),v.call(y),v.enter().append("text").call(y),v},t.prototype.autoPosition=function(t,e){var n=function(t,e){var n=4+(t.size+t.w)/2,r=2+(t.size+t.h)/2;return{x:n*Math.cos(e),y:r*Math.sin(e)}},r=t.edges,i=t.text.map(function(t){var e={max:-Math.PI/2,min:Math.PI/2,norm:Math.random()*Math.PI*2},r=n(t,e[t.extr]);return{i:t.i,x0:t.x,y0:t.y,x:t.x+r.x,y:t.y+r.y,w:t.w,h:t.h,size:t.size,hide:t.hide,extr:t.extr}}).filter(function(t){return!t.hide}),o=new jr({items:i,transactor:function(t){var e=t.x,r=t.y;return{modify:function(){var e={max:-Math.PI,min:Math.PI,norm:2*Math.PI}[t.extr],r=e/4+Math.random()*(2*e)/4,i=n(t,r);return t.x=t.x0+i.x,t.y=t.y0+i.y,t},revert:function(){return t.x=e,t.y=r,t}}},penalties:e.map(function(t){return Fr.get(t)}).filter(function(t){return t}).map(function(t){return t(i,r)})}).start(5);return t.text=o.reduce(function(t,e){var n=t[e.i];return n.x=e.x,n.y=e.y,t},t.text),t},t.prototype.hideOnLabelEdgesOverlap=function(t,e){var n=this;return t.filter(function(t){return!t.hide}).forEach(function(t){(function(t,e){var r=n.getLabelRect(t);return e.reduce(function(t,e){var n=Dr(r.x0,r.x1,e.x0,e.x1,r.y0,r.y1,e.y0,e.y1),i=Dr(r.x0,r.x1,e.x0,e.x1,r.y1,r.y0,e.y0,e.y1);return t+2*(Number(n)+Number(i))},0)})(t,e)>0&&(t.hide=!0)}),t},t.prototype.hideOnLabelLabelOverlap=function(t){var e=this,n={min:0,max:1,norm:2},r={"min/min":function(t,e){return e.y-t.y},"max/max":function(t,e){return t.y-e.y},"min/max":function(){return-1},"min/norm":function(){return-1},"max/norm":function(){return-1},"norm/norm":function(t,e){return t.y-e.y}};return t.filter(function(t){return!t.hide}).sort(function(t,e){return n[t.extr]-n[e.extr]}).forEach(function(i){t.forEach(function(t){i.i!==t.i&&function(t,i){var o=e.getLabelRect(t),a=e.getLabelRect(i),u=Number(!t.hide&&!i.hide);if(u*Math.max(0,Math.min(a.x1,o.x1)-Math.max(o.x0,a.x0))*(u*Math.max(0,Math.min(a.y1,o.y1)-Math.max(o.y0,a.y0)))>0){var c=[t,i];c.sort(function(t,e){return n[t.extr]-n[e.extr]}),(r[c[0].extr+"/"+c[1].extr](c[0],c[1])<0?c[0]:c[1]).hide=!0}}(i,t)})}),t},t.prototype.getLabelRect=function(t,e){return void 0===e&&(e=0),{x0:t.x-t.w/2-e,x1:t.x+t.w/2+e,y0:t.y-t.h/2-e,y1:t.y+t.h/2+e}},t.prototype.getPointRect=function(t,e){return void 0===e&&(e=0),{x0:t.x-t.size/2-e,x1:t.x+t.size/2+e,y0:t.y-t.size/2-e,y1:t.y+t.size/2+e}},t.prototype.hideOnLabelAnchorOverlap=function(t){var e=this,n=function(t,n){var r=e.getLabelRect(t,2),i=e.getPointRect(n,2);return Math.max(0,Math.min(i.x1,r.x1)-Math.max(i.x0,r.x0))*Math.max(0,Math.min(i.y1,r.y1)-Math.max(i.y0,r.y0))>.001};return t.filter(function(t){return!t.hide}).forEach(function(e){for(var r=t.length,i=0;i<r;i++){var o=t[i];if(e.i!==o.i&&n(e,o)){e.hide=!0;break}}}),t},t.prototype.adjustOnOverflow=function(t,e){var n=e.maxWidth,r=e.maxHeight;return t.map(function(t){return t.hide||(t.x=Math.min(Math.max(t.x,t.w/2),n-t.w/2),t.y=Math.max(Math.min(t.y,r-t.h/2),t.h/2)),t})},t}(),Rr=n(13),Ir=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},Rr,a),Ur={init:function(t){var e=Object.assign({},t);e.guide=Yt(e.guide||{},{animationSpeed:0,avoidScalesOverflow:!0,enableColorToBarPosition:!1,maxHighlightDistance:32}),e.guide.size=e.guide.size||{},e.guide.label=Yt(e.guide.label||{},{position:["auto:avoid-label-label-overlap","auto:avoid-label-anchor-overlap","auto:adjust-on-label-overflow","auto:hide-on-label-label-overlap","auto:hide-on-label-anchor-overlap"]});var n=e.guide.avoidScalesOverflow,r=e.guide.enableColorToBarPosition;return e.transformRules=[function(t){var e=[t.scaleX,t.scaleY].sort(function(t,e){var n=t.discrete?1:0;return(e.discrete?1:0)*e.domain().length-n*t.domain().length})[0];return t.scaleY===e?M.get("flip")(t):M.get("identity")(t)},e.stack&&M.get("stack"),r&&M.get("positioningByColor")].filter(function(t){return t}),e.adjustRules=[e.stack&&M.get("adjustYScale"),function(t,n){var r=t.scaleSize.isEmptyScale(),i=Yt(e.guide.size,{defMinSize:10,defMaxSize:r?10:40,enableDistributeEvenly:!r}),o=Object.assign({},n,{defMin:i.defMinSize,defMax:i.defMaxSize,minLimit:i.minSize,maxLimit:i.maxSize});return(i.enableDistributeEvenly?M.get("adjustSigmaSizeScale"):M.get("adjustStaticSizeScale"))(t,o)},n&&function(t,e){var n=Object.assign({},e,{sizeDirection:"xy"});return M.get("avoidScalesOverflow")(t,n)}].filter(function(t){return t}),e},addInteraction:function(){var t=this,e=this.node();e.on("highlight",function(e,n){return t.highlight(n)}),e.on("data-hover",function(e,n){return t.highlight((r=n.data,function(t){return t===r||null}));var r})},draw:function(){var t=this.node(),e=t.config,n=e.options;n.container=n.slot(e.uid);var r,i=function(t){return J(t,e.guide.animationSpeed)},o=ze+"dot dot i-role-element i-role-datum",a=t.screenModel,u={fill:function(t){return a.color(t)},class:function(t){return o+" "+a.class(t)}},c={r:function(t){return Math.round(1e4*a.size(t)/2)/1e4},cx:function(t){return a.x(t)},cy:function(t){return a.y(t)}},s=[],l=a.toFibers();this._getGroupOrder=(r=l.reduce(function(t,e,n){return t.set(e,n),t},new Map),function(t){return r.get(t)});var f=n.container.selectAll(".frame").data(l,function(t){return a.group(t[0])});f.enter().append("g").attr("opacity",0).merge(f).call(function(e){e.attr("class","frame").call(function(e){var n=e.selectAll("circle").data(function(t){return t},a.id),r=n.enter().append("circle").call(ot(c)).merge(n).call(ot(u));i(r).call(ot(c)),i(n.exit()).attr("r",0).remove(),s.push.apply(s,r.nodes()),t.subscribe(r)}),i(e).attr("opacity",1)}),this._boundsInfo=this._getBoundsInfo(s),i(f.exit()).attr("opacity",0).remove().selectAll("circle").attr("r",0),t.subscribe(new zr(a.model,a.flip,e.guide.label,n).draw(l))},_getBoundsInfo:function(t){if(0===t.length)return null;var e=this.node().screenModel,n=t.map(function(t){var n=Ir.select(t).data()[0];return{node:t,data:n,x:e.x(n),y:e.y(n),r:e.size(n)/2}}).filter(function(t){return!isNaN(t.x)&&!isNaN(t.y)}),r=n.reduce(function(t,e){var n=e.x,r=e.y;return t.left=Math.min(n,t.left),t.right=Math.max(n,t.right),t.top=Math.min(r,t.top),t.bottom=Math.max(r,t.bottom),t},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE}),i=n.reduce(function(t,e){var n=e.x+","+e.y;return t[n]||(t[n]=[]),t[n].push(e),t},{});return{bounds:r,tree:Ir.quadtree().x(function(t){return t[0].x}).y(function(t){return t[0].y}).addAll(Object.keys(i).map(function(t){return i[t]}))}},getClosestElement:function(t,e){if(!this._boundsInfo)return null;var n=this._boundsInfo,r=n.bounds,i=n.tree,o=ke(this.node().config.options.container.node()),a=t-o.x,u=e-o.y,c=this.node().config.guide.maxHighlightDistance;if(a<r.left-c||a>r.right+c||u<r.top-c||u>r.bottom+c)return null;var s=(i.find(a,u)||[]).map(function(t){var e=Math.sqrt(Math.pow(a-t.x,2)+Math.pow(u-t.y,2));if(e>c)return null;var n=e<t.r?t.r-e:e;return{node:t.node,data:t.data,x:t.x,y:t.y,distance:e,secondaryDistance:n}}).filter(function(t){return t}).sort(function(t,e){return t.secondaryDistance-e.secondaryDistance}),l=s.findIndex(function(t){return t.distance!==s[0].distance||t.secondaryDistance!==s[0].secondaryDistance}),f=l<0?s:s.slice(0,l);if(1===f.length)return f[0];var h=f.reduce(function(t,e){return t+e.x},0)/f.length,d=f.reduce(function(t,e){return t+e.y},0)/f.length,p=Math.atan2(d-u,h-a)+Math.PI;return f[Math.round((f.length-1)*p/2/Math.PI)]},highlight:function(t){var e,n=this.node().config.options.container,r=((e={})["tau-chart__highlighted"]=function(e){return!0===t(e)},e["tau-chart__dimmed"]=function(e){return!1===t(e)},e);n.selectAll(".dot").call(at(r)),n.selectAll(".i-role-label").call(at(r)),this._sortElements(t)},_sortElements:function(t){var e=this,n=this.node().config.options.container,r=new Map,i=new Map;n.selectAll(".frame").each(function(e){r.set(this,e.some(t)),i.set(this,e)});var o=qt(function(t,e){return r.get(t)-r.get(e)},function(t,n){return e._getGroupOrder(i.get(t))-e._getGroupOrder(i.get(n))});_e(n.node(),function(t,e){return"g"===t.tagName&&"g"===e.tagName?o(t,e):t.tagName.localeCompare(e.tagName)}),Ae(n,".dot",t)}},Hr=n(6),Br="taucharts_synthetic_record";function Wr(t){return!0!==t[Br]}function Yr(t){return function(e){var n=t.stack,r=e.scaleX.period,i="linear"===e.scaleY.scaleType,o=!t.guide.x||null==t.guide.x.fillGaps;return!o&&t.guide.x.fillGaps||o&&(n||r&&i)?M.get("fillGaps")(e,{isStack:n,xPeriod:r,utc:t.guide.utcTime}):{}}}function Gr(t){if(0===t.length)return"";if(1===t.length)return qr(t[0]);for(var e=[],n=1;n<t.length;n++)e.push(Vr(t[n-1],t[n]));return e.join(" ")}function Xr(t){if(0===t.length)return"";if(1===t.length)return qr(t[0]);for(var e=[],n=3;n<t.length;n+=3)e.push($r(t[n-3],t[n-2],t[n-1],t[n]));return e.join(" ")}function qr(t){var e=t.size/2;return["M"+t.x+","+(t.y-e),"A"+e+","+e+" 0 0 1",t.x+","+(t.y+e),"A"+e+","+e+" 0 0 1",t.x+","+(t.y-e),"Z"].join(" ")}function Vr(t,e){var n=ni(t,e);return n?["M"+n.left[0].x+","+n.left[0].y,"L"+n.left[1].x+","+n.left[1].y,"A"+e.size/2+","+e.size/2+" 0 "+Number(t.size<e.size)+" 1",n.right[1].x+","+n.right[1].y,"L"+n.right[0].x+","+n.right[0].y,"A"+t.size/2+","+t.size/2+" 0 "+Number(t.size>e.size)+" 1",n.left[0].x+","+n.left[0].y,"Z"].join(" "):qr(t.size>e.size?t:e)}function $r(t,e,n,r){var i=function(t,e,n,r){var i=Qr(t,r);if(0===i||i+t.size/2<=r.size/2||i+r.size/2<=t.size/2)return null;var o=function(i){var o=i?[r,n,e,t]:[t,e,n,r],a=ti.apply(void 0,[1/12*2].concat(o)),u=ti.apply(void 0,[.5].concat(a.slice(0,4))),c=u[3],s=u[6],l=ni(o[0],c),f=ni(c,s),h=[l.left[0],E(.5,l.left[1],f.left[0]),f.left[1]],d=[l.right[0],E(.5,l.right[1],f.right[0]),f.right[1]],p=ei.apply(void 0,h)[1],g=ei.apply(void 0,d)[1],m=E(4,l.left[0],p),y=E(4,l.right[0],g);return{left:i?[y,d[0]]:[h[0],m],right:i?[m,h[0]]:[d[0],y]}},a=o(!1),u=o(!0);return{left:a.left.concat(u.left),right:a.right.concat(u.right)}}(t,e,n,r);if(!i)return Vr(t,r);var o=Jr(Zr(t,i.right[0]),Zr(t,i.left[0])),a=Jr(Zr(r,i.right[1]),Zr(r,i.left[1]));return["M"+i.left[0].x+","+i.left[0].y,"C"+i.left[1].x+","+i.left[1].y,i.left[2].x+","+i.left[2].y,i.left[3].x+","+i.left[3].y,"A"+r.size/2+","+r.size/2+" 0 "+Number(o>Math.PI)+" 1",i.right[3].x+","+i.right[3].y,"C"+i.right[2].x+","+i.right[2].y,i.right[1].x+","+i.right[1].y,i.right[0].x+","+i.right[0].y,"A"+t.size/2+","+t.size/2+" 0 "+Number(a>Math.PI)+" 1",i.left[0].x+","+i.left[0].y,"Z"].join(" ")}function Zr(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function Jr(t,e){return e<t&&(e+=2*Math.PI),e-t}function Qr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=1;r<t.length;r++)n+=Math.sqrt((t[r].x-t[r-1].x)*(t[r].x-t[r-1].x)+(t[r].y-t[r-1].y)*(t[r].y-t[r-1].y));return n}function Kr(t,e,n){return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}}function ti(t,e,n,r,i){var o=k(t,e,n,r,i),a=1/(1+Qr(o[3],o[4],o[5],o[6],o[3])/Qr(o[0],o[1],o[2],o[3],o[0]));return o[3].size=e.size*(1-a)+i.size*a,o}function ei(t,e,n){return[t,E(2,E(Qr(t,e)/Qr(t,e,n),t,n),e),n]}function ni(t,e){var n=Qr(t,e);if(0===n||n+t.size/2<=e.size/2||n+e.size/2<=t.size/2)return null;var r=Zr(t,e),i=Math.asin((t.size-e.size)/n/2),o=r-Math.PI/2+i,a=r+Math.PI/2-i;return{left:[Kr(t,t.size/2,o),Kr(e,e.size/2,o)],right:[Kr(t,t.size/2,a),Kr(e,e.size/2,a)]}}var ri=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ii={circle:{element:"circle",getInitialAttrs:function(t,e){var n=t.config.guide,r=t.screenModel;return{r:"hover"===n.showAnchors?0:function(t){return r.size(t)/2},cx:function(t){return e.x(t)},cy:function(t){return e.y(t)}}},getHighlightAttrs:function(t,e,n){t.config.guide;var r=t.screenModel;return{r:"hover"===t.config.guide.showAnchors?function(t){return n(t)?Math.max(4,r.size(t)/2):0}:function(t){var e=r.size(t)/2;return n(t)&&(e=Math.max(4,Math.ceil(1.25*e))),e}}}},"vertical-stick":{element:"path",getInitialAttrs:function(t,e){var n=t.config.guide,r=t.screenModel;return{"shape-rendering":"crispEdges",d:function(t){var i=e.x(t),o=e.y(t),a=e.x0(t),u=e.y0(t),c="hover"===n.showAnchors?0:r.size(t)/2;return Gr([{x:i,y:o,size:c},{x:a,y:u,size:c}])}}},getHighlightAttrs:function(t,e,n){t.config.guide;var r=t.screenModel,i="hover"===t.config.guide.showAnchors;return{d:function(t){var o=e.x(t),a=e.y(t),u=e.x0(t),c=e.y0(t),s=i?n(t)?Math.max(4,r.size(t)/2):0:n(t)?Math.max(4,Math.ceil(r.size(t)/2*1.25)):r.size(t)/2;return Gr([{x:o,y:a,size:s},{x:u,y:c,size:s}])}}}}};function oi(t,e,n){var r=n.sort(function(t,e){return t.distance===e.distance?t.secondaryDistance-e.secondaryDistance:t.distance-e.distance}),i=r.findIndex(function(t){return t.distance!==r[0].distance||t.secondaryDistance!==r[0].secondaryDistance}),o=i<0?r:r.slice(0,i);if(1===o.length)return o[0];var a=o.reduce(function(t,e){return t+e.x},0)/o.length,u=o.reduce(function(t,e){return t+e.y},0)/o.length,c=Math.atan2(u-e,a-t)+Math.PI;return o[Math.round((o.length-1)*c/2/Math.PI)]}var ai=ze+"dot-line dot-line i-role-dot i-role-datum "+ze+"dot",ui={init:function(t){var e=t;return e.guide=Yt(e.guide||{},{animationSpeed:0,cssClass:"",maxHighlightDistance:32,widthCssClass:"",color:{},label:{}}),e.guide.label=Yt(e.guide.label,{fontSize:11,hideEqualLabels:!0,position:["auto:avoid-label-label-overlap","auto:avoid-label-anchor-overlap","auto:avoid-label-edges-overlap","auto:adjust-on-label-overflow","auto:hide-on-label-label-overlap","auto:hide-on-label-edges-overlap"]}),e.guide.color=Yt(e.guide.color||{},{fill:null}),["never","hover","always"].indexOf(e.guide.showAnchors)<0&&(e.guide.showAnchors="hover"),e.transformRules=[],e.adjustRules=[],e},baseModel:function(t){var e={gog:t.model,x:t.x,y:t.y,x0:t.x0,y0:t.y0,size:t.size,group:t.group,order:t.order,color:t.color,class:t.class,groupAttributes:{},pathAttributesUpdateInit:{},pathAttributesUpdateDone:{},pathAttributesEnterInit:{},pathAttributesEnterDone:{},pathElement:null,dotAttributes:{r:function(t){return Math.round(1e4*e.size(t)/2)/1e4},cx:function(t){return e.x(t)},cy:function(t){return e.y(t)},fill:function(t){return e.color(t)},class:function(t){return ai+" "+e.class(t)}},dotAttributesDefault:{r:0,cy:function(t){return e.y0(t)}}};return e},addInteraction:function(){var t=this,e=this.node(),n=this.node().config;e.on("highlight",function(e,n){return t.highlight(n)}),e.on("highlight-data-points",function(e,n){return t.highlightDataPoints(n)}),"never"!==n.guide.showAnchors&&e.on("data-hover",function(e,n){return t.highlightDataPoints((r=n.data,function(t){return t===r||null}));var r})},draw:function(){var t=this.node(),e=t.config,n=e.guide,r=e.options;r.container=r.slot(e.uid);var i=t.screenModel,o=this.buildModel(i);this.domElementModel=o;var u=nt,c=function(r){r.call(ot(o.groupAttributes));var c,s=r.selectAll((c=ai,c.split(/\s+/g).map(function(t){return"."+t}).join(""))).data(function(t){return t.length<=1?t:[]},i.id);s.exit().call(u(n.animationSpeed,null,{r:0},function(t){return a.select(t).remove()})),s.call(u(n.animationSpeed,null,o.dotAttributes));var l=s.enter().append("circle").call(u(n.animationSpeed,o.dotAttributesDefault,o.dotAttributes)).merge(s);t.subscribe(l);var f=r.selectAll(o.pathElement+":not(.i-data-anchor)").data(function(t){return t.length>1?[t]:[]},h);if(f.exit().remove(),f.call(u(n.animationSpeed,o.pathAttributesUpdateInit,o.pathAttributesUpdateDone,o.afterPathUpdate)),f.enter().append(o.pathElement).call(u(n.animationSpeed,o.pathAttributesEnterInit,o.pathAttributesEnterDone,o.afterPathUpdate)).merge(f).call(function(t){e.guide.animationSpeed>0&&!document.hidden?(t.attr(o.pathTween.attr,function(t){return o.pathTween.fn.call(this,t)(0)}),J(t,e.guide.animationSpeed,"pathTransition").attrTween(o.pathTween.attr,o.pathTween.fn)):t.attr(o.pathTween.attr,function(t){return o.pathTween.fn.call(this,t)(1)})}),t.subscribe(l),"never"!==n.showAnchors){var d=function(t,e,n){var r=e.anchorShape,i=t.config.guide,o=t.screenModel,a=ri({},ii[r].getInitialAttrs(t,e),{opacity:"hover"===i.showAnchors?0:1,fill:function(t){return o.color(t)},class:"i-data-anchor"}),u=n.selectAll(".i-data-anchor").data(function(t){return t.filter(Wr)},o.id);return u.exit().remove(),u.call(nt(i.animationSpeed,null,a)),u.enter().append(ii[e.anchorShape].element).call(nt(i.animationSpeed,{r:0},a)).merge(u)}(t,o,r);t.subscribe(d)}},s=i.toFibers(),l=s.map(function(t){return t.filter(Wr)}),f=r.container.selectAll(".frame"),h=function(){var t=f.empty()?[]:f.data(),e=new Map;f.each(function(t){e.set(t,Number(this.getAttribute("data-id")))});var n=t.reduce(function(t,e){return t.set(e,e.map(i.id)),t},new Map),r=new Map,o=Math.max.apply(Math,[0].concat(Array.from(e.values())));return function(t){if(r.has(t))return r.get(t);var a,u=t.map(function(t){return i.id(t)}),c=(Array.from(n.entries()).find(function(t){var e=t[1];return u.some(function(t){return e.some(function(e){return e===t})})})||[null])[0];return a=c?e.get(c):++o,r.set(t,a),a}}();this._getDataSetId=h;var d=f.data(s,h);d.exit().remove(),d.call(c),d.enter().append("g").attr("data-id",h).call(c),d.order(),this._boundsInfo=this._getBoundsInfo(r.container.selectAll(".i-data-anchor").nodes()),t.subscribe(new zr(i.model,e.flip,e.guide.label,r).draw(l))},_getBoundsInfo:function(t){if(0===t.length)return null;var e=this.node().screenModel,n=this.node().config.flip,r=t.map(function(t){var n=a.select(t).data()[0];return{node:t,data:n,x:e.x(n),y:e.y(n)}}).filter(function(t){return!isNaN(t.x)&&!isNaN(t.y)}),i=r.reduce(function(t,e){var n=e.x,r=e.y;return t.left=Math.min(n,t.left),t.right=Math.max(n,t.right),t.top=Math.min(r,t.top),t.bottom=Math.max(r,t.bottom),t},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE}),o=Ut(r.map(n?function(t){return t.y}:function(t){return t.x})).sort(function(t,e){return t-e}),u=o.reduce(function(t,e){return t[e]=[],t},{});r.forEach(function(t){var e=o.find(n?function(e){return t.y===e}:function(e){return t.x===e});u[e].push(t)});var c=function(t){if(1===t.length)return u[t[0]];var e=Math.ceil(t.length/2);return{middle:(t[e-1]+t[e])/2,lower:c(t.slice(0,e)),greater:c(t.slice(e))}};return{bounds:i,tree:c(o)}},getClosestElement:function(t,e){if(!this._boundsInfo)return null;var n=this._boundsInfo,r=n.bounds,i=n.tree,o=this.node().config.options.container,a=this.node().config.flip,u=ke(o.node()),c=this.node().config.guide.maxHighlightDistance;if(t<r.left+u.x-c||t>r.right+u.x+c||e<r.top+u.y-c||e>r.bottom+u.y+c)return null;var s=a?e-u.y:t-u.x,l=function t(e){return Array.isArray(e)?e:t(s>e.middle?e.greater:e.lower)}(i).map(function(n){var r=n.x+u.x,i=n.y+u.y,o=Math.abs(a?e-i:t-r),c=Math.abs(a?t-r:e-i);return{node:n.node,data:n.data,distance:o,secondaryDistance:c,x:r,y:i}});return oi(t,e,l)},highlight:function(t){var e=this.node().config.options.container,n="tau-chart__highlighted",r="tau-chart__dimmed",i=e.selectAll(".i-role-path"),o=i.data().filter(function(e){return e.filter(Wr).some(t)}),a=o.length>0;i.call(at(((u={})[n]=function(t){return a&&o.indexOf(t)>=0},u[r]=function(t){return a&&o.indexOf(t)<0},u)));var u,c,s=((c={})[n]=function(e){return!0===t(e)},c[r]=function(e){return!1===t(e)},c);e.selectAll(".i-role-dot").call(at(s)),e.selectAll(".i-role-label").call(at(s)),this._sortElements(t)},highlightDataPoints:function(t){var e=this.node(),n=function(t,e,n){var r=e.anchorShape,i=t.screenModel,o="hover"===t.config.guide.showAnchors;return t.config.options.container.selectAll(".i-data-anchor").call(ot(ii[r].getHighlightAttrs(t,e,n))).attr("opacity",o?function(t){return n(t)?1:0}:function(){return 1}).attr("fill",function(t){return i.color(t)}).attr("class",function(t){return xe("i-data-anchor",i.class(t))}).classed(ze+"highlighted",n)}(e,this.domElementModel,t),r=e.config.options.container,i=e.config.flip,o=n.filter(t),a=r.select(".cursor-line");if(o.empty())a.remove();else{a.empty()&&(a=r.append("line"));var u=e.screenModel.model,c=u.xi(o.data()[0]),s=u.xi(o.data()[0]),l=u.scaleY.domain(),f=u.scaleY(l[0]),h=u.scaleY(l[1]);a.attr("class","cursor-line").attr("x1",i?f:c).attr("y1",i?c:f).attr("x2",i?h:s).attr("y2",i?s:h)}this._sortElements(t)},_sortElements:function(t){var e=this.node().config.options.container,n=new Map,r=new Map,i=this._getDataSetId;e.selectAll(".i-role-path").each(function(e){n.set(this,i(e)),r.set(this,e.filter(Wr).some(t))});var o=qt(function(t,e){return r.get(t)-r.get(e)},function(t,e){return n.get(t)-n.get(e)}),a={line:0,g:1,text:2};_e(e.node(),function(t,e){return"g"===t.tagName&&"g"===e.tagName?o(t,e):a[t.tagName]-a[e.tagName]})}},ci=[1,2,3,4,5],si=ci.map(function(t){return ze+"line-opacity-"+t}),li=ci.map(function(t){return ze+"line-width-"+t});function fi(t){return si[t-1]||si[4]}function hi(t,e){return t.length<2?"":String.prototype.concat.apply("",t.concat(e.slice().reverse()).map(function(t,e){return(0===e?"":" ")+t.x+","+t.y}))}function di(t,e){if(t.length<2)return"";var n=function(t){var e=t.map(function(t,e){return((e-1)%3==0?"C":"")+t.x+","+t.y+" "});return String.prototype.concat.apply("",e)};return"M"+n(t)+"L"+n(e.slice().reverse())+"Z"}var pi=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},Hr,a),gi={draw:ui.draw,highlight:ui.highlight,highlightDataPoints:ui.highlightDataPoints,addInteraction:ui.addInteraction,_sortElements:ui._sortElements,init:function(t){var e=ui.init(t),n=e.stack;return e.transformRules=[e.flip&&M.get("flip"),e.guide.obsoleteVerticalStackOrder&&M.get("obsoleteVerticalStackOrder"),!n&&M.get("groupOrderByAvg"),Yr(e),n&&M.get("stack")],e.adjustRules=[function(t,n){var r=t.scaleSize.isEmptyScale(),i=Yt(e.guide.size||{},{defMinSize:2,defMaxSize:r?6:40}),o=Object.assign({},n,{defMin:i.defMinSize,defMax:i.defMaxSize,minLimit:i.minSize,maxLimit:i.maxSize});return M.get("adjustStaticSizeScale")(t,o)}],e},buildModel:function(t){var e=ui.baseModel(t),n=this.node().config.guide,r=fi(t.model.scaleColor.domain().length),i=ze+"area area i-role-path "+r+" "+n.cssClass+" ";e.groupAttributes={class:function(t){return i+" "+e.class(t[0])+" frame"}};var o={fill:function(t){return e.color(t[0])},stroke:function(t){var n=e.color(t[0]);return n.length>0&&(n=pi.rgb(n).darker(1)),n}};e.pathAttributesEnterInit=o,e.pathAttributesUpdateDone=o;var a="polyline"===X(n.interpolate);return e.pathElement=a?"polygon":"path",e.anchorShape="vertical-stick",e.pathTween={attr:a?"points":"d",fn:it(0,a?hi:di,[function(n){return{id:t.id(n),x:e.x(n),y:e.y(n)}},function(n){return{id:t.id(n),x:e.x0(n),y:e.y0(n)}}],t.id,n.interpolate)},e},_getBoundsInfo:function(t){if(0===t.length)return null;var e,n,r=this.node().screenModel,i=this.node().config.flip,o=t.map(function(t){var e=pi.select(t).data()[0];return{node:t,data:e,x:r.x(e),y:r.y(e),y0:r.y0(e),group:r.group(e)}}),a=o.reduce(function(t,e){var n=e.x,r=e.y,i=e.y0;return t.left=Math.min(n,t.left),t.right=Math.max(n,t.right),t.top=Math.min(r,i,t.top),t.bottom=Math.max(r,i,t.bottom),t},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE}),u=Ut(o.map(i?function(t){return t.y}:function(t){return t.x})).sort(function(t,e){return t-e}),c=u.reduce(function(t,e){return t[e]=[],t},{});if(o.forEach(function(t){var e=u.find(i?function(e){return t.y===e}:function(e){return t.x===e});c[e].push(t)}),e=Object.keys(o.reduce(function(t,e){return t[e.group]=!0,t},{})),n=e.reduce(function(t,e,n){return t[e]=n,t},{}),u.forEach(function(t){var r=c[t];if(r.sort(function(t,e){return n[t.group]-n[e.group]}),r.length<e.length)for(var i=0;i<e.length;i++){var o=!1,a=void 0,u=void 0;if(i===r.length?(a=u=0===i?0:r[i-1].y,o=!0):r[i].group!==e[i]&&(a=u=r[i].y0,o=!0),o){var s={x:t,y:a,y0:u,data:null,node:null,group:e[i]};r.splice(i,0,s)}}}),1===u.length)return{bounds:a,tree:{start:u[0],end:u[0],isLeaf:!0,items:{start:c[u[0]],end:c[u[0]]}}};var s=function(t){if(2===t.length){var e=t[0],n=t[1];return{start:e,end:n,isLeaf:!0,items:{start:c[e],end:c[n]}}}var r=t.length%2==0?t.length/2:(t.length-1)/2;return t[r],{start:t[0],end:t[t.length-1],isLeaf:!1,left:s(t.slice(0,r+1)),right:s(t.slice(r))}};return{bounds:a,tree:s(u)}},getClosestElement:function(t,e){if(!this._boundsInfo)return null;var n=this._boundsInfo,r=n.bounds,i=n.tree,o=this.node().config.options.container,a=this.node().config.flip,u=ke(o.node()),c=this.node().config.guide.maxHighlightDistance;if(t<r.left+u.x-c||t>r.right+u.x+c||e<r.top+u.y-c||e>r.bottom+u.y+c)return null;var s=a?e-u.y:t-u.x,l=function t(e){if(e.isLeaf)return e;var n=e.left.end;return t(s<n?e.left:e.right)}(i),f=l.end===l.start?0:(s-l.start)/(l.end-l.start);f<0&&(f=0),f>1&&(f=1);var h,d=(h=l.items.start.reduce(function(t,e){return t[e.group]={start:e,end:null,y:null,y0:null},t},{}),l.items.end.forEach(function(t){void 0!==h[t.group]?h[t.group].end=t:delete h[t.group]}),Object.keys(h).forEach(function(t){var e=h[t];e.end?(e.y=e.start.y+f*(e.end.y-e.start.y),e.y0=e.start.y0+f*(e.end.y0-e.start.y0)):delete h[t]}),Object.keys(h).map(function(t){return h[t]}).map(function(t){return{y:t.y,y0:t.y0,el:f<.5?t.start:t.end}}).filter(function(t){return null!=t.el.data})),p=e-u.y,g=d.filter(function(t){return p>=t.y&&p<=t.y0}),m=(g.length>0?g:d).map(function(t){return t.el}).map(function(n){var r=n.x+u.x,i=n.y+u.y,o=Math.abs(a?e-i:t-r),c=Math.abs(a?t-r:e-i);return{node:n.node,data:n.data,distance:o,secondaryDistance:c,x:r,y:i}});return oi(t,e,m)}},mi={draw:ui.draw,getClosestElement:ui.getClosestElement,highlight:ui.highlight,highlightDataPoints:ui.highlightDataPoints,addInteraction:ui.addInteraction,_getBoundsInfo:ui._getBoundsInfo,_sortElements:ui._sortElements,init:function(t){var e=ui.init(t);return e.transformRules=[e.flip&&M.get("flip")],e.adjustRules=[function(t,n){var r=t.scaleSize.isEmptyScale(),i=Yt(e.guide.size||{},{defMinSize:2,defMaxSize:r?6:40}),o=Object.assign({},n,{defMin:i.defMinSize,defMax:i.defMaxSize,minLimit:i.minSize,maxLimit:i.maxSize});return M.get("adjustStaticSizeScale")(t,o)}],e},buildModel:function(t){var e=ui.baseModel(t),n=this.node().config.guide,r=fi(t.model.scaleColor.domain().length),i=ze+"area area i-role-path "+r+" "+n.cssClass+" ";e.groupAttributes={class:function(t){return i+" "+e.class(t[0])+" frame"}};var o,a,u={fill:function(t){return e.color(t[0])},stroke:function(t){return e.color(t[0])}};return e.pathAttributesEnterInit=u,e.pathAttributesUpdateDone=u,e.pathElement="polygon",e.anchorShape="circle",e.pathTween={attr:"points",fn:it(0,(o=function(t){return t.x},a=function(t){return t.y},function(t){return t.map(function(t){return[o(t),a(t)].join(",")}).join(" ")}),[function(n){return{id:t.id(n),x:e.x(n),y:e.y(n)}}],t.id)},e}};function yi(t){if(t.length<2)return"";for(var e="",n=0;n<t.length;n++)e+=(0===n?"M":" L")+t[n].x+","+t[n].y;return e}function vi(t){if(t.length<4)return"";for(var e="M"+t[0].x+","+t[0].y,n=3;n<t.length;n+=3)e+=" C"+t[n-2].x+","+t[n-2].y+" "+t[n-1].x+","+t[n-1].y+" "+t[n].x+","+t[n].y;return e}var bi={draw:ui.draw,getClosestElement:ui.getClosestElement,highlight:ui.highlight,highlightDataPoints:ui.highlightDataPoints,addInteraction:ui.addInteraction,_getBoundsInfo:ui._getBoundsInfo,_sortElements:ui._sortElements,init:function(t){var e=ui.init(t),n=e.stack;e.guide=Yt(e.guide||{},{avoidScalesOverflow:!0,interpolate:"linear"}),e.transformRules=[e.flip&&M.get("flip"),!n&&M.get("groupOrderByAvg"),Yr(e),n&&M.get("stack")];var r=e.guide.avoidScalesOverflow,i=function(t){return t.scaleSize.isEmptyScale()};return e.adjustRules=[function(t,n){var r=Yt(e.guide.size||{},{defMinSize:2,defMaxSize:i(t)?6:40}),o=Object.assign({},n,{defMin:r.defMinSize,defMax:r.defMaxSize,minLimit:r.minSize,maxLimit:r.maxSize});return M.get("adjustStaticSizeScale")(t,o)},r&&function(t,e){if(i(t))return function(){return{}};var n=Object.assign({},e,{sizeDirection:"xy"});return M.get("avoidScalesOverflow")(t,n)}].filter(function(t){return t}),e},buildModel:function(t){var e,n,r=this.node().config,i=r.guide,o=r.options,a=!t.model.scaleSize.dim,u=a?i.widthCssClass||(e=o.width,n=0,e>=160&&e<320?n=1:e>=320&&e<480?n=2:e>=480&&e<640?n=3:e>=640&&(n=4),li[n]):"",c=fi(t.model.scaleColor.domain().length),s=a?"line":"area",l=""+ze+s+" "+s+" i-role-path "+u+" "+c+" "+i.cssClass+" ",f=a?{stroke:function(t){return d.color(t[0])},class:"i-role-datum"}:{fill:function(t){return d.color(t[0])}},h="cubic"===X(i.interpolate)?a?vi:Xr:a?yi:Gr,d=ui.baseModel(t),p=a?function(e){return{id:t.id(e),x:d.x(e),y:d.y(e)}}:function(e){return{id:t.id(e),x:d.x(e),y:d.y(e),size:d.size(e)}};return d.groupAttributes={class:function(t){return l+" "+d.class(t[0])+" frame"}},d.pathElement="path",d.anchorShape="circle",d.pathAttributesEnterInit=f,d.pathAttributesUpdateDone=f,d.pathTween={attr:"d",fn:it(0,h,[p],t.id,i.interpolate)},d}},_i=function(t){return a.select(t).data()[0]},xi={init:function(t){var e=Object.assign({},t);e.guide=e.guide||{},e.guide=Yt(e.guide,{animationSpeed:0,avoidScalesOverflow:!0,maxHighlightDistance:32,prettify:!0,sortByBarHeight:!0,enableColorToBarPosition:null!=e.guide.enableColorToBarPosition?e.guide.enableColorToBarPosition:!e.stack}),e.guide.size=Yt(e.guide.size||{},{enableDistributeEvenly:!0}),e.guide.label=Yt(e.guide.label||{},{position:e.flip?e.stack?["r-","l+","hide-by-label-height-horizontal","cut-label-horizontal"]:["outside-then-inside-horizontal","auto:hide-on-label-label-overlap"]:e.stack?["rotate-on-size-overflow","t-","b+","hide-by-label-height-vertical","cut-label-vertical","auto:hide-on-label-label-overlap"]:["rotate-on-size-overflow","outside-then-inside-vertical","auto:hide-on-label-label-overlap"]});var n=e.guide.avoidScalesOverflow,r=e.guide.enableColorToBarPosition,i=e.guide.size.enableDistributeEvenly;return e.transformRules=[e.flip&&M.get("flip"),e.guide.obsoleteVerticalStackOrder&&M.get("obsoleteVerticalStackOrder"),e.stack&&M.get("stack"),r&&M.get("positioningByColor")].filter(function(t){return t}),e.adjustRules=[i&&function(t,n){var r=Yt(e.guide.size||{},{defMinSize:e.guide.prettify?3:0,defMaxSize:e.guide.prettify?40:Number.MAX_VALUE}),i=Object.assign({},n,{defMin:r.defMinSize,defMax:r.defMaxSize,minLimit:r.minSize,maxLimit:r.maxSize});return M.get("size_distribute_evenly")(t,i)},n&&i&&function(t,e){var n=Object.assign({},e,{sizeDirection:"x"});return M.get("avoidScalesOverflow")(t,n)},e.stack&&M.get("adjustYScale")].filter(function(t){return t}),e},addInteraction:function(){var t=this,e=this.node();e.on("highlight",function(e,n){return t.highlight(n)}),e.on("data-hover",function(e,n){return t.highlight((r=n.data,function(t){return t===r||null}));var r})},draw:function(){var t=this.node(),e=t.config,n=e.options;n.container=n.slot(e.uid);var r=e.guide.prettify,i="i-role-element i-role-datum bar "+ze+"bar",o=t.screenModel,u=this.buildModel(o,{prettify:r,minBarH:1,minBarW:1,baseCssClass:i}),c=nt,s=e.flip?"y":"x",l=e.flip?"x":"y",f=e.flip?"width":"height",h=e.flip?"height":"width",d=o.toFibers(),p=d.reduce(function(t,e){return t.concat(e)},[]),g=u.class,m=Gt(u,"class"),y=n.container.selectAll(".bar").data(p,o.id);y.exit().classed("tau-removing",!0).call(c(e.guide.animationSpeed,null,((x={})[s]=function(){var t=a.select(this);return t.attr(s)-0+(t.attr(h)-0)/2},x[l]=function(){return this.getAttribute("data-zero")},x[h]=0,x[f]=0,x),function(t){var e=a.select(t);e.classed("tau-removing")&&e.remove()})),y.call(c(e.guide.animationSpeed,null,m));var v=y.enter().append("rect").call(c(e.guide.animationSpeed,(w={},w[l]=o[l+"0"],w[f]=0,w),m)).merge(y).attr("class",g).attr("data-zero",o[l+"0"]);t.subscribe(new zr(o.model,o.model.flip,e.guide.label,n).draw(d));var b,_=(b=p.reduce(function(t,e,n){return t.set(e,n+1),t},new Map),function(t,e){return(b.get(_i(t))||-1)-(b.get(_i(e))||-1)});this._barsSorter=e.guide.sortByBarHeight?e.flip?function(t,e){var n=_i(t),r=_i(e),i=u.width(n),o=u.width(r);if(i===o){var a=u.y(n),c=u.y(r);return a===c?_(t,e):a-c}return o-i}:function(t,e){var n=_i(t),r=_i(e),i=u.height(n),o=u.height(r);if(i===o){var a=u.x(n),c=u.x(r);return a===c?_(t,e):a-c}return o-i}:_;var x,w,M={rect:0,text:1};this._typeSorter=function(t,e){return M[t.tagName]-M[e.tagName]},this._sortElements(this._typeSorter,this._barsSorter),t.subscribe(v),this._boundsInfo=this._getBoundsInfo(v.nodes())},buildModel:function(t,e){var n,r=e.prettify,i=e.minBarH,o=e.minBarW,a=e.baseCssClass,u=function(e){var n=t.size(e);return r&&(n=Math.max(o,n)),n},c=function(e){return e[t.model.scaleY.dim]};if(t.flip){var s=function(e){return Math.abs(t.x(e)-t.x0(e))};n={y:function(e){return t.y(e)-.5*u(e)},x:function(e){var n=Math.min(t.x0(e),t.x(e));if(r){var o=s(e),a=c(e),u=0;return 0===a&&(u=0),a>0&&(u=o),a<0&&(u=0-i),o<i?n+u:n}return n},height:function(t){return u(t)},width:function(t){var e=s(t);return r?0===c(t)?e:Math.max(i,e):e}}}else{var l=function(e){return Math.abs(t.y(e)-t.y0(e))};n={x:function(e){return t.x(e)-.5*u(e)},y:function(e){var n=Math.min(t.y0(e),t.y(e));return r&&(n=l(e)<i&&c(e)>0?n-i:n),n},width:function(t){return u(t)},height:function(t){var e=l(t);return r&&(e=0===c(t)?e:Math.max(i,e)),e}}}return Object.assign(n,{class:function(e){return a+" "+t.class(e)},fill:function(e){return t.color(e)}})},_sortElements:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];_e(this.node().config.options.container.node(),qt.apply(r,t))},_getBoundsInfo:function(t){if(0===t.length)return null;var e=this.node().screenModel,n=this.node().config.flip,r=t.map(function(t){var n=a.select(t).data()[0],r=e.x(n),i=e.x0(n),o=e.y(n),u=e.y0(n),c=Math.abs(r-i),s=Math.abs(o-u),l=(r+i)/2,f=(o+u)/2;return{node:t,data:n,cx:l,cy:f,box:{top:f-s/2,right:l+c/2,bottom:f+s/2,left:l-c/2},invert:o>u}}),i=r.reduce(function(t,e){var n=e.box;return t.left=Math.min(n.left,t.left),t.right=Math.max(n.right,t.right),t.top=Math.min(n.top,t.top),t.bottom=Math.max(n.bottom,t.bottom),t},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE}),o=Ut(r.map(n?function(t){return t.cy}:function(t){return t.cx})).sort(function(t,e){return t-e}),u=o.reduce(function(t,e){return t[e]=[],t},{});r.forEach(function(t){var e=o.find(n?function(e){return t.cy===e}:function(e){return t.cx===e});u[e].push(t)});var c=function(t){if(1===t.length)return u[t];var e=Math.ceil(t.length/2);return{middle:(t[e-1]+t[e])/2,lower:c(t.slice(0,e)),greater:c(t.slice(e))}};return{bounds:i,tree:c(o)}},getClosestElement:function(t,e){if(!this._boundsInfo)return null;var n=this._boundsInfo,r=n.bounds,i=n.tree,o=this.node().config.options.container,a=this.node().config.flip,u=ke(o.node()),c=t-u.x,s=e-u.y,l=this.node().config.guide.maxHighlightDistance;if(c<r.left-l||c>r.right+l||s<r.top-l||s>r.bottom+l)return null;var f=a?s:c,h=a?c:s;return function t(e){return Array.isArray(e)?e:t(f>e.middle?e.greater:e.lower)}(i).map(function(t){var e,n=a?t.box.left:t.box.top,r=a?t.box.right:t.box.bottom,i=(e=h)>=n&&e<=r;if(!i&&Math.abs(h-n)>l&&Math.abs(h-r)>l)return null;var o=Math.abs(h-(t.invert!==a?r:n));return Object.assign(t,{distToValue:o,cursorInside:i})}).filter(function(t){return t}).sort(function(t,e){return t.cursorInside!==e.cursorInside?e.cursorInside-t.cursorInside:Math.abs(t.distToValue)-Math.abs(e.distToValue)}).map(function(t){var e=t.cx,n=t.cy,r=Math.abs(a?s-n:c-e),i=Math.abs(a?c-e:s-n);return{node:t.node,data:t.data,distance:r,secondaryDistance:i,x:e,y:n}})[0]||null},highlight:function(t){var e,n=this.node().config.options.container,r=((e={})["tau-chart__highlighted"]=function(e){return!0===t(e)},e["tau-chart__dimmed"]=function(e){return!1===t(e)},e);n.selectAll(".bar").call(at(r)),n.selectAll(".i-role-label").call(at(r)),this._sortElements(function(e,n){return t(_i(e))-t(_i(n))},this._typeSorter,this._barsSorter)}},wi=n(12),Mi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Si=function(t){function e(e){var n=t.call(this,e)||this;return n.config=e,n.config.guide=Yt(n.config.guide||{},{}),n.on("highlight",function(t,e){return n.highlight(e)}),n}return Mi(e,t),e.prototype.defineGrammarModel=function(t){var e=this.config,n=e.options;this.color=t("color",e.color,{}),this.scalesMap=e.columns.reduce(function(e,r){return e[r]=t("pos",r,[0,n.height]),e},{});var r=n.width/(e.columns.length-1),i=e.columns.reduce(function(t,e,n){return t[e]=n*r,t},{});return this.xBase=function(t){return i[t]},this.regScale("columns",this.scalesMap).regScale("color",this.color),{}},e.prototype.drawFrames=function(t){var e=this.config,n=this.config.options,r=this.scalesMap,i=this.xBase,o=this.color,a=wi.line(),u=function(t){t.attr("d",function(t){return a(e.columns.map(function(e){return[i(e),r[e](t[r[e].dim])]}))})},c=function(t){t.attr("stroke",function(t){return o.toColor(o(t[o.dim]))}),t.attr("class",function(t){return ze+"__line line "+o.toClass(o(t[o.dim]))+" foreground"})},s=function(t){var e=t.selectAll(".background").data(function(t){return t.part()});e.exit().remove(),e.call(u),e.enter().append("path").attr("class","background line").call(u);var n=t.selectAll(".foreground").data(function(t){return t.part()});n.exit().remove(),n.call(function(t){u(t),c(t)}),n.enter().append("path").call(function(t){u(t),c(t)})},l=n.container.selectAll(".lines-frame").data(t,function(t){return t.hash()});l.exit().remove(),l.call(s),l.enter().append("g").attr("class","lines-frame").call(s),this.subscribe(n.container.selectAll(".lines-frame .foreground"))},e.prototype.highlight=function(t){this.config.options.container.selectAll(".lines-frame .foreground").style("visibility",function(e){return t(e)?"":"hidden"})},e}(g),Ti=function(){function t(t,e){var n,r=this;this._fields={},n=Array.isArray(e.fitToFrameByDims)&&e.fitToFrameByDims.length?t.part(function(t){var n={};return"where"===t.type&&t.args?(n.type=t.type,n.args=e.fitToFrameByDims.reduce(function(e,n){return t.args.hasOwnProperty(n)&&(e[n]=t.args[n]),e},{})):n=t,n}):t.full();var i=this.getVarSet(n,e);e.order&&(i=Bt(Wt(e.order,i),i)),this.vars=i;var o=i.map(function(t){return t});this.scaleConfig=e,this.scaleConfig.nice=this.scaleConfig.hasOwnProperty("nice")?this.scaleConfig.nice:this.scaleConfig.autoScale,this.addField("dim",this.scaleConfig.dim).addField("scaleDim",this.scaleConfig.dim).addField("scaleType",this.scaleConfig.type).addField("source",this.scaleConfig.source).addField("domain",function(){return r.vars}).addField("isInteger",o.every(Number.isInteger)).addField("originalSeries",function(){return o}).addField("isContains",function(t){return r.isInDomain(t)}).addField("isEmptyScale",function(){return r.isEmpty()}).addField("fixup",function(t){var e=r.scaleConfig;e.__fixup__=e.__fixup__||{},e.__fixup__=Object.assign(e.__fixup__,t(Object.assign({},e,e.__fixup__)))}).addField("commit",function(){r.scaleConfig=Object.assign(r.scaleConfig,r.scaleConfig.__fixup__),delete r.scaleConfig.__fixup__})}return t.prototype.isInDomain=function(t){return this.domain().indexOf(t)>=0},t.prototype.addField=function(t,e){return this._fields[t]=e,this[t]=e,this},t.prototype.getField=function(t){return this._fields[t]},t.prototype.isEmpty=function(){return!Boolean(this._fields.dim)},t.prototype.toBaseScale=function(t,e){var n=this;void 0===e&&(e=null);var r=Object.keys(this._fields).reduce(function(t,e){return t[e]=n._fields[e],t},t);return r.getHash=function(){return Ot([n.vars,e].map(function(t){return JSON.stringify}).join(""))},r.value=r,r},t.prototype.getVarSet=function(t,e){return Ut(e.hasOwnProperty("series")?e.series:t.map(function(t){return t[e.dim]}),"date"===e.dimType?function(t){return new Date(t).getTime()}:function(t){return t})},t}(),Ei=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ki=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._references=n.references,r._refCounter=n.refCounter,r.addField("scaleType","identity"),r}return Ei(e,t),e.prototype.create=function(){var t=this._references,e=this._refCounter;return this.toBaseScale(function(n,r){if(null==n){var i=t.get(r);null==i&&(i=e(),t.set(r,i))}else i=n;return i})},e}(Ti),Ai=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oi=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},u,c),Ci=function(t){function e(e,n){var r=t.call(this,e,n)||this,i="measure"!==n.dimType,o=r.scaleConfig.brewer||(i?Rt(20).map(function(t){return"color20-"+(1+t)}):["#eee","#000"]),a=r.scaleConfig;if(!i){var u=Oi.extent(r.vars),c=function(t){return Number.isFinite(t)||Mt(t)},s=c(a.min)?a.min:u[0],l=c(a.max)?a.max:u[1],f=[s,u[0]].filter(c),h=[l,u[1]].filter(c);if(u=[f.sort(function(t,e){return t-e})[0],h.sort(function(t,e){return e-t})[0]],a.nice&&u[0]<0&&u[1]>0){var d=Math.max.apply(Math,u.map(Math.abs));u=[-d,d]}r.vars=u}return r.addField("scaleType","color").addField("discrete",i).addField("brewer",o).addField("toColor",Lt).addField("toClass",Ft),r}return Ai(e,t),e.prototype.create=function(){var t=this.discrete,e=this.vars,n=this.getField("brewer"),r=t?this.createDiscreteScale(e,n):this.createContinuesScale(e,n);return this.toBaseScale(r)},e.prototype.createDiscreteScale=function(t,e){var n,r=function(t,e){var n=t.map(function(t){return String(t).toString()});return Oi.scaleOrdinal().range(e).domain(n)},i=function(t){return function(e){return t(String(e).toString())}};if(Array.isArray(e))n=i(r(t,e));else if("function"==typeof e)n=function(n){return e(n,i(r(t,Rt(20).map(function(t){return"color20-"+(1+t)}))))};else{if(!St(e))throw new Error("This brewer is not supported");n=function(t,e){var n=Object.keys(t),r=n.map(function(e){return t[e]}),i=Oi.scaleOrdinal().range(r).domain(n);return function(e){return t.hasOwnProperty(e)?i(String(e)):"color-default"}}(e)}return n},e.prototype.createContinuesScale=function(t,e){if(!Array.isArray(e))throw new Error("This brewer is not supported");return Oi.scaleLinear().domain(Pt(t.map(function(t){return t-0}),e.length)).range(e)},e}(Ti),Ni=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ji={sqrt:function(t){return Math.sqrt(t)},linear:function(t){return t}},Pi=function(t){function e(e,n){var r=t.call(this,e,n)||this,i=r.scaleConfig,o=u.extent(r.vars),a=Number.isFinite(i.min)?i.min:o[0],c=Number.isFinite(i.max)?i.max:o[1];return r.vars=[Math.min.apply(Math,[a,o[0]].filter(Number.isFinite)),Math.max.apply(Math,[c,o[1]].filter(Number.isFinite))],r.addField("scaleType","size"),r.addField("funcType",n.func||"sqrt"),r}return Ni(e,t),e.prototype.isInDomain=function(t){var e=this.domain().sort(),n=e[0],r=e[e.length-1];return!Number.isNaN(n)&&!Number.isNaN(r)&&t<=r&&t>=n},e.prototype.create=function(){var t,e=this.scaleConfig,n=this.vars,r=Yt({},e,{func:"sqrt",minSize:0,maxSize:1}),i=r.func,o=r.minSize,a=r.maxSize,u=ji[i],c=n.filter(function(t){return Number.isFinite(Number(t))});if(0===c.length)t=function(){return a};else{var s,l,f=Math.min.apply(Math,c),h=Math.max.apply(Math,c),d=u(Math.max(Math.abs(f),Math.abs(h),h-f));l=f<0?f:0,s=0===d?1:(a-o)/d,t=function(t){var e=null!==t?parseFloat(t):0;return Number.isFinite(e)?o+u(e-l)*s:a}}return this.toBaseScale(t)},e}(Ti),Li=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fi=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.addField("scaleType","ordinal").addField("discrete",!0),r}return Li(e,t),e.prototype.create=function(t){var e=this.scaleConfig,n=this.vars,r=c.scalePoint().domain(n).range(t).padding(.5),i=Math.max.apply(Math,t),o=function(t){return"function"==typeof e.ratio?e.ratio(t,i,n):"object"==typeof e.ratio?e.ratio[t]:1/n.length},a=function(t){return e.ratio?i-n.slice(n.indexOf(t)+1).reduce(function(t,e){return t+i*o(e)},i*o(t)*.5):r(t)};return Object.keys(r).forEach(function(t){return a[t]=r[t]}),a.stepSize=function(t){return o(t)*i},this.toBaseScale(a,t)},e}(Ti),Di=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zi=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},u,c),Ri=function(t){function e(e,n){var r=t.call(this,e,n)||this,i=r.scaleConfig,o=r.vars,a=zi.extent(o),u=null===i.min||void 0===i.min?a[0]:new Date(i.min).getTime(),c=null===i.max||void 0===i.max?a[1]:new Date(i.max).getTime(),s=[new Date(Math.min(u,a[0])),new Date(Math.max(c,a[1]))],l=v.get(i.period,{utc:i.utcTime});return i.fitToFrameByDims||null===l?r.vars=Ut(o.map(function(t){return new Date(t)}),function(t){return t.getTime()}).sort(function(t,e){return Number(e)-Number(t)}):r.vars=v.generate(s[0],s[1],i.period,{utc:i.utcTime}),r.periodGenerator=l,r.addField("scaleType","period").addField("utcTime",r.scaleConfig.utcTime).addField("period",r.scaleConfig.period).addField("discrete",!0),r}return Di(e,t),e.prototype.isInDomain=function(t){var e=this.periodGenerator,n=new Date(t),r=(e?e.cast(n):n).getTime();return this.domain().map(function(t){return t.getTime()}).indexOf(r)>=0},e.prototype.create=function(t){var e=this.periodGenerator,n=this.vars,r=this.vars.map(function(t){return t.getTime()}),i=this.scaleConfig,o=zi.scalePoint().domain(n).range(t).padding(.5),a=zi.scalePoint().domain(r.map(String)).range(t).padding(.5),u=Math.max.apply(Math,t),c=function(t){var e=new Date(t).getTime();return"function"==typeof i.ratio?i.ratio(e,u,r):"object"==typeof i.ratio?i.ratio[e]:1/n.length},s=function(t){var n=new Date(t),o=(e?e.cast(n):n).getTime();return i.ratio?u-r.slice(r.indexOf(o)+1).reduce(function(t,e){return t+u*c(e)},u*c(t)*.5):a(String(o))};return Object.keys(o).forEach(function(t){return s[t]=o[t]}),s.stepSize=function(t){return c(t)*u},this.toBaseScale(s,t)},e}(Ti),Ii=n(11),Ui=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hi=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},u,c,Ii),Bi=function(t){function e(e,n){var r,i=t.call(this,e,n)||this,o=i.scaleConfig,a=i.vars,u=o.period?v.get(i.scaleConfig.period,{utc:o.utcTime}):null,c=Hi.extent(a).map(u?function(t){return u.cast(new Date(t))}:function(t){return new Date(t)}),s=null==o.min?c[0]:new Date(o.min).getTime(),l=null==o.max?c[1]:new Date(o.max).getTime();if(a=[new Date(Math.min(s,Number(c[0]))),new Date(Math.max(l,Number(c[1])))],i.niceIntervalFn=null,o.nice&&!u){var f=o.niceInterval,h=f&&Wi(f)?o.utcTime?Hi["utc"+(r=f)[0].toUpperCase()+r.slice(1)]:Wi(f):null;i.niceIntervalFn=h||null,i.vars=Et(a,i.niceIntervalFn,{utc:o.utcTime})}else i.vars=a;if(u&&Number(i.vars[0])===Number(i.vars[1])){var d=i.vars[0];i.vars[0]=u.cast(new Date(Number(d)-1)),i.vars[1]=u.next(d)}return i.periodGenerator=u,i.addField("scaleType","time").addField("utcTime",i.scaleConfig.utcTime).addField("period",i.scaleConfig.period),i}return Ui(e,t),e.prototype.isInDomain=function(t){var e=new Date(t);this.scaleConfig.period&&(e=this.periodGenerator.cast(e));var n=this.domain(),r=n[0],i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&e<=i&&e>=r},e.prototype.create=function(t){var e=this,n=this.vars,r=this.scaleConfig.utcTime,i=this.periodGenerator,o=(r?Hi.scaleUtc:Hi.scaleTime)().domain(n).range(t),a=function(t){var e=n[0],r=n[1];return t>r&&(t=r),t<e&&(t=e),o(new Date(t))};if(this.scaleConfig.period){var u=n[0],c=n[1];o.ticks,o.ticks=function(t){return"number"!=typeof t&&(t=10),function(t,e,n,r){void 0===r&&(r=10);var i=t[0],o=t[1],a=v.get(e,{utc:n}),u=Number(i),c=Number(o),s=Number(a.next(a.cast(i)))-Number(a.cast(i));return(c-u)/s<=r?v.generate(i,o,e,{utc:n}).filter(function(t){return t>=i&&t<=o}):function(t,e,n){void 0===n&&(n=10);var r,i,o=Number(t[0]),a=Number(t[1]),u=Math.abs(a-o)/n,c=Hi.bisector(function(t){return t.duration}).right(Xi,u);if(c===Xi.length)r=e?Hi.utcYear:Hi.timeYear,i=Hi.tickStep(o/Gi.year.duration,a/Gi.year.duration,n);else if(c){var s=u/Xi[c-1].duration,l=Xi[c].duration/u,f=Xi[s<l?c-1:c];r=e?f.time.utc:f.time.interval,i=f.step}else r=e?Hi.utcMillisecond:Hi.timeMillisecond,i=Hi.tickStep(o,a,n);return r.every(i).range(new Date(o),new Date(a+1))}(t,n,r)}([u,c],e.scaleConfig.period,r,t)};for(var s=i.cast(u);s<u;)s=i.next(s);var l=i.cast(c);a=function(t){var e=i.cast(t);return e<s&&(e=s),e>l&&(e=l),o(e)}}return Object.keys(o).forEach(function(t){return a[t]=o[t]}),a.stepSize=function(){return 0},this.toBaseScale(a,t)},e}(Ti);function Wi(t){return Hi["time"+t[0].toUpperCase()+t.slice(1)]}var Yi,Gi={second:{duration:1e3,interval:Hi.timeSecond,utc:Hi.utcSecond},minute:{duration:6e4,interval:Hi.timeMinute,utc:Hi.utcMinute},hour:{duration:36e5,interval:Hi.timeHour,utc:Hi.utcHour},day:{duration:864e5,interval:Hi.timeDay,utc:Hi.utcDay},week:{duration:6048e5,interval:Hi.timeWeek,utc:Hi.utcWeek},month:{duration:2592e6,interval:Hi.timeMonth,utc:Hi.utcMonth},year:{duration:31536e6,interval:Hi.timeYear,utc:Hi.utcYear}},Xi=[(Yi=function(t,e){return{time:t,step:e,duration:e*t.duration}})(Gi.second,1),Yi(Gi.second,5),Yi(Gi.second,15),Yi(Gi.second,30),Yi(Gi.minute,1),Yi(Gi.minute,5),Yi(Gi.minute,15),Yi(Gi.minute,30),Yi(Gi.hour,1),Yi(Gi.hour,3),Yi(Gi.hour,6),Yi(Gi.hour,12),Yi(Gi.day,1),Yi(Gi.day,2),Yi(Gi.week,1),Yi(Gi.month,1),Yi(Gi.month,3),Yi(Gi.year,1)],qi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vi=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},u,c),$i=function(t){function e(e,n){var r=t.call(this,e,n)||this,i=r.scaleConfig,o=Vi.extent(r.vars),a=Number.isFinite(i.min)?i.min:o[0],u=Number.isFinite(i.max)?i.max:o[1];if(o=[Math.min.apply(Math,[a,o[0]].filter(Number.isFinite)),Math.max.apply(Math,[u,o[1]].filter(Number.isFinite))],r.vars=i.nice?Tt(o):Vi.extent(o),r.vars[0]===r.vars[1]){var c=Math.pow(10,Math.floor(Math.log(r.vars[0])/Math.LN10));r.vars[0]-=c,r.vars[1]+=c||10}return r.addField("scaleType","linear").addField("discrete",!1),r}return qi(e,t),e.prototype.isInDomain=function(t){var e=this.domain(),n=e[0],r=e[e.length-1];return!Number.isNaN(n)&&!Number.isNaN(r)&&t<=r&&t>=n},e.prototype.create=function(t){var e=this.vars,n=this.extendScale(Vi.scaleLinear());return n.domain(e).range(t).clamp(!0),this.toBaseScale(n,t)},e.prototype.extendScale=function(t){var e=this,n=t.copy,r=t.ticks;return Object.assign(t,{stepSize:function(){return 0},copy:function(){return e.extendScale(n.call(t))},ticks:this.getField("isInteger")?function(e){return r.call(t,e).filter(Number.isInteger)}:t.ticks}),t},e}(Ti),Zi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ji=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},u,c),Qi=function(t){function e(e,n){var r=t.call(this,e,n)||this,i=r.scaleConfig,o=Ji.extent(r.vars),a=Number.isFinite(i.min)?i.min:o[0],u=Number.isFinite(i.max)?i.max:o[1];return to(o=[Math.min.apply(Math,[a,o[0]].filter(Number.isFinite)),Math.max.apply(Math,[u,o[1]].filter(Number.isFinite))]),i.nice&&(o=function(t){var e=t[0]>0,n=t.map(function(t){return Math.abs(t)}),r=Math.max.apply(Math,n),i=Math.min.apply(Math,n).toExponential().split("e"),o=r.toExponential().split("e"),a=parseFloat(Math.floor(Number(i[0]))+"e"+i[1]),u=parseFloat(Math.ceil(Number(o[0]))+"e"+o[1]);return e?[a,u]:[-u,-a]}(o)),r.vars=o,r.addField("scaleType","logarithmic").addField("discrete",!1),r}return Zi(e,t),e.prototype.isInDomain=function(t){var e=this.domain(),n=e[0],r=e[e.length-1];return!Number.isNaN(n)&&!Number.isNaN(r)&&t<=r&&t>=n},e.prototype.create=function(t){var e=this.vars;to(e);var n=function t(e){var n=e.copy;return e.ticks=function(t){for(var n=[],r=Ji.extent(e.domain()),i=Math.floor(Ki(r[0])),o=Math.ceil(Ki(r[1])),a=Math.ceil(10*(o-i)/(10*Math.ceil(t/10))),u=i;u<=o;u+=a)for(var c=1;c<=10;c++){var s=Math.pow(c,a)*Math.pow(10,u);(s=parseFloat(s.toExponential(0)))>=r[0]&&s<=r[1]&&n.push(s)}return n},e.copy=function(){var r=n.call(e);return t(r),r},e}(Ji.scaleLog()).domain(e).range(t);return n.stepSize=function(){return 0},this.toBaseScale(n,t)},e}(Ti);function Ki(t){return Math.log(t)/Math.LN10}function to(t){if(t[0]*t[1]<=0)throw new _("Logarithmic scale domain cannot cross zero.",x.INVALID_LOG_DOMAIN)}var eo,no=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ro=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.addField("scaleType","value").addField("georole",n.georole),r}return no(e,t),e.prototype.create=function(){return this.toBaseScale(function(t){return t})},e}(Ti),io=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oo=(Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t})({},u,c),ao=function(t){function e(e,n){var r=t.call(this,e,n)||this,i=r.scaleConfig,o=oo.extent(r.vars),a=Number.isFinite(i.min)?i.min:o[0],u=Number.isFinite(i.max)?i.max:o[1];o=[Math.min(a,o[0]),Math.max(u,o[1])],r.vars=i.nice?Tt(o):oo.extent(o);var c=Rt(10).map(function(t){return"rgba(90,180,90,"+(.2+t*(.8/9)).toFixed(2)+")"}),s=i.brewer||c;return r.addField("scaleType","fill").addField("brewer",s),r}return io(e,t),e.prototype.isInDomain=function(t){var e=this.domain(),n=e[0],r=e[e.length-1];return!Number.isNaN(n)&&!Number.isNaN(r)&&t<=r&&t>=n},e.prototype.create=function(){var t=this.vars,e=this.getField("brewer");if(!Array.isArray(e))throw new Error("This brewer is not supported");var n=e.length,r=(t[1]-t[0])/n,i=Rt(n-1).map(function(t){return t+1}).reduce(function(e,n){return e.concat([t[0]+n*r])},[]),o=oo.scaleThreshold().domain(i).range(e);return this.toBaseScale(o)},e}(Ti),uo=function(t){return t||null},co=function(t,e){return void 0===e&&(e=null),Array.isArray(t)?0===t.length?[e]:t:[t]},so=function(t,e){return{type:t,x:e.x,y:e.y,identity:e.identity,size:e.size,color:e.color,split:e.split,label:e.label,guide:{color:e.colorGuide,obsoleteVerticalStackOrder:e.obsoleteVerticalStackOrder,size:e.sizeGuide},flip:e.flip,stack:e.stack}},lo={SUCCESS:"SUCCESS",WARNING:"WARNING",FAIL:"FAIL"},fo=((eo={})[lo.SUCCESS]=function(t){return t},eo[lo.FAIL]=function(t,e){throw new Error((e.messages||[]).join("\n")||["This configuration is not supported,","See https://api.taucharts.com/basic/facet.html#easy-approach-for-creating-facet-chart"].join(" "))},eo[lo.WARNING]=function(t,e,n){var r=e.axis,i=e.indexMeasureAxis[0],o=t[i],a=t.filter(function(t){return t!==o});a.push(o);var u=n[i][r]||{},c=n[n.length-1][r]||{};return n[n.length-1][r]=u,n[i][r]=c,a},eo);function ho(t,e,n){return e.reduce(function(e,r,i){var o=t[r];return o?e.status!=lo.FAIL&&("measure"===o.type&&(e.countMeasureAxis++,e.indexMeasureAxis.push(i)),"measure"!==o.type&&1===e.countMeasureAxis?e.status=lo.WARNING:e.countMeasureAxis>1&&(e.status=lo.FAIL,e.messages.push('There is more than one measure dimension for "'+n+'" axis'))):(e.status=lo.FAIL,r?e.messages.push('"'+r+'" dimension is undefined for "'+n+'" axis'):e.messages.push('"'+n+'" axis should be specified')),e},{status:lo.SUCCESS,countMeasureAxis:0,indexMeasureAxis:[],messages:[],axis:n})}function po(t){for(var e=co(t.x),n=co(t.y),r=Math.max(e.length,n.length),i=co(t.guide||{},{}),o=r-i.length,a=0;a<o;a++)i.push({});i=i.slice(0,r);var u=ho(t.dimensions,e,"x"),c=ho(t.dimensions,n,"y");e=fo[u.status](e,u,i),n=fo[c.status](n,c,i);var s=["identity","color","size","label","split"].reduce(function(e,n){var r=t[n],i=function(t,e,n){return e}(t.dimensions,r);return null!=i&&(e[n]=i),e},{});return Object.assign({},t,{x:e,y:n,guide:i},s)}function go(t,e){for(var n=e.x,r=e.y,i=e.guide,o=Math.max(n.length,r.length),a={type:"COORDS.RECT",unit:[]},u=[].concat(n),c=[].concat(r),s=[].concat(i),l=o;l>0;l--){var f=u.pop(),h=c.pop(),d=s.pop()||{};l===o?(a.x=f,a.y=h,a.unit.push(so(t,{x:uo(f),y:uo(h),identity:e.identity,split:e.split,color:e.color,label:e.label,size:e.size,flip:e.flip,stack:e.stack,colorGuide:d.color,obsoleteVerticalStackOrder:d.obsoleteVerticalStackOrder,sizeGuide:d.size})),a.guide=Yt(d,{x:{label:f},y:{label:h}})):a={type:"COORDS.RECT",x:uo(f),y:uo(h),unit:[a],guide:Yt(d,{x:{label:f},y:{label:h}})}}return e.spec={dimensions:e.dimensions,unit:a},e}var mo=function(t){var e,n,r,i=po(t);return n=((e=i).flip?e.y:e.x).indexOf(e.color)>=0,r=e.guide[e.guide.length-1],n&&!r.hasOwnProperty("enableColorToBarPosition")&&(r.enableColorToBarPosition=!1),go("ELEMENT.INTERVAL",i=e)},yo=function(t){var e=po(t),n=e.data,r=e.settings.log,i=(0,{horizontal:function(t){return{prop:t.x[t.x.length-1],flip:!1}},vertical:function(t){return{prop:t.y[t.y.length-1],flip:!0}},auto:function(t){var e,i=t.x,o=t.y,a=i[i.length-1],u=i.slice(0,i.length-1),c=o[o.length-1],s=o.slice(0,o.length-1),l=t.color,f=u.concat(s).concat([l]).filter(function(t){return null!==t}),h=-1,d=[[[a].concat(f),c],[[c].concat(f),a]],p=null;return d.some(function(t,e){var i=t[0],o=t[1],a=Qe(n,i,[o]);return a.result?h=e:r(["Attempt to find a functional relation between",t[0]+" and "+t[1]+" is failed.","There are several "+a.error.keyY+" values (e.g. "+a.error.errY.join(",")+")","for ("+a.error.keyX+" = "+a.error.valX+")."].join(" ")),a.result})?(e=d[h][0][0],p=0!==h):(r("All attempts are failed. Gonna transform AREA to general PATH."),e=null),{prop:e,flip:p}}}["boolean"!=typeof e.flip?"auto":e.flip?"vertical":"horizontal"])(e);return null!==i.prop&&(e.data=Ke(n,i.prop,e.dimensions[i.prop]),e.flip=i.flip),go("ELEMENT.AREA",e)},vo=function(){function t(t){this.unitRef=t}return t.prototype.value=function(){return this.unitRef},t.prototype.clone=function(){return JSON.parse(JSON.stringify(this.unitRef))},t.prototype.traverse=function(t){var e=function(t,n,r){n(t,r),(t.units||[]).map(function(r){return e(r,n,t)})};return e(this.unitRef,t,null),this},t.prototype.reduce=function(t,e){var n=e;return this.traverse(function(e,r){return n=t(n,e,r)}),n},t.prototype.addFrame=function(t){return this.unitRef.frames=this.unitRef.frames||[],t.key.__layerid__=["L",(new Date).getTime(),this.unitRef.frames.length].join(""),t.source=t.hasOwnProperty("source")?t.source:this.unitRef.expression.source,t.pipe=t.pipe||[],this.unitRef.frames.push(t),this},t.prototype.addTransformation=function(t,e){return this.unitRef.transformation=this.unitRef.transformation||[],this.unitRef.transformation.push({type:t,args:e}),this},t.prototype.isCoordinates=function(){return 0===(this.unitRef.type||"").toUpperCase().indexOf("COORDS.")},t.prototype.isElementOf=function(t){if(this.isCoordinates())return!1;var e=(this.unitRef.type||"").split("/");return 1===e.length&&e.unshift("RECT"),e[0].toUpperCase()===t.toUpperCase()},t}(),bo=function(){function t(t){this.specRef=t}return t.prototype.value=function(){return this.specRef},t.prototype.unit=function(t){return t&&(this.specRef.unit=t),new vo(this.specRef.unit)},t.prototype.addTransformation=function(t,e){return this.specRef.transformations=this.specRef.transformations||{},this.specRef.transformations[t]=e,this},t.prototype.getSettings=function(t){return this.specRef.settings[t]},t.prototype.setSettings=function(t,e){return this.specRef.settings=this.specRef.settings||{},this.specRef.settings[t]=e,this},t.prototype.getScale=function(t){return this.specRef.scales[t]},t.prototype.addScale=function(t,e){return this.specRef.scales[t]=e,this},t.prototype.regSource=function(t,e){return this.specRef.sources[t]=e,this},t.prototype.getSourceData=function(t){return(this.specRef.sources[t]||{data:[]}).data},t.prototype.getSourceDim=function(t,e){return(this.specRef.sources[t]||{dims:{}}).dims[e]||{}},t}(),_o={},xo=function(){function t(){}return t.unit=function(t){return new vo(t)},t.spec=function(t){return new bo(t)},t.cloneObject=function(t){return JSON.parse(JSON.stringify(t))},t.depthFirstSearch=function(e,n){if(n(e))return e;for(var r=e.hasOwnProperty("frames")?e.frames:[{units:e.units}],i=0;i<r.length;i++)for(var o=r[i].units||[],a=0;a<o.length;a++){var u=t.depthFirstSearch(o[a],n);if(u)return u}},t.traverseSpec=function(t,e){var n=function(t,e,r){e(t,r),(t.units||[]).map(function(r){return n(r,e,t)})};n(t.unit,e,null)},t.extractFieldsFormatInfo=function(e){var n=e.scales,r=function(t){return!n[t].dim},i=function(t,e,r){var i=e.guide||{},o=n[e[r]],a=i[r]||{};t[o.dim]=t[o.dim]||{label:[],format:[],nullAlias:[],tickLabel:[]};var u=a.label,c=a.label||{};t[o.dim].label.push("string"==typeof u?u:c._original_text||c.text);var s=a.tickFormat||a.tickPeriod;t[o.dim].format.push(s),t[o.dim].nullAlias.push(a.tickFormatNullAlias),t[o.dim].tickLabel.push(a.tickLabel)},o=[];t.traverseSpec(e,function(t){o.push(t)});var a=o.reduce(function(t,e){return"COORDS.RECT"===e.type&&e.hasOwnProperty("x")&&!r(e.x)&&i(t,e,"x"),"COORDS.RECT"===e.type&&e.hasOwnProperty("y")&&!r(e.y)&&i(t,e,"y"),e.hasOwnProperty("color")&&!r(e.color)&&i(t,e,"color"),e.hasOwnProperty("size")&&!r(e.size)&&i(t,e,"size"),e.hasOwnProperty("label")&&!r(e.label)&&i(t,e,"label"),t},{}),u=function(t,e){return t.filter(function(t){return t})[0]||e};return Object.keys(a).reduce(function(t,n){t[n]={},t[n].label=u(a[n].label,n);var r=u(a[n].format,null);t[n].nullAlias=u(a[n].nullAlias,"No "+t[n].label),t[n].tickLabel=u(a[n].tickLabel,null);var i="x-time-auto"===r?e.settings.utcTime?"day-utc":"day":r,o=t[n].nullAlias,c=i?hn.get(i,o):function(t){return null==t?o:String(t)};if(t[n].format=c,t[n].tickLabel){var s=n.replace("."+t[n].tickLabel,"");t[s]={label:t[n].label,nullAlias:t[n].nullAlias,tickLabel:t[n].tickLabel,format:function(e){return c(e&&e[t[s].tickLabel])},isComplexField:!0},t[n].parentField=s}return t},{})},t.getFieldFormatters=function(e,n){var r=t.extractFieldsFormatInfo(e);return Object.keys(r).forEach(function(t){r[t].parentField&&delete r[t]}),Object.keys(n).forEach(function(t){var e,i,o=(e=n[t],i={},"function"==typeof e||"string"==typeof e?i={format:e}:St(e)&&(i=Vt(e,"label","format","nullAlias")),i);r[t]=Object.assign({label:t,nullAlias:"No "+t},r[t]||{},Vt(o,"label","nullAlias")),o.hasOwnProperty("format")?r[t].format="function"==typeof o.format?o.format:hn.get(o.format,r[t].nullAlias):r[t].format=r[t].hasOwnProperty("format")?r[t].format:hn.get(null,r[t].nullAlias)}),Object.keys(r).reduce(function(t,e){var n=r[e];return t[e]={label:n.label,format:n.format},t},{})},t.tokens=function(){return{reg:function(t,e){return _o[t]=e,this},get:function(t){return _o[t]||t}}},t.getParentUnit=function(t,e){var n=null,r=function(t,i){return t.uid===e.uid?(n=i,!0):(t.frames?t.frames.some(function(e){return(e.units||[]).some(function(e){return r(e,t)})}):(t.units||[]).some(function(e){return r(e,t)}),!1)};return r(t.unit,null),n},t}();n(17),n.d(e,"api",function(){return So}),n.d(e,"version",function(){return Eo}),n.d(e,"GPL",function(){return De}),n.d(e,"Plot",function(){return Wn}),n.d(e,"Chart",function(){return $n});var wo={},Mo={},So={errorCodes:x,unitsRegistry:qe,scalesRegistry:Ze,grammarRegistry:M,tickFormat:hn,isChartElement:ie,utils:r,svgUtils:o,domUtils:i,tickPeriod:v,colorBrewers:{add:function(t,e){wo.hasOwnProperty(t)||(wo[t]=e)},get:function(t){return wo[t]}},d3_animationInterceptor:nt,pluginsSDK:xo,plugins:{add:function(t,e){if(Mo.hasOwnProperty(t))throw new Error("Plugin is already registered.");Mo[t]=e},get:function(t){return Mo[t]||function(e){throw new Error('"'+t+'" plugin is not defined')}}},chartTypesRegistry:qn,globalSettings:{animationSpeed:750,renderingTimeout:1e4,asyncRendering:!0,syncRenderingInterval:50,syncPointerEvents:!1,handleRenderingErrors:!1,experimentalShouldAnimate:function(t){var e=function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return Object.keys(e).forEach(function(t){return n.setAttribute(t,String(e[t]))}),n},n=document.createElement("div");n.style.position="absolute",n.style.visibility="hidden",document.body.appendChild(n);var r=e("svg",{width:100,height:100});n.appendChild(r);var i,o,a,u=performance.now();for(i=0;i<10;i++)for(o=0;o<10;o++)a=e("circle",{fill:"black",r:5,cx:10*i,cy:10*o}),r.appendChild(a);var c=performance.now()-u;return document.body.removeChild(n),t.sources["/"].data.length*c<500},defaultNiceColor:!0,defaultColorBrewer:["#fde725","#fbe723","#f8e621","#f6e620","#f4e61e","#f1e51d","#efe51c","#ece51b","#eae51a","#e7e419","#e5e419","#e2e418","#dfe318","#dde318","#dae319","#d8e219","#d5e21a","#d2e21b","#d0e11c","#cde11d","#cae11f","#c8e020","#c5e021","#c2df23","#c0df25","#bddf26","#bade28","#b8de29","#b5de2b","#b2dd2d","#b0dd2f","#addc30","#aadc32","#a8db34","#a5db36","#a2da37","#a0da39","#9dd93b","#9bd93c","#98d83e","#95d840","#93d741","#90d743","#8ed645","#8bd646","#89d548","#86d549","#84d44b","#81d34d","#7fd34e","#7cd250","#7ad151","#77d153","#75d054","#73d056","#70cf57","#6ece58","#6ccd5a","#69cd5b","#67cc5c","#65cb5e","#63cb5f","#60ca60","#5ec962","#5cc863","#5ac864","#58c765","#56c667","#54c568","#52c569","#50c46a","#4ec36b","#4cc26c","#4ac16d","#48c16e","#46c06f","#44bf70","#42be71","#40bd72","#3fbc73","#3dbc74","#3bbb75","#3aba76","#38b977","#37b878","#35b779","#34b679","#32b67a","#31b57b","#2fb47c","#2eb37c","#2db27d","#2cb17e","#2ab07f","#29af7f","#28ae80","#27ad81","#26ad81","#25ac82","#25ab82","#24aa83","#23a983","#22a884","#22a785","#21a685","#21a585","#20a486","#20a386","#1fa287","#1fa187","#1fa188","#1fa088","#1f9f88","#1f9e89","#1e9d89","#1e9c89","#1e9b8a","#1f9a8a","#1f998a","#1f988b","#1f978b","#1f968b","#1f958b","#1f948c","#20938c","#20928c","#20928c","#21918c","#21908d","#218f8d","#218e8d","#228d8d","#228c8d","#228b8d","#238a8d","#23898e","#23888e","#24878e","#24868e","#25858e","#25848e","#25838e","#26828e","#26828e","#26818e","#27808e","#277f8e","#277e8e","#287d8e","#287c8e","#297b8e","#297a8e","#29798e","#2a788e","#2a778e","#2a768e","#2b758e","#2b748e","#2c738e","#2c728e","#2c718e","#2d718e","#2d708e","#2e6f8e","#2e6e8e","#2e6d8e","#2f6c8e","#2f6b8e","#306a8e","#30698e","#31688e","#31678e","#31668e","#32658e","#32648e","#33638d","#33628d","#34618d","#34608d","#355f8d","#355e8d","#365d8d","#365c8d","#375b8d","#375a8c","#38598c","#38588c","#39568c","#39558c","#3a548c","#3a538b","#3b528b","#3b518b","#3c508b","#3c4f8a","#3d4e8a","#3d4d8a","#3e4c8a","#3e4a89","#3e4989","#3f4889","#3f4788","#404688","#404588","#414487","#414287","#424186","#424086","#423f85","#433e85","#433d84","#443b84","#443a83","#443983","#453882","#453781","#453581","#463480","#46337f","#46327e","#46307e","#472f7d","#472e7c","#472d7b","#472c7a","#472a7a","#482979","#482878","#482677","#482576","#482475","#482374","#482173","#482071","#481f70","#481d6f","#481c6e","#481b6d","#481a6c","#48186a","#481769","#481668","#481467","#471365","#471164","#471063","#470e61","#470d60","#460b5e","#460a5d","#46085c","#46075a","#450559","#450457","#440256","#440154"],defaultClassBrewer:Rt(20).map(function(t){return"color20-"+(1+t)}),log:function(t,e){e=e||"INFO",Array.isArray(t)||(t=[t]),console[e.toLowerCase()].apply(console,t)},facetLabelDelimiter:"  ",excludeNull:!0,minChartWidth:300,minChartHeight:200,minFacetWidth:150,minFacetHeight:100,specEngine:[{name:"COMPACT",width:600,height:400},{name:"AUTO",width:Number.MAX_VALUE,height:Number.MAX_VALUE}],fitModel:"normal",layoutEngine:"EXTRACT",autoRatio:!0,defaultSourceMap:["https://raw.githubusercontent.com","TargetProcess/tauCharts/master/src/addons","world-countries.json"].join("/"),getAxisTickLabelSize:Xt(pe,function(t){return String(String(t).length)}),getScrollbarSize:se,avoidScrollAtRatio:1.5,xAxisTickLabelLimit:150,yAxisTickLabelLimit:150,xTickWordWrapLinesLimit:2,yTickWordWrapLinesLimit:2,xTickWidth:9,yTickWidth:9,distToXAxisLabel:10,distToYAxisLabel:10,xAxisPadding:20,yAxisPadding:20,xFontLabelDescenderLineHeight:4,xFontLabelHeight:10,yFontLabelHeight:10,xDensityPadding:2,yDensityPadding:2,"xDensityPadding:measure":8,"yDensityPadding:measure":8,utcTime:!1,defaultFormats:{measure:"x-num-auto","measure:time":"x-time-auto"}}};Wn.__api__=So,Wn.globalSettings=So.globalSettings,So.unitsRegistry.reg("COORDS.RECT",ar).reg("COORDS.MAP",br).reg("COORDS.PARALLEL",fr).reg("ELEMENT.GENERIC.CARTESIAN",ct).reg("ELEMENT.POINT",Ur,"ELEMENT.GENERIC.CARTESIAN").reg("ELEMENT.LINE",bi,"ELEMENT.GENERIC.CARTESIAN").reg("ELEMENT.PATH",mi,"ELEMENT.GENERIC.CARTESIAN").reg("ELEMENT.AREA",gi,"ELEMENT.GENERIC.CARTESIAN").reg("ELEMENT.INTERVAL",xi,"ELEMENT.GENERIC.CARTESIAN").reg("ELEMENT.INTERVAL.STACKED",xi,"ELEMENT.GENERIC.CARTESIAN").reg("ELEMENT.INTERVAL.STACKED",xi,"ELEMENT.GENERIC.CARTESIAN").reg("PARALLEL/ELEMENT.LINE",Si),So.scalesRegistry.reg("identity",ki,function(t,e){return Yt(t,{references:e.references,refCounter:e.refCounter})}).reg("color",Ci,function(t,e){return Yt(t,{nice:e.defaultNiceColor,brewer:"measure"===t.dimType?e.defaultColorBrewer:e.defaultClassBrewer})}).reg("fill",ao).reg("size",Pi).reg("ordinal",Fi).reg("period",Ri,function(t,e){return Yt(t,{utcTime:e.utcTime})}).reg("time",Bi,function(t,e){return Yt(t,{utcTime:e.utcTime})}).reg("linear",$i).reg("logarithmic",Qi).reg("value",ro);var To=[function(t){return t.data?[]:["[data] must be specified"]}];So.chartTypesRegistry.add("scatterplot",function(t){return go("ELEMENT.POINT",po(t))},To).add("line",function(t){var e=po(t),n=e.data,r=e.settings.log,i={none:function(){return null},horizontal:function(t){return t.x[t.x.length-1]},vertical:function(t){return t.y[t.y.length-1]},auto:function(t){var e,i=t.x,o=t.y,a=i[i.length-1],u=i.slice(0,i.length-1),c=o[o.length-1],s=o.slice(0,o.length-1),l=t.color,f=u.concat(s).concat([l]).filter(function(t){return null!==t}),h=-1,d=[[[a].concat(f),c],[[c].concat(f),a]];return d.some(function(t,e){var i=t[0],o=t[1],a=Qe(n,i,[o]);return a.result?h=e:r(["Attempt to find a functional relation between",t[0]+" and "+t[1]+" is failed.","There are several "+a.error.keyY+" values (e.g. "+a.error.errY.join(",")+")","for ("+a.error.keyX+" = "+a.error.valX+")."].join(" ")),a.result})?e=d[h][0][0]:(r(["All attempts are failed.","Will orient line horizontally by default.","NOTE: the [scatterplot] chart is more convenient for that data."].join(" ")),e=a),e}},o=(e.lineOrientation||"").toLowerCase(),a=(i.hasOwnProperty(o)?i[o]:i.auto)(e);return null!==a&&(e.data=Ke(n,a,e.dimensions[a])),go("ELEMENT.LINE",e)},To).add("area",yo,To).add("stacked-area",function(t){return yo(Yt(t,{stack:!0}))},To).add("bar",function(t){return mo(Yt(t,{flip:!1}))},To).add("horizontalBar",function(t){return mo(Yt({flip:!0},t))},To).add("horizontal-bar",function(t){return mo(Yt({flip:!0},t))},To).add("stacked-bar",function(t){return mo(Yt({flip:!1,stack:!0},t))},To).add("horizontal-stacked-bar",function(t){return mo(Yt({flip:!0,stack:!0},t))},To).add("map",function(t){var e=Object.assign({sourcemap:t.settings.defaultSourceMap},t.guide||{});e.size=Yt(e.size||{},{min:1,max:10}),e.code=Yt(e.code||{},{georole:"countries"});var n={},r=function(t,e,r){var i;void 0===r&&(r={});var o,a=e;return e?(i=t+"_"+e,o="/"):(i=t+":default",o="?"),n.hasOwnProperty(i)||(n[i]=Object.assign({type:t,source:o,dim:a},r)),i};return{sources:{"?":{dims:{},data:[{}]},"/":{dims:Object.keys(t.dimensions).reduce(function(e,n){return e[n]={type:t.dimensions[n].type},e},{}),data:t.data}},scales:n,unit:{type:"COORDS.MAP",expression:{operator:"none",source:"/"},code:r("value",t.code,e.code),fill:r("fill",t.fill,e.fill),size:r("size",t.size,e.size),color:r("color",t.color,e.color),latitude:r("linear",t.latitude,{nice:!1}),longitude:r("linear",t.longitude,{nice:!1}),guide:e},plugins:t.plugins||[]}},To.concat([function(t){var e=t.fill&&t.code;if(t.fill&&!e)return"[code] must be specified when using [fill]"},function(t){var e=t.latitude&&t.longitude;if((t.latitude||t.longitude)&&!e)return"[latitude] and [longitude] both must be specified"}])).add("parallel",function(t){var e=Object.assign({columns:{}},t.guide||{}),n={},r=function(t,e,r){var i;void 0===r&&(r={});var o,a=e;return e?(i=t+"_"+e,o="/"):(i=t+":default",o="?"),n.hasOwnProperty(i)||(n[i]=Object.assign({type:t,source:o,dim:a},r)),i},i=t.columns.map(function(n){return r(t.dimensions[n].scale,n,e.columns[n])});return{sources:{"?":{dims:{},data:[{}]},"/":{dims:Object.keys(t.dimensions).reduce(function(e,n){return e[n]={type:t.dimensions[n].type},e},{}),data:t.data}},scales:n,unit:{type:"COORDS.PARALLEL",expression:{operator:"none",source:"/"},columns:i,guide:e,units:[{type:"PARALLEL/ELEMENT.LINE",color:r("color",t.color,e.color),columns:i,expression:{operator:"none",source:"/"}}]},plugins:t.plugins||[]}},To.concat([function(t){if(!(t.columns&&t.columns.length>1))return"[columns] property must contain at least 2 dimensions"}]));var Eo="2.1.0";e.default={GPL:De,Plot:Wn,Chart:$n,api:So,version:"2.1.0"}},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=i},function(t,e){t.exports=o},function(t,e){t.exports=a},function(t,e){t.exports=u},function(t,e){t.exports=c},function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){return t.indexOf(e)},r=window,i=r.document,o=i.documentElement,a=["top","bottom"];function u(t,e){for(var n in e)t[n]=e[n];return t}function c(t){var e,n=r.pageYOffset||o.scrollTop,i=r.pageXOffset||o.scrollLeft,a={left:0,right:0,top:0,bottom:0,width:0,height:0};if((e=t)&&null!=e.setInterval)a.width=r.innerWidth||o.clientWidth,a.height=r.innerHeight||o.clientHeight;else{if(!o.contains(t)||null==t.getBoundingClientRect)return a;u(a,t.getBoundingClientRect()),a.width=a.right-a.left,a.height=a.bottom-a.top}return a.top=a.top+n-o.clientTop,a.left=a.left+i-o.clientLeft,a.right=a.left+a.width,a.bottom=a.top+a.height,a}var s=function(t,e){return r.getComputedStyle(t)[e]};function l(t){var e=String(s(t,l.propName)),n=e.match(/([0-9.]+)([ms]{1,2})/);return n&&(e=Number(n[1]),"s"===n[2]&&(e*=1e3)),0|e}l.propName=function(){for(var t=i.createElement("div"),e=["transitionDuration","webkitTransitionDuration"],n=0;n<e.length;n++)if(t.style[e[n]]="1s","1s"===t.style[e[n]])return e[n]}();var f=Object.create;function h(t,e){if(!(this instanceof h))return new h(t,e);this.hidden=1,this.options=u(f(h.defaults),e),this._createElement(),t&&this.content(t)}h.prototype._createElement=function(){var t,e;this.element=i.createElement("div"),this.classes=(t=this.element,{add:function(e){t.classList.add(e)},remove:function(e){t.classList.remove(e)}}),this.classes.add(this.options.baseClass);for(var n=0;n<h.classTypes.length;n++)e=h.classTypes[n]+"Class",this.options[e]&&this.classes.add(this.options[e])},h.prototype.type=function(t){return this.changeClassType("type",t)},h.prototype.effect=function(t){return this.changeClassType("effect",t)},h.prototype.changeClassType=function(t,e){return t+="Class",this.options[t]&&this.classes.remove(this.options[t]),this.options[t]=e,e&&this.classes.add(e),this},h.prototype.updateSize=function(){var t;return this.hidden&&(this.element.style.visibility="hidden",i.body.appendChild(this.element)),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,null==this.spacing&&(this.spacing=null!=this.options.spacing?this.options.spacing:(t=s(this.element,"top"),0|Math.round(String(t).replace(/[^\-0-9.]/g,"")))),this.hidden?(i.body.removeChild(this.element),this.element.style.visibility=""):this.position(),this},h.prototype.content=function(t){return"object"==typeof t?(this.element.innerHTML="",this.element.appendChild(t)):this.element.innerHTML=t,this.updateSize(),this},h.prototype.place=function(t){return this.options.place=t,this.hidden||this.position(),this},h.prototype.attach=function(t){return this.attachedTo=t,this.hidden||this.position(),this},h.prototype.detach=function(){return this.hide(),this.attachedTo=null,this},h.prototype._pickPlace=function(t){if(!this.options.auto)return this.options.place;var e=c(r),i=this.options.place.split("-"),o=this.spacing;if(-1!==n(a,i[0]))switch(t.top-this.height-o<=e.top?i[0]="bottom":t.bottom+this.height+o>=e.bottom&&(i[0]="top"),i[1]){case"left":t.right-this.width<=e.left&&(i[1]="right");break;case"right":t.left+this.width>=e.right&&(i[1]="left");break;default:t.left+t.width/2+this.width/2>=e.right?i[1]="left":t.right-t.width/2-this.width/2<=e.left&&(i[1]="right")}else switch(t.left-this.width-o<=e.left?i[0]="right":t.right+this.width+o>=e.right&&(i[0]="left"),i[1]){case"top":t.bottom-this.height<=e.top&&(i[1]="bottom");break;case"bottom":t.top+this.height>=e.bottom&&(i[1]="top");break;default:t.top+t.height/2+this.height/2>=e.bottom?i[1]="top":t.bottom-t.height/2-this.height/2<=e.top&&(i[1]="bottom")}return i.join("-")},h.prototype.position=function(t,e){this.attachedTo&&(t=this.attachedTo),null==t&&this._p?(t=this._p[0],e=this._p[1]):this._p=arguments;var n,r,i="number"==typeof t?{left:0|t,right:0|t,top:0|e,bottom:0|e,width:0,height:0}:c(t),o=this.spacing,a=this._pickPlace(i);switch(a!==this.curPlace&&(this.curPlace&&this.classes.remove(this.curPlace),this.classes.add(a),this.curPlace=a),this.curPlace){case"top":n=i.top-this.height-o,r=i.left+i.width/2-this.width/2;break;case"top-left":n=i.top-this.height-o,r=i.right-this.width;break;case"top-right":n=i.top-this.height-o,r=i.left;break;case"bottom":n=i.bottom+o,r=i.left+i.width/2-this.width/2;break;case"bottom-left":n=i.bottom+o,r=i.right-this.width;break;case"bottom-right":n=i.bottom+o,r=i.left;break;case"left":n=i.top+i.height/2-this.height/2,r=i.left-this.width-o;break;case"left-top":n=i.bottom-this.height,r=i.left-this.width-o;break;case"left-bottom":n=i.top,r=i.left-this.width-o;break;case"right":n=i.top+i.height/2-this.height/2,r=i.right+o;break;case"right-top":n=i.bottom-this.height,r=i.right+o;break;case"right-bottom":n=i.top,r=i.right+o}return this.element.style.top=Math.round(n)+"px",this.element.style.left=Math.round(r)+"px",this},h.prototype.show=function(t,e){return t=this.attachedTo?this.attachedTo:t,clearTimeout(this.aIndex),null!=t&&this.position(t,e),this.hidden&&(this.hidden=0,i.body.appendChild(this.element)),this.attachedTo&&this._aware(),this.options.inClass&&(this.options.effectClass&&this.element.clientHeight,this.classes.add(this.options.inClass)),this},h.prototype.getElement=function(){return this.element},h.prototype.hide=function(){if(!this.hidden){var t=this,e=0;return this.options.inClass&&(this.classes.remove(this.options.inClass),this.options.effectClass&&(e=l(this.element))),this.attachedTo&&this._unaware(),clearTimeout(this.aIndex),this.aIndex=setTimeout(function(){t.aIndex=0,i.body.removeChild(t.element),t.hidden=1},e),this}},h.prototype.toggle=function(t,e){return this[this.hidden?"show":"hide"](t,e)},h.prototype.destroy=function(){clearTimeout(this.aIndex),this._unaware(),this.hidden||i.body.removeChild(this.element),this.element=this.options=null},h.prototype._aware=function(){-1===n(h.winAware,this)&&h.winAware.push(this)},h.prototype._unaware=function(){var t=n(h.winAware,this);-1!==t&&h.winAware.splice(t,1)},h.reposition=function(){var t,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,17)};function n(){t=0;for(var e=0,n=h.winAware.length;e<n;e++)h.winAware[e].position()}return function(){!t&&h.winAware.length&&(t=e(n))}}(),h.winAware=[],window.addEventListener("resize",h.reposition),window.addEventListener("scroll",h.reposition),h.classTypes=["type","effect"],h.defaults={baseClass:"tooltip",typeClass:null,effectClass:null,inClass:"in",place:"top",spacing:null,auto:0},e.Tooltip=h}])})?r.apply(e,[]):r)||(t.exports=i)},function(t,e){t.exports=s},function(t,e){t.exports=l},function(t,e){t.exports=f},function(t,e){t.exports=h},function(t,e){t.exports=d},function(t,e){t.exports=p},function(t,e,n){"use strict";var r,i,o,a,u;if(window.requestAnimationFrame||(r=0,window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(0,16-e+r);return r=e+n,setTimeout(function(){t.call(null,e+n)},n)},window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.requestIdleCallback||(window.requestIdleCallback=function(t,e){return setTimeout(t,e&&e.timeout?e.timeout:0)},window.cancelIdleCallback=function(t){clearTimeout(t)}),Number.isFinite||Object.defineProperty(Number,"isFinite",{value:function(t){return"number"==typeof t&&isFinite(t)},configurable:!0,enumerable:!1,writable:!0}),Number.isNaN||Object.defineProperty(Number,"isNaN",{value:function(t){return"number"==typeof t&&isNaN(t)},configurable:!0,enumerable:!1,writable:!0}),Number.isInteger||Object.defineProperty(Number,"isInteger",{value:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},configurable:!0,enumerable:!1,writable:!0}),Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:9007199254740991,configurable:!1,enumerable:!1,writable:!1}),Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||Number(t)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return e},configurable:!0,enumerable:!1,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return o;return-1},configurable:!0,enumerable:!1,writable:!0}),!Array.from){Object.defineProperty(Array,"from",{value:(i=Object.prototype.toString,o=function(t){return"function"==typeof t||"[object Function]"===i.call(t)},a=Math.pow(2,53)-1,u=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),a)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,r=arguments.length>1?arguments[1]:void 0;if(void 0!==r){if(!o(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}for(var i,a=u(e.length),c=o(this)?Object(new this(a)):new Array(a),s=0;s<a;)i=e[s],c[s]=r?void 0===n?r(i,s):r.call(n,i,s):i,s+=1;return c.length=a,c}),configurable:!0,enumerable:!1,writable:!0});var c=Map.prototype.set;Object.defineProperty(Map.prototype,"set",{value:function(){return c.apply(this,arguments),this},configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(Map.prototype,"values",{value:function(){var t={},e=0;return this.forEach(function(n){return t[String(e++)]=n}),t.length=e,t},configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(Map.prototype,"entries",{value:function(){var t={},e=0;return this.forEach(function(n,r){return t[String(e++)]=[r,n]}),t.length=e,t},configurable:!0,enumerable:!1,writable:!0})}Object.assign||Object.defineProperty(Object,"assign",{value:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},configurable:!0,enumerable:!1,writable:!0}),Element.prototype.matches||Object.defineProperty(Element.prototype,"matches",{value:Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,configurable:!0,enumerable:!0,writable:!0})},,,,,,,,,,,function(t,e,n){t.exports=n(1)}])}(n(0),n(2),n(16),n(19),n(10),n(3),n(20),n(8),n(6),n(1),n(15),n(17),n(18),n(14),n(21))},function(t,e,n){"use strict";n.r(e);var r,i=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},o=function(t){return(t=i(Math.abs(t)))?t[1]:NaN},a=function(t,e){var n=i(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")},u={"":function(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return a(100*t,e)},r:a,s:function(t,e){var n=i(t,e);if(!n)return t+"";var o=n[0],a=n[1],u=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,c=o.length;return u===c?o:u>c?o+new Array(u-c+1).join("0"):u>0?o.slice(0,u)+"."+o.slice(u):"0."+new Array(1-u).join("0")+i(t,Math.max(0,e+u-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},c=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function s(t){return new l(t)}function l(t){if(!(e=c.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],l=!!e[7],f=e[8]&&+e[8].slice(1),h=e[9]||"";"n"===h?(l=!0,h="g"):u[h]||(h=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=l,this.precision=f,this.type=h}s.prototype=l.prototype,l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var f,h,d,p=function(t){return t},g=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],m=function(t){var e=t.grouping&&t.thousands?function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,u=t[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(n.substring(i-=u,i+u)),!((c+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(e)}}(t.grouping,t.thousands):p,n=t.currency,i=t.decimal,a=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):p,c=t.percent||"%";function l(t){var o=(t=s(t)).fill,l=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,m=t.comma,y=t.precision,v=t.type,b="$"===h?n[0]:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===h?n[1]:/[%p]/.test(v)?c:"",x=u[v],w=!v||/[defgprs%]/.test(v);function M(t){var n,u,c,s=b,h=_;if("c"===v)h=x(t)+h,t="";else{var M=(t=+t)<0;if(t=x(Math.abs(t),y),M&&0==+t&&(M=!1),s=(M?"("===f?f:"-":"-"===f||"("===f?"":f)+s,h=("s"===v?g[8+r/3]:"")+h+(M&&"("===f?")":""),w)for(n=-1,u=t.length;++n<u;)if(48>(c=t.charCodeAt(n))||c>57){h=(46===c?i+t.slice(n+1):t.slice(n))+h,t=t.slice(0,n);break}}m&&!d&&(t=e(t,1/0));var S=s.length+t.length+h.length,T=S<p?new Array(p-S+1).join(o):"";switch(m&&d&&(t=e(T+t,T.length?p-h.length:1/0),T=""),l){case"<":t=s+t+h+T;break;case"=":t=s+T+t+h;break;case"^":t=T.slice(0,S=T.length>>1)+s+t+h+T.slice(S);break;default:t=T+s+t+h}return a(t)}return y=null==y?v?6:12:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),M.toString=function(){return t+""},M}return{format:l,formatPrefix:function(t,e){var n=l(((t=s(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(o(e)/3))),i=Math.pow(10,-r),a=g[8+r/3];return function(t){return n(i*t)+a}}}};function y(t){return f=m(t),h=f.format,d=f.formatPrefix,f}y({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var v=function(t){return Math.max(0,-o(Math.abs(t)))},b=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(o(e)/3)))-o(Math.abs(t)))},_=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,o(e)-o(t))+1};n.d(e,"formatDefaultLocale",function(){return y}),n.d(e,"format",function(){return h}),n.d(e,"formatPrefix",function(){return d}),n.d(e,"formatLocale",function(){return m}),n.d(e,"formatSpecifier",function(){return s}),n.d(e,"precisionFixed",function(){return v}),n.d(e,"precisionPrefix",function(){return b}),n.d(e,"precisionRound",function(){return _})},function(t,e,n){"use strict";var r={value:function(){}};function i(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function a(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function u(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=i.prototype={constructor:o,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",r),o=-1,c=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<c;)if(n=(t=i[o]).type)r[n]=u(r[n],t.name,e);else if(null==e)for(n in r)r[n]=u(r[n],t.name,null);return this}for(;++o<c;)if((n=(t=i[o]).type)&&(n=a(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new o(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var c=i;n.d(e,"a",function(){return c})},function(t,e,n){"use strict";n.r(e);var r=n(1);function i(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function o(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function a(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function u(t){var e=t.dateTime,n=t.date,u=t.time,c=t.periods,s=t.days,l=t.shortDays,f=t.months,h=t.shortMonths,p=b(c),g=_(c),m=b(s),y=_(s),v=b(l),Mt=_(l),St=b(f),Tt=_(f),Et=b(h),kt=_(h),At={a:function(t){return l[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return h[t.getMonth()]},B:function(t){return f[t.getMonth()]},c:null,d:U,e:U,f:G,H:H,I:B,j:W,L:Y,m:X,M:q,p:function(t){return c[+(t.getHours()>=12)]},Q:xt,s:wt,S:V,u:$,U:Z,V:J,w:Q,W:K,x:null,X:null,y:tt,Y:et,Z:nt,"%":_t},Ot={a:function(t){return l[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return h[t.getUTCMonth()]},B:function(t){return f[t.getUTCMonth()]},c:null,d:rt,e:rt,f:ct,H:it,I:ot,j:at,L:ut,m:st,M:lt,p:function(t){return c[+(t.getUTCHours()>=12)]},Q:xt,s:wt,S:ft,u:ht,U:dt,V:pt,w:gt,W:mt,x:null,X:null,y:yt,Y:vt,Z:bt,"%":_t},Ct={a:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.w=Mt[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.w=y[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=Et.exec(e.slice(n));return r?(t.m=kt[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=St.exec(e.slice(n));return r?(t.m=Tt[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return Pt(t,e,n,r)},d:C,e:C,f:D,H:j,I:j,j:N,L:F,m:O,M:P,p:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.p=g[r[0].toLowerCase()],n+r[0].length):-1},Q:R,s:I,S:L,u:w,U:M,V:S,w:x,W:T,x:function(t,e,r){return Pt(t,n,e,r)},X:function(t,e,n){return Pt(t,u,e,n)},y:k,Y:E,Z:A,"%":z};function Nt(t,e){return function(n){var r,i,o,a=[],u=-1,c=0,s=t.length;for(n instanceof Date||(n=new Date(+n));++u<s;)37===t.charCodeAt(u)&&(a.push(t.slice(c,u)),null!=(i=d[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),c=u+1);return a.push(t.slice(c,u)),a.join("")}}function jt(t,e){return function(n){var i,u,c=a(1900);if(Pt(c,t,n+="",0)!=n.length)return null;if("Q"in c)return new Date(c.Q);if("p"in c&&(c.H=c.H%12+12*c.p),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(i=(u=(i=o(a(c.y))).getUTCDay())>4||0===u?r.utcMonday.ceil(i):Object(r.utcMonday)(i),i=r.utcDay.offset(i,7*(c.V-1)),c.y=i.getUTCFullYear(),c.m=i.getUTCMonth(),c.d=i.getUTCDate()+(c.w+6)%7):(i=(u=(i=e(a(c.y))).getDay())>4||0===u?r.timeMonday.ceil(i):Object(r.timeMonday)(i),i=r.timeDay.offset(i,7*(c.V-1)),c.y=i.getFullYear(),c.m=i.getMonth(),c.d=i.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),u="Z"in c?o(a(c.y)).getUTCDay():e(a(c.y)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(u+5)%7:c.w+7*c.U-(u+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,o(c)):e(c)}}function Pt(t,e,n,r){for(var i,o,a=0,u=e.length,c=n.length;a<u;){if(r>=c)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=Ct[i in d?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return At.x=Nt(n,At),At.X=Nt(u,At),At.c=Nt(e,At),Ot.x=Nt(n,Ot),Ot.X=Nt(u,Ot),Ot.c=Nt(e,Ot),{format:function(t){var e=Nt(t+="",At);return e.toString=function(){return t},e},parse:function(t){var e=jt(t+="",i);return e.toString=function(){return t},e},utcFormat:function(t){var e=Nt(t+="",Ot);return e.toString=function(){return t},e},utcParse:function(t){var e=jt(t,o);return e.toString=function(){return t},e}}}var c,s,l,f,h,d={"-":"",_:" ",0:"0"},p=/^\s*\d+/,g=/^%/,m=/[\\^$*+?|[\]().{}]/g;function y(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function v(t){return t.replace(m,"\\$&")}function b(t){return new RegExp("^(?:"+t.map(v).join("|")+")","i")}function _(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function x(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function w(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function M(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function S(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function T(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function E(t,e,n){var r=p.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function k(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function A(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function O(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function C(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function N(t,e,n){var r=p.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function j(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function P(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function L(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function F(t,e,n){var r=p.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function D(t,e,n){var r=p.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function z(t,e,n){var r=g.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function R(t,e,n){var r=p.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function I(t,e,n){var r=p.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function U(t,e){return y(t.getDate(),e,2)}function H(t,e){return y(t.getHours(),e,2)}function B(t,e){return y(t.getHours()%12||12,e,2)}function W(t,e){return y(1+r.timeDay.count(Object(r.timeYear)(t),t),e,3)}function Y(t,e){return y(t.getMilliseconds(),e,3)}function G(t,e){return Y(t,e)+"000"}function X(t,e){return y(t.getMonth()+1,e,2)}function q(t,e){return y(t.getMinutes(),e,2)}function V(t,e){return y(t.getSeconds(),e,2)}function $(t){var e=t.getDay();return 0===e?7:e}function Z(t,e){return y(r.timeSunday.count(Object(r.timeYear)(t),t),e,2)}function J(t,e){var n=t.getDay();return t=n>=4||0===n?Object(r.timeThursday)(t):r.timeThursday.ceil(t),y(r.timeThursday.count(Object(r.timeYear)(t),t)+(4===Object(r.timeYear)(t).getDay()),e,2)}function Q(t){return t.getDay()}function K(t,e){return y(r.timeMonday.count(Object(r.timeYear)(t),t),e,2)}function tt(t,e){return y(t.getFullYear()%100,e,2)}function et(t,e){return y(t.getFullYear()%1e4,e,4)}function nt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+y(e/60|0,"0",2)+y(e%60,"0",2)}function rt(t,e){return y(t.getUTCDate(),e,2)}function it(t,e){return y(t.getUTCHours(),e,2)}function ot(t,e){return y(t.getUTCHours()%12||12,e,2)}function at(t,e){return y(1+r.utcDay.count(Object(r.utcYear)(t),t),e,3)}function ut(t,e){return y(t.getUTCMilliseconds(),e,3)}function ct(t,e){return ut(t,e)+"000"}function st(t,e){return y(t.getUTCMonth()+1,e,2)}function lt(t,e){return y(t.getUTCMinutes(),e,2)}function ft(t,e){return y(t.getUTCSeconds(),e,2)}function ht(t){var e=t.getUTCDay();return 0===e?7:e}function dt(t,e){return y(r.utcSunday.count(Object(r.utcYear)(t),t),e,2)}function pt(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Object(r.utcThursday)(t):r.utcThursday.ceil(t),y(r.utcThursday.count(Object(r.utcYear)(t),t)+(4===Object(r.utcYear)(t).getUTCDay()),e,2)}function gt(t){return t.getUTCDay()}function mt(t,e){return y(r.utcMonday.count(Object(r.utcYear)(t),t),e,2)}function yt(t,e){return y(t.getUTCFullYear()%100,e,2)}function vt(t,e){return y(t.getUTCFullYear()%1e4,e,4)}function bt(){return"+0000"}function _t(){return"%"}function xt(t){return+t}function wt(t){return Math.floor(+t/1e3)}function Mt(t){return c=u(t),s=c.format,l=c.parse,f=c.utcFormat,h=c.utcParse,c}Mt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var St=Date.prototype.toISOString?function(t){return t.toISOString()}:f("%Y-%m-%dT%H:%M:%S.%LZ");var Tt=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:h("%Y-%m-%dT%H:%M:%S.%LZ");n.d(e,"timeFormatDefaultLocale",function(){return Mt}),n.d(e,"timeFormat",function(){return s}),n.d(e,"timeParse",function(){return l}),n.d(e,"utcFormat",function(){return f}),n.d(e,"utcParse",function(){return h}),n.d(e,"timeFormatLocale",function(){return u}),n.d(e,"isoFormat",function(){return St}),n.d(e,"isoParse",function(){return Tt})},function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==e)for(;++o<a;)n.set(o,t[o]);else for(;++o<a;)n.set(e(i=t[o],o,t),i)}else if(t)for(var u in t)n.set(u,t[u]);return n}r.prototype=i.prototype={constructor:r,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var o=i;function a(){}var u=o.prototype;function c(t,e){var n=new a;if(t instanceof a)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}a.prototype=c.prototype={constructor:a,has:u.has,add:function(t){return this["$"+(t+="")]=t,this},remove:u.remove,clear:u.clear,values:u.keys,size:u.size,empty:u.empty,each:u.each};n.d(e,!1,function(){}),n.d(e,!1,function(){}),n.d(e,"a",function(){return o}),n.d(e,!1,function(){}),n.d(e,!1,function(){}),n.d(e,!1,function(){})},function(t,e,n){"use strict";n.r(e);var r,i,o=n(0),a=n(7),u=0,c=0,s=0,l=1e3,f=0,h=0,d=0,p="object"==typeof performance&&performance.now?performance:Date,g="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function m(){return h||(g(y),h=p.now()+d)}function y(){h=0}function v(){this._call=this._time=this._next=null}function b(t,e,n){var r=new v;return r.restart(t,e,n),r}function _(){h=(f=p.now())+d,u=c=0;try{!function(){m(),++u;for(var t,e=r;e;)(t=h-e._time)>=0&&e._call.call(null,t),e=e._next;--u}()}finally{u=0,function(){var t,e,n=r,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:r=e);i=t,w(o)}(),h=0}}function x(){var t=p.now(),e=t-f;e>l&&(d-=e,f=t)}function w(t){u||(c&&(c=clearTimeout(c)),t-h>24?(t<1/0&&(c=setTimeout(_,t-p.now()-d)),s&&(s=clearInterval(s))):(s||(f=p.now(),s=setInterval(x,l)),u=1,g(_)))}v.prototype=b.prototype={constructor:v,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?m():+n)+(null==e?0:+e),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=n,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}};var M=function(t,e,n){var r=new v;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},S=Object(a.a)("start","end","interrupt"),T=[],E=0,k=1,A=2,O=3,C=4,N=5,j=6,P=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(c){var s,l,f,h;if(n.state!==k)return u();for(s in i)if((h=i[s]).name===n.name){if(h.state===O)return M(o);h.state===C?(h.state=j,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[s]):+s<e&&(h.state=j,h.timer.stop(),delete i[s])}if(M(function(){n.state===O&&(n.state=C,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=A,n.on.call("start",t,t.__data__,n.index,n.group),n.state===A){for(n.state=O,r=new Array(f=n.tween.length),s=0,l=-1;s<f;++s)(h=n.tween[s].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=N,1),o=-1,a=r.length;++o<a;)r[o].call(null,i);n.state===N&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=j,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=b(function(t){n.state=k,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:S,tween:T,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:E})};function L(t,e){var n=D(t,e);if(n.state>E)throw new Error("too late; already scheduled");return n}function F(t,e){var n=D(t,e);if(n.state>A)throw new Error("too late; already started");return n}function D(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var z=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>A&&n.state<N,n.state=j,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},R=n(4);function I(t,e,n){var r=t._id;return t.each(function(){var t=F(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return D(t,r).value[e]}}var U=n(3),H=function(t,e){var n;return("number"==typeof e?R.c:e instanceof U.color?R.d:(n=Object(U.color)(e))?(e=n,R.d):R.f)(t,e)};var B=o.selection.prototype.constructor;var W=0;function Y(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function G(t){return Object(o.selection)().transition(t)}function X(){return++W}var q=o.selection.prototype;Y.prototype=G.prototype={constructor:Y,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(o.selector)(t));for(var r=this._groups,i=r.length,a=new Array(i),u=0;u<i;++u)for(var c,s,l=r[u],f=l.length,h=a[u]=new Array(f),d=0;d<f;++d)(c=l[d])&&(s=t.call(c,c.__data__,d,l))&&("__data__"in c&&(s.__data__=c.__data__),h[d]=s,P(h[d],e,n,d,h,D(c,n)));return new Y(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(o.selectorAll)(t));for(var r=this._groups,i=r.length,a=[],u=[],c=0;c<i;++c)for(var s,l=r[c],f=l.length,h=0;h<f;++h)if(s=l[h]){for(var d,p=t.call(s,s.__data__,h,l),g=D(s,n),m=0,y=p.length;m<y;++m)(d=p[m])&&P(d,e,n,m,p,g);a.push(p),u.push(s)}return new Y(a,u,e,n)},filter:function(t){"function"!=typeof t&&(t=Object(o.matcher)(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,u=e[i],c=u.length,s=r[i]=[],l=0;l<c;++l)(a=u[l])&&t.call(a,a.__data__,l,u)&&s.push(a);return new Y(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=e[u],l=n[u],f=s.length,h=a[u]=new Array(f),d=0;d<f;++d)(c=s[d]||l[d])&&(h[d]=c);for(;u<r;++u)a[u]=e[u];return new Y(a,this._parents,this._name,this._id)},selection:function(){return new B(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=X(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,s=0;s<c;++s)if(a=u[s]){var l=D(a,e);P(a,t,n,s,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Y(r,this._parents,t,n)},call:q.call,nodes:q.nodes,node:q.node,size:q.size,empty:q.empty,each:q.each,on:function(t,e){var n=this._id;return arguments.length<2?D(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?L:F;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=Object(o.namespace)(t),r="transform"===n?R.h:H;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,o;return function(){var a,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===u?null:a===r&&u===i?o:o=e(r=a,i=u);this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,o;return function(){var a,u=n(this);if(null!=u)return(a=this.getAttribute(t))===u?null:a===r&&u===i?o:o=e(r=a,i=u);this.removeAttribute(t)}})(n,r,I(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}:function(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}})(n,r,e+""))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Object(o.namespace)(t);return this.tween(n,(r.local?function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}:function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n})(r,e))},style:function(t,e,n){var r="transform"==(t+="")?R.g:H;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Object(o.style)(this,t),u=(this.style.removeProperty(t),Object(o.style)(this,t));return a===u?null:a===n&&u===r?i:i=e(n=a,r=u)}}(t,r)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var r,i,a;return function(){var u=Object(o.style)(this,t),c=n(this);return null==c&&(this.style.removeProperty(t),c=Object(o.style)(this,t)),u===c?null:u===r&&c===i?a:a=e(r=u,i=c)}}(t,r,I(this,"style."+t,e)):function(t,e,n){var r,i;return function(){var a=Object(o.style)(this,t);return a===n?null:a===r?i:i=e(r=a,n)}}(t,r,e+""),n)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(I(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=D(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=F(this,t),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=F(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},c=0,s=i.length;c<s;++c)if(i[c].name===e){i[c]=u;break}c===s&&i.push(u)}o.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){L(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){L(this,t).delay=e}})(e,t)):D(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){F(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){F(this,t).duration=e}})(e,t)):D(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){F(this,t).ease=e}}(e,t)):D(this.node(),e).ease}};(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n})(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math.PI;(function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n})(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158);var V=2*Math.PI,$=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=V);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*V)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=V);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*V)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=V);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*V)},i.period=function(n){return t(e,n)},i}(1,.3),{time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}});function Z(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return $.time=m(),$;return n}o.selection.prototype.interrupt=function(t){return this.each(function(){z(this,t)})},o.selection.prototype.transition=function(t){var e,n;t instanceof Y?(e=t._id,t=t._name):(e=X(),(n=$).time=m(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,s=0;s<c;++s)(a=u[s])&&P(a,t,e,s,u,n||Z(a,e));return new Y(r,this._parents,t,e)};var J=[null],Q=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>k&&n.name===e)return new Y([[t]],J,e,+r);return null};n.d(e,"transition",function(){return G}),n.d(e,"active",function(){return Q}),n.d(e,"interrupt",function(){return z})},function(t,e,n){"use strict";n.r(e);var r=n(5),i=n.n(r),o=(n(12),n(13),void 0),a=void 0,u=void 0,c=void 0,s=[{area:"work",importance:1,urgency:1,effort:2,priority:"low",item:"paycheck"},{area:"work",importance:2,urgency:1,effort:1,priority:"low",item:"healthcare"},{area:"work",importance:7,urgency:3,effort:8,priority:"medium",item:"Typescript learning"},{area:"work",importance:6,urgency:3,effort:3,priority:"medium",item:"Angular get v. set research"},{area:"work",importance:3,urgency:4,effort:7,priority:"high",item:"completing sprint work"},{area:"work",importance:4,urgency:6,effort:8,priority:"medium",item:"refactor scary code"},{area:"work",importance:6,urgency:4,effort:3,priority:"high",item:"review PRs"},{area:"work",importance:8.5,urgency:3.25,effort:2,priority:"low",item:"meetings"},{area:"work",importance:2,urgency:2,effort:1,priority:"high",item:"submit health insurance expense report"},{area:"life",importance:2.5,urgency:1,effort:1,priority:"high",item:"paying mortgage"},{area:"life",importance:1.75,urgency:1,effort:1,priority:"high",item:"home maintenance"},{area:"life",importance:3.5,urgency:1,effort:1,priority:"high",item:"paying bills"},{area:"life",importance:7,urgency:2,effort:5,priority:"medium",item:"keeping house clean"},{area:"life",importance:6,urgency:8,effort:3,priority:"medium",item:"gardening"},{area:"life",importance:1,urgency:5,effort:3,priority:"high",item:"furbaby care"},{area:"life",importance:2,urgency:5.5,effort:3,priority:"medium",item:"cooking/mealprep"},{area:"life",importance:7,urgency:1,effort:5,priority:"medium",item:"preparing for family"},{area:"life",importance:9.25,urgency:1.5,effort:2,priority:"medium",item:"learning to brew kombucha"},{area:"life",importance:9.5,urgency:1,effort:1,priority:"low",item:"gaming"},{area:"life",importance:8.5,urgency:1,effort:1,priority:"low",item:"Watching The Bachelor"},{area:"life",importance:3,urgency:1,effort:6,priority:"medium",item:"time with husband"},{area:"life",importance:8,urgency:1,effort:2,priority:"low",item:"watch Expanse with husband"},{area:"life",importance:4,urgency:1,effort:3,priority:"medium",item:"time with friends"},{area:"life",importance:2,urgency:3,effort:7,priority:"high",item:"fitness"},{area:"life",importance:.5,urgency:3,effort:0,priority:"high",item:"sleep"},{area:"blank",importance:8,urgency:4,effort:1,priority:"low",item:"updating current talk"},{area:"blank",importance:7,urgency:5,effort:8,priority:"low",item:"working on a new talk"},{area:"blank",importance:3,urgency:6,effort:8,priority:"medium",item:"managing non-profit team"},{area:"blank",importance:5,urgency:8,effort:3,priority:"high",item:"responding to emails"},{area:"blank",importance:2,urgency:8,effort:8,priority:"high",item:"solving non-profit crisis"},{area:"blank",importance:5,urgency:1,effort:3,priority:"medium",item:"running non-profit meetings"},{area:"blank",importance:7.5,urgency:1,effort:6,priority:"medium",item:"mentoring others"}];function l(t){return _.map(t,function(t){return"life"===t.area&&(t.effort=t.effort/3),t})}function f(t,e){this.options=e,this.init(t)}$.fn.sparkleh=function(t){return this.each(function(e,n){var r=$(n).css("position","relative");new f(r,$.extend({width:r.outerWidth(),height:r.outerHeight(),color:"#FFFFFF",count:30,overlap:0,speed:1},t)).over()})},f.prototype={init:function(t){this.$canvas=$("<canvas>").addClass("sparkle-canvas").css({position:"absolute",top:"-"+this.options.overlap+"px",left:"-"+this.options.overlap+"px","pointer-events":"none"}).appendTo(t),this.canvas=this.$canvas[0],this.context=this.canvas.getContext("2d"),this.sprite=new Image,this.sprites=[0,6,13,20],this.sprite.src=this.datauri,this.canvas.width=this.options.width+2*this.options.overlap,this.canvas.height=this.options.height+2*this.options.overlap,this.particles=this.createSparkles(this.canvas.width,this.canvas.height),this.anim=null,this.fade=!1},createSparkles:function(t,e){for(var n=[],r=0;r<this.options.count;r++){var i=this.options.color;"rainbow"==this.options.color?i="#"+("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6):"array"===$.type(this.options.color)&&(i=this.options.color[Math.floor(Math.random()*this.options.color.length)]),n[r]={position:{x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*e)},style:this.sprites[Math.floor(4*Math.random())],delta:{x:Math.floor(1e3*Math.random())-500,y:Math.floor(1e3*Math.random())-500},size:parseFloat((2*Math.random()).toFixed(2)),color:i}}return n},draw:function(t,e){var n=this.context;n.clearRect(0,0,this.canvas.width,this.canvas.height);for(var r=0;r<this.options.count;r++){var i=this.particles[r],o=Math.floor(7*Math.random());Math.floor(t)%o==0&&(i.style=this.sprites[Math.floor(4*Math.random())]),n.save(),n.globalAlpha=i.opacity,n.drawImage(this.sprite,i.style,0,7,7,i.position.x,i.position.y,7,7),this.options.color&&(n.globalCompositeOperation="source-atop",n.globalAlpha=.5,n.fillStyle=i.color,n.fillRect(i.position.x,i.position.y,7,7)),n.restore()}},update:function(){var t=this;this.anim=window.requestAnimationFrame(function(e){for(var n=0;n<t.options.count;n++){var r=t.particles[n],i=Math.random()>2*Math.random(),o=Math.random()>3*Math.random();i&&(r.position.x+=r.delta.x*t.options.speed/1500),o||(r.position.y-=r.delta.y*t.options.speed/800),r.position.x>t.canvas.width?r.position.x=-7:r.position.x<-7&&(r.position.x=t.canvas.width),r.position.y>t.canvas.height?(r.position.y=-7,r.position.x=Math.floor(Math.random()*t.canvas.width)):r.position.y<-7&&(r.position.y=t.canvas.height,r.position.x=Math.floor(Math.random()*t.canvas.width)),t.fade?r.opacity-=.02:r.opacity-=.005,r.opacity<=0&&(r.opacity=t.fade?0:1)}t.draw(e),t.fade?(t.fadeCount-=1,t.fadeCount<0?window.cancelAnimationFrame(t.anim):t.update()):t.update()})},cancel:function(){this.fadeCount=100},over:function(){window.cancelAnimationFrame(this.anim);for(var t=0;t<this.options.count;t++)this.particles[t].opacity=Math.random();this.fade=!1,this.update()},out:function(){this.fade=!0,this.cancel()},datauri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAHCAYAAAD5wDa1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNDNFMzM5REEyMkUxMUUzOEE3NEI3Q0U1QUIzMTc4NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNDNFMzM5RUEyMkUxMUUzOEE3NEI3Q0U1QUIzMTc4NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM0M0UzMzlCQTIyRTExRTM4QTc0QjdDRTVBQjMxNzg2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM0M0UzMzlDQTIyRTExRTM4QTc0QjdDRTVBQjMxNzg2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jzOsUQAAANhJREFUeNqsks0KhCAUhW/Sz6pFSc1AD9HL+OBFbdsVOKWLajH9EE7GFBEjOMxcUNHD8dxPBCEE/DKyLGMqraoqcd4j0ChpUmlBEGCFRBzH2dbj5JycJAn90CEpy1J2SK4apVSM4yiKonhePYwxMU2TaJrm8BpykpWmKQ3D8FbX9SOO4/tOhDEG0zRhGAZo2xaiKDLyPGeSyPM8sCxr868+WC/mvu9j13XBtm1ACME8z7AsC/R9r0fGOf+arOu6jUwS7l6tT/B+xo+aDFRo5BykHfav3/gSYAAtIdQ1IT0puAAAAABJRU5ErkJggg=="},Reveal.addEventListener("slidechanged",function(t){var e=parseInt(window.innerHeight,10)-180;if("chart"!==t.currentSlide.getAttribute("id")||o||(document.getElementById("basicScatter").setAttribute("style","height:"+e+"px"),(o=new i.a.Chart({guide:{showGridLines:"",x:{label:{text:"Importance",padding:20},padding:10},y:{label:{text:"Urgency",padding:20},padding:10}},data:s,type:"scatterplot",x:"importance",y:"urgency",color:"area",size:"effort",plugins:[i.a.api.plugins.get("tooltip")({fields:["item"]}),i.a.api.plugins.get("legend")()]})).renderTo("#basicScatter")),"chaosChart"===t.currentSlide.getAttribute("id")&&!a){document.getElementById("chaosScatter").setAttribute("style","height:"+e+"px");var n=_.map(s,function(t){return _.clone(t)});(a=new i.a.Chart({guide:{showGridLines:"",x:{label:{text:"Importance",padding:20},padding:10},y:{label:{text:"Urgency",padding:20},padding:10}},data:n,type:"scatterplot",x:"importance",y:"urgency",color:"area",size:"effort",plugins:[i.a.api.plugins.get("tooltip")({fields:["item"]}),i.a.api.plugins.get("legend")()]})).renderTo("#chaosScatter");var r=!0;setInterval(function(){r?(a.setData(function(t){return _.map(t,function(t){return"home maintenance"===t.item?(t.importance=.5*t.importance,t.effort=30*t.effort,t.urgency=10*t.urgency):t.importance=2.5*t.importance,t})}(n)),r=!1):(a.setData(function(t){return _.map(t,function(t){return"home maintenance"===t.item?(t.importance=t.importance/.5,t.effort=t.effort/30,t.urgency=t.urgency/10):t.importance=t.importance/2.5,t})}(n)),r=!0)},3e3)}if("afterAutomating"===t.currentSlide.getAttribute("id")&&!u){document.getElementById("afterAutomatingScatter").setAttribute("style","height:"+e+"px");n=_.map(s,function(t){return _.clone(t)});(u=new i.a.Chart({guide:{showGridLines:"",x:{label:{text:"Importance",padding:20},padding:10},y:{label:{text:"Urgency",padding:20},padding:10}},data:n,type:"scatterplot",x:"importance",y:"urgency",color:"area",size:"effort",plugins:[i.a.api.plugins.get("tooltip")({fields:["item"]}),i.a.api.plugins.get("legend")()]})).renderTo("#afterAutomatingScatter");r=!0;setInterval(function(){r?(u.setData(l(n)),r=!1):(u.setData(function(t){return _.map(t,function(t){return"life"===t.area&&(t.effort=3*t.effort),t})}(n)),r=!0)},3e3)}if("afterAutomating2"===t.currentSlide.getAttribute("id")&&!c){document.getElementById("afterAutomatingBar").setAttribute("style","height:"+e+"px");var f=l(_.map(s,function(t){var e=_.clone(t);return e.state="after",e})),h=_.map(s,function(t){var e=_.clone(t);return e.state="before",e}).concat(f);(c=new i.a.Chart({guide:{showGridLines:"",x:{label:{text:"Importance",padding:20},padding:10},y:{label:{text:"Effort",padding:20},padding:10}},data:h,type:"stacked-bar",x:"state",y:"effort",size:200,color:"area",plugins:[i.a.api.plugins.get("tooltip")({fields:["item"]}),i.a.api.plugins.get("legend")()]})).renderTo("#afterAutomatingBar")}"trainyourbrain"===t.currentSlide.getAttribute("id")?document.getElementById("focusmusic").play():document.getElementById("focusmusic").pause(),"worklifeblankrotate"===t.currentSlide.getAttribute("id")&&$("body").sparkleh({color:"rainbow",count:500,overlap:10})})},function(t,e,n){window,t.exports=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=15)}({0:function(e,n){e.exports=t},1:function(t,n){t.exports=e},15:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(4);function a(t){return new o.a(t)}i.a.api.plugins.add("tooltip",a),e.default=a},2:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r="tau-chart__tooltip";function i(t,e){return{render:function(t){return this.args=t,t=Object.assign({},t,{fields:this.filterFields(t.fields)}),this.rootTemplate(t)},rootTemplate:function(t){return['<div class="'+r+"__buttons "+r+'__clickable">',this.buttonsTemplate(),"</div>",'<div class="i-role-content '+r+'__content">',this.contentTemplate(t),"</div>"].join("\n")},contentTemplate:function(t){return this.fieldsTemplate(t)},filterFields:function(e){return e.filter(function(e){var n=e.split(".");return!(2===n.length&&t.skipInfo[n[0]])})},getLabel:function(e){return t.getFieldLabel(e)},getFormatter:function(e){return t.getFieldFormat(e)},fieldsTemplate:function(t){var e=this,n=t.data;return t.fields.map(function(t){return e.itemTemplate({data:n,field:t})}).join("\n")},itemTemplate:function(t){var e=t.data,n=t.field,i=this.getLabel(n),o=this.getFormatter(n)(e[n]);return['<div class="'+r+'__list__item">','  <div class="'+r+'__list__elem">'+i+"</div>",'  <div class="'+r+'__list__elem">'+o+"</div>","</div>"].join("\n")},buttonsTemplate:function(){return[this.buttonTemplate({cls:"i-role-exclude",text:"Exclude",icon:function(){return'<span class="tau-icon-close-gray"></span>'}})].join("\n")},buttonTemplate:function(t){var e=t.icon,n=t.text,i=t.cls;return['<div class="'+r+"__button "+i+'">','  <div class="'+r+'__button__wrap">',"    "+(e?e()+" ":"")+n,"  </div>","</div>"].join("\n")},didMount:function(){var e=t.getDomNode().querySelector(".i-role-exclude");e&&e.addEventListener("click",function(){t.excludeHighlightedElement(),t.setState({highlight:null,isStuck:!1})})}}}},4:function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(1),a=n(2),u=i.a.api.utils,c=i.a.api.domUtils,s=i.a.api.pluginsSDK,l="tau-chart__tooltip",f=function(){function t(t){this.settings=u.defaults(t||{},{align:"bottom-right",clsClickable:l+"__clickable",clsStuck:"stuck",clsTarget:l+"-target",escapeHtml:!0,fields:null,formatters:{},getTemplate:null,spacing:24,winBound:12}),this.onRender=this._getRenderHandler()}return t.prototype.init=function(t){this._chart=t,this._tooltip=this._chart.addBalloon({spacing:this.settings.spacing,winBound:this.settings.winBound,auto:!0,effectClass:"fade"}),this._initDomEvents(),this.state={highlight:null,isStuck:!1},this.setState(this.state),this._template=this._getTemplate()},t.prototype._getTemplate=function(){var t=Object(a.b)(this,this.settings);return"function"==typeof this.settings.getTemplate?this.settings.getTemplate(t,this,this.settings):t},t.prototype._renderTemplate=function(t,e){return this._template.render({data:t,fields:e})},t.prototype._initDomEvents=function(){var t=this;this._scrollHandler=function(){t.setState({highlight:null,isStuck:!1})},window.addEventListener("scroll",this._scrollHandler,!0),this._outerClickHandler=function(e){var n=Array.from(document.querySelectorAll("."+t.settings.clsClickable)).concat(t.getDomNode()).map(function(t){return t.getBoundingClientRect()}),r=Math.min.apply(Math,n.map(function(t){return t.top})),i=Math.min.apply(Math,n.map(function(t){return t.left})),o=Math.max.apply(Math,n.map(function(t){return t.right})),a=Math.max.apply(Math,n.map(function(t){return t.bottom}));(e.clientX<i||e.clientX>o||e.clientY<r||e.clientY>a)&&t.setState({highlight:null,isStuck:!1})}},t.prototype.getDomNode=function(){return this._tooltip.getElement()},t.prototype.setState=function(t){var e=this,n=this.settings,r=this.state,i=this.state=Object.assign({},r,t);r.highlight=r.highlight||{data:null,cursor:null,unit:null},i.highlight=i.highlight||{data:null,cursor:null,unit:null},i.isStuck&&r.highlight.data&&(i.highlight=r.highlight),i.highlight.data!==r.highlight.data&&(i.highlight.data?(this._hideTooltip(),this._showTooltip(i.highlight.data,i.highlight.cursor),this._setTargetSvgClass(!0),requestAnimationFrame(function(){e._setTargetSvgClass(!0)})):i.isStuck||!r.highlight.data||i.highlight.data||(this._removeFocus(),this._hideTooltip(),this._setTargetSvgClass(!1))),!i.highlight.data||r.highlight.cursor&&i.highlight.cursor.x===r.highlight.cursor.x&&i.highlight.cursor.y===r.highlight.cursor.y||(this._tooltip.position(i.highlight.cursor.x,i.highlight.cursor.y),this._tooltip.updateSize());var o=this.getDomNode();i.isStuck!==r.isStuck&&(i.isStuck?(window.addEventListener("click",this._outerClickHandler,!0),o.classList.add(n.clsStuck),this._setTargetEventsEnabled(!1),this._accentFocus(i.highlight.data),this._tooltip.updateSize()):(window.removeEventListener("click",this._outerClickHandler,!0),o.classList.remove(n.clsStuck),requestAnimationFrame(function(){e._setTargetEventsEnabled(!0);var t=e._chart.getSVG();t&&c.dispatchMouseEvent(t,"mouseleave")})))},t.prototype._showTooltip=function(t,e){var n=this.settings,r=n.fields||"function"==typeof n.getFields&&n.getFields(this._chart)||Object.keys(t),i=this._renderTemplate(t,r);this._tooltip.content(i).position(e.x,e.y).place(n.align).show().updateSize(),this._template.didMount&&this._template.didMount()},t.prototype._hideTooltip=function(){window.removeEventListener("click",this._outerClickHandler,!0),this._template.willUnmount&&this._template.willUnmount(),this._tooltip.hide()},t.prototype.destroy=function(){window.removeEventListener("scroll",this._scrollHandler,!0),this._setTargetSvgClass(!1),this.setState({highlight:null,isStuck:!1}),this._tooltip.destroy()},t.prototype._subscribeToHover=function(){var t=this,e=["ELEMENT.LINE","ELEMENT.AREA","ELEMENT.PATH","ELEMENT.INTERVAL","ELEMENT.INTERVAL.STACKED","ELEMENT.POINT"];this._chart.select(function(t){return e.indexOf(t.config.type)>=0}).forEach(function(e){e.on("data-hover",function(e,n){var r=document.body.getBoundingClientRect();t.setState({highlight:n.data?{data:n.data,cursor:{x:n.event.clientX-r.left,y:n.event.clientY-r.top},unit:n.unit}:null})}),e.on("data-click",function(e,n){var r=document.body.getBoundingClientRect();t.setState(n.data?{highlight:{data:n.data,cursor:{x:n.event.clientX-r.left,y:n.event.clientY-r.top},unit:n.unit},isStuck:!0}:{highlight:null,isStuck:null})})})},t.prototype.getFieldFormat=function(t){var e=this._formatters[t]?this._formatters[t].format:function(t){return String(t)};return this.settings.escapeHtml?function(t){return u.escapeHtml(e(t))}:e},t.prototype.getFieldLabel=function(t){var e=this._formatters[t]?this._formatters[t].label:t;return this.settings.escapeHtml?u.escapeHtml(e):e},t.prototype._accentFocus=function(t){var e=function(e){return e===t};this._chart.select(function(){return!0}).forEach(function(t){t.fire("highlight",e)})},t.prototype._removeFocus=function(){var t=function(){return null};this._chart.select(function(){return!0}).forEach(function(e){e.fire("highlight",t),e.fire("highlight-data-points",t)})},t.prototype.excludeHighlightedElement=function(){var t=this.state.highlight.data;this._chart.addFilter({tag:"exclude",predicate:function(e){return e!==t}}),this._chart.refresh()},t.prototype._getRenderHandler=function(){return function(){this._formatters=s.getFieldFormatters(this._chart.getSpec(),this.settings.formatters),this._subscribeToHover(),this.setState({highlight:null,isStuck:!1})}},t.prototype._setTargetSvgClass=function(t){o.select(this._chart.getSVG()).classed(this.settings.clsTarget,t)},t.prototype._setTargetEventsEnabled=function(t){t?this._chart.enablePointerEvents():this._chart.disablePointerEvents()},t}();e.a=f}})}(n(5),n(0))},function(t,e,n){window,t.exports=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=20)}({0:function(e,n){e.exports=t},20:function(t,e,n){"use strict";n.r(e);var r,i,o=n(0),a=n.n(o),u=n(8),c=a.a.api.utils,s=a.a.api.pluginsSDK,l=".tau-chart__legend__reset",f=".tau-chart__legend__item-color",h=".tau-chart__legend__guide--color__overlay",d=4,p=13,g=0,m=function(){return++g},y=a.a.api.utils.xml,v=function(t,e){var n=t[0],r=t[1],i=(r-n)/(e-1),o=c.range(e-2).map(function(t){return n+i*(t+1)});return[n].concat(o).concat(r)},b=function(t,e,n){if(t.length<3)return t.slice(0);if(e<3)return[t[0],t[t.length-1]];var r,i=t[0]<0?Math.abs(t[0]):0,o=function(t){return t},a="sqrt"===n?function(t){return Math.sqrt(t+i)}:o,u="sqrt"===n?function(t){return Math.pow(t,2)-i}:o,s=[(t=t.map(a))[0]],l=t[t.length-1]-t[0],f=.5*l/(e-1),h=c.range(1,e-1).map(function(t){var n=l*t/(e-1);return{min:n-f,mid:n,max:n+f,diff:Number.MAX_VALUE,closest:null}}),d=0,p=function(){if(d!==h.length){var t=r;(r=h[d++]).min=Math.max(r.min,(t&&null!==t.closest?t.closest:s[0])+f)}};return p(),t.forEach(function(t){if(!(t<r.min)){t>r.max&&p();var e=Math.abs(t-r.mid);e<r.diff&&e<f?(r.diff=e,r.closest=t):p(),0===e&&p()}}),h.forEach(function(t){null!==t.closest&&s.push(t.closest)}),s.push(t[t.length-1]),s=s.map(u)},_=function(t){return Math.log(t)/Math.LN10},x=function(t){return 0===t?0:Math.floor(_(Math.abs(t)))},w=(r=/\.0+([^\d].*)?$/,i=/(\.\d+?)0+([^\d].*)?$/,function(t){return t.replace(r,"$1").replace(i,"$1$2")}),M=u.format(".3s"),S=function(t){return w(M(t))},T=function(t,e){var n=Math.max(Math.abs(t),Math.abs(e)),r=x(n),i=t*e>0?Math.abs(e-t):n,o=x(i),a=Math.abs(r-o);return Math.abs(r)>3&&a<=3?S:function(t){var e=x(n-t),r=Math.min((o<0?Math.abs(o):0)+(e<o?1:0),20);return w(t.toFixed(r))}};function E(t){var e=c.defaults(t||{},{formatters:{}}),n=function(t){return null===t||""===t||void 0===t},r=function(t,e){return function(r){var i=r[t],o=JSON.stringify(n(i)?null:i);return e===o}},i=function(t,e,n,r){t.addEventListener(e,function(t){for(var e=t.target;e!==t.currentTarget&&null!==e;)e.matches(n)&&r(t,e),e=e.parentNode})};return{init:function(t){this.instanceId=m(),this._chart=t,this._currentFilters={},this._legendColorByScaleId={},this._legendOrderState={};var n=this._chart.getSpec(),r=function(t){return function(e,r){var i=n.scales[r];return i.type===t&&i.dim&&e.push(r),e}};this._color=Object.keys(n.scales).reduce(r("color"),[]).filter(function(e){return t.getScaleInfo(e).discrete}),this._fill=Object.keys(n.scales).reduce(r("color"),[]).filter(function(e){return!t.getScaleInfo(e).discrete}),this._size=Object.keys(n.scales).reduce(r("size"),[]);var o=this._color.length>0,a=this._fill.length>0,u=this._size.length>0;if(this._assignStaticBrewersOrEx(),o||a||u){switch(e.position){case"left":this._container=this._chart.insertToLeftSidebar(this._containerTemplate);break;case"right":this._container=this._chart.insertToRightSidebar(this._containerTemplate);break;case"top":this._container=this._chart.insertToHeader(this._containerTemplate);break;case"bottom":this._container=this._chart.insertToFooter(this._containerTemplate);break;default:this._container=this._chart.insertToRightSidebar(this._containerTemplate)}o&&(i(this._container,"click",l,function(t,e){this._toggleLegendItem(e,"reset")}.bind(this)),i(this._container,"click",f,function(t,e){var n=t.ctrlKey||t.target.matches(h)?"leave-others":"focus-single";this._toggleLegendItem(e,n)}.bind(this)),i(this._container,"mouseover",f,function(t,e){this._highlightToggle(e,!0)}.bind(this)),i(this._container,"mouseout",f,function(t,e){this._highlightToggle(e,!1)}.bind(this)))}},destroy:function(){var t=this._currentFilters,e=this._chart;Object.keys(t).forEach(function(n){return e.removeFilter(t[n])}),this._container&&this._container.parentElement&&(this._clearPanel(),this._container.parentElement.removeChild(this._container))},onSpecReady:function(t,n){this._formatters=s.getFieldFormatters(n,e.formatters)},_getFormat:function(t){return this._formatters[t]?this._formatters[t].format:function(t){return String(t)}},onRender:function(){this._clearPanel(),this._drawColorLegend(),this._drawFillLegend(),this._drawSizeLegend()},_containerTemplate:'<div class="tau-chart__legend"></div>',_template:c.template(['<div class="tau-chart__legend__wrap">',"<%=top%>",'<div class="tau-chart__legend__title"><%=name%></div>',"<%=items%>","</div>"].join("")),_itemTemplate:c.template(["<div data-scale-id='<%= scaleId %>' data-dim='<%= dim %>' data-value='<%= value %>' class=\"tau-chart__legend__item tau-chart__legend__item-color <%=classDisabled%>\">",'   <div class="tau-chart__legend__guide__wrap">','   <div class="tau-chart__legend__guide tau-chart__legend__guide--color <%=cssClass%>"','        style="background-color: <%=cssColor%>; border-color: <%=borderColor%>;">','       <div class="tau-chart__legend__guide--color__overlay">',"       </div>","   </div>","   </div>",'   <span class="tau-chart__legend__guide__label"><%=label%></span>',"</div>"].join("")),_resetTemplate:c.template(['<div class="tau-chart__legend__reset <%=classDisabled%>">','    <div role="button" class="tau-chart__button">Reset</div>',"</div>"].join("")),_clearPanel:function(){this._container&&(clearTimeout(this._scrollTimeout),this._getScrollContainer().removeEventListener("scroll",this._scrollListener),this._container.innerHTML="")},_drawFillLegend:function(){var t=this;t._fill.forEach(function(e){var n,r,i,o=t._chart.select(function(t){return t.config.color===e})[0];if(o){var a=o.config.guide||{},u=o.getScale("color"),l=u.domain().sort(function(t,e){return t-e}),f=l.reduce(function(t,e){return t&&c.isDate(e)},!0),h=f?l.map(Number):l,d=T(h[0],h[h.length-1]),g=function(){var e=t._chart.getSpec(),n=s.extractFieldsFormatInfo(e)[u.dim].format;return n||(n=function(t){return new Date(t)}),function(t){return String(n(t))}}(),m=f?g:d,b=u.brewer.length,_=((a.color||{}).label||{}).text||u.dim,x=function(t){return t.length*p*.618},w=u.isInteger?(h[1]-h[0])%3==0?4:(h[1]-h[0])%2==0?3:2:3,M=v(h,w),S=(f?M.map(function(t){return new Date(t)}):M).map(m);S[0]===S[S.length-1]&&(S=[S[0]]),t._container.insertAdjacentHTML("beforeend",t._template({name:_,top:null,items:'<div class="tau-chart__legend__gradient-wrapper"></div>'}));var E=t._container.lastElementChild.querySelector(".tau-chart__legend__gradient-wrapper"),k=E.getBoundingClientRect().width,A=!1;S.reduce(function(t,e){return t+x(e)},0)>k&&(S.length>1&&x(S[0])+x(S[S.length-1])>k?A=!0:S=[S[0],S[S.length-1]]);var O=A?(i=-.382*p/2,{width:k,height:120,barX:0,barY:0,barWidth:20,barHeight:120,textAnchor:"start",textX:c.range(w).map(function(){return 25}),textY:1===S.length?60+.618*p:S.map(function(t,e){var n=(S.length-1-e)/(S.length-1);return p*(1-n)+120*n+i})}):(n=x(S[0])/2,r=x(S[S.length-1])/2,{width:k,height:28+p,barX:0,barY:0,barWidth:k,barHeight:20,textAnchor:"middle",textX:1===S.length?[k/2]:S.map(function(t,e){var i=e/(S.length-1);return n*(1-i)+(k-r)*i}),textY:c.range(w).map(function(){return 28+p})}),C=v(h,b).map(function(t,e){return y("stop",{offset:e/(b-1)*100+"%",style:"stop-color:"+u(t)+';stop-opacity:1"'})}),N="legend-gradient-"+t.instanceId,j=y.apply(void 0,["svg",{class:"tau-chart__legend__gradient",width:O.width,height:O.height},y("defs",y.apply(void 0,["linearGradient",{id:N,x1:"0%",y1:A?"100%":"0%",x2:A?"0%":"100%",y2:"0%"}].concat(C))),y("rect",{class:"tau-chart__legend__gradient__bar",x:O.barX,y:O.barY,width:O.barWidth,height:O.barHeight,fill:"url(#"+N+")"})].concat(S.map(function(t,e){return y("text",{x:O.textX[e],y:O.textY[e],"text-anchor":O.textAnchor},t)})));E.insertAdjacentHTML("beforeend",j)}})},_drawSizeLegend:function(){var t=this;t._size.forEach(function(e){var n=t._chart.select(function(t){return t.config.size===e})[0];if(n){var r=n.config.guide||{},i=n.getScale("size"),o=i.domain().sort(function(t,e){return t-e});if(!Array.isArray(o)||!o.every(isFinite))return;var a=((r.size||{}).label||{}).text||i.dim,u=o[0],s=o[o.length-1],l=[u];if(s-u){var f=_(s-u),h=Math.round(4-f),g=Math.pow(10,h),m=c.unique(t._chart.getDataSources({excludeFilter:["legend"]})[i.source].data.map(function(t){return t[i.dim]}).filter(function(t){return t>=u&&t<=s})).sort(function(t,e){return t-e}),v=b(m,d,i.funcType);l=c.unique(v.map(function(t){return Math.round(t*g)/g}))}var x=T(l[0],l[l.length-1]),w=function(t){return t.length*p*.618};l.reverse();var M=l.map(i),S=Math.max.apply(null,M),E=l.map(x);t._container.insertAdjacentHTML("beforeend",t._template({name:a,top:null,items:'<div class="tau-chart__legend__size-wrapper"></div>'}));var k=t._container.lastElementChild.querySelector(".tau-chart__legend__size-wrapper"),A=k.getBoundingClientRect().width,O=!1;(Math.max.apply(null,E.map(w))>A/4||1===E.length)&&(O=!0);var C=O?function(){for(var t,e,n=p,r=M[0]/2,i=M[M.length-1]/2,o=[r],a=1;a<M.length;a++)e=M[a-1]/2,t=M[a]/2,o.push(o[a-1]+Math.max(1.618*p,e+n+t));var u=.618*p/2;return{width:A,height:o[o.length-1]+Math.max(i,p/2),circleX:c.range(M.length).map(function(){return S/2}),circleY:o,textAnchor:"start",textX:c.range(E.length).map(function(){return S+8}),textY:o.map(function(t){return t+u})}}():function(){for(var t,e,n=Math.max(w(E[0])/2,M[0]/2),r=Math.max(w(E[E.length-1])/2,M[M.length-1]/2),i=(A-M.reduce(function(t,e,n){return t+(0===n||n===M.length-1?e/2:e)},0)-n-r)/(d-1),o=[n],a=1;a<M.length;a++)e=M[a-1]/2,t=M[a]/2,o.push(o[a-1]+e+i+t);var u=M.map(function(t){return S-t/2});return{width:A,height:S+8+p,circleX:o,circleY:u,textAnchor:"middle",textX:o,textY:c.range(E.length).map(function(){return S+8+p})}}(),N=y.apply(void 0,["svg",{class:"tau-chart__legend__size",width:C.width,height:C.height}].concat(M.map(function(t,e){return y("circle",{class:"tau-chart__legend__size__item__circle "+(n.config.color?"color-definite":"color-default-size"),cx:C.circleX[e],cy:C.circleY[e],r:t/2})}),E.map(function(t,e){return y("text",{class:"tau-chart__legend__size__item__label",x:C.textX[e],y:C.textY[e],"text-anchor":C.textAnchor},t)})));k.insertAdjacentHTML("beforeend",N)}})},_drawColorLegend:function(){var t=this;t._color.forEach(function(e){var r=t._chart.select(function(t){return t.config.color===e})[0];if(r){var i=r.config.guide||{},o=r.getScale("color"),a=t._chart.getDataSources({excludeFilter:["legend"]}),u=c.unique(a[o.source].data.map(function(t){return t[o.dim]})),s=t._chart.getSpec().scales[e];if(s.order)u=c.union(c.intersection(s.order,u),u);else{var l=t._legendOrderState[e];u=u.sort(function(t,e){var n=l[t]-l[e];return n&&n/Math.abs(n)})}var f=((i.color||{}).label||{}).text||o.dim,h=(i.color||{}).tickFormatNullAlias||"No "+f,d=t._getFormat(o.dim),p=u.map(function(r){var i=JSON.stringify(n(r)?null:r),a=o.dim+i;return{scaleId:e,dim:o.dim,color:o(r),disabled:t._currentFilters.hasOwnProperty(a),label:d(r),value:i}});t._legendColorByScaleId[e]=p,t._container.insertAdjacentHTML("beforeend",t._template({name:f,top:t._resetTemplate({classDisabled:p.some(function(t){return t.disabled})?"":"disabled"}),items:p.map(function(e){return t._itemTemplate({scaleId:e.scaleId,dim:c.escape(e.dim),color:e.color,cssClass:o.toClass(e.color),cssColor:e.disabled?"transparent":o.toColor(e.color),borderColor:o.toColor(e.color),classDisabled:e.disabled?"disabled":"",label:c.escape(n(e.label)?h:e.label),value:c.escape(e.value)})}).join("")}))}}),t._color.length>0&&(t._updateResetButtonPosition(),t._scrollTimeout=null,t._scrollListener=function(){var e=t._container.querySelector(l);e.style.display="none",t._scrollTimeout&&clearTimeout(t._scrollTimeout),t._scrollTimeout=setTimeout(function(){t._updateResetButtonPosition(),e.style.display="",t._scrollTimeout=null},250)},t._getScrollContainer().addEventListener("scroll",t._scrollListener))},_toggleLegendItem:function(t,e){var n=this._currentFilters,i=t?Array.prototype.filter.call(t.parentNode.childNodes,function(t){return t.matches(f)}):null,o=function(t){var e=t.getAttribute("data-dim"),n=t.getAttribute("data-value");return{sid:t.getAttribute("data-scale-id"),dim:e,val:n,key:e+n}},a=function(t){return t in n},u=function(t,e){var i=o(t);if(a(i.key)===e)if(e){var u=n[i.key];delete n[i.key],t.classList.remove("disabled"),this._chart.removeFilter(u)}else{t.classList.add("disabled");var c=r(i.dim,i.val);n[i.key]=this._chart.addFilter({tag:"legend",predicate:function(t){return!c(t)}})}}.bind(this),c=function(e){return e===t},s=!!t&&a(o(t).key),l=function(t,e){t.querySelector(".tau-chart__legend__guide").style.backgroundColor=e?"":"transparent"};if("reset"===e)i.forEach(function(t){u(t,!0),l(t,!0)});else if("leave-others"===e)i.forEach(function(t){c(t)&&u(t,s)}),l(t,s);else if("focus-single"===e){var h=!s&&i.every(function(t){return c(t)||a(o(t).key)});i.forEach(function(t){var e=c(t)||h;u(t,e)}),s&&l(t,!0)}this._chart.refresh()},_highlightToggle:function(t,e){if(!t.matches(".disabled")){var n=t.getAttribute("data-dim"),i=t.getAttribute("data-value"),o=e?r(n,i):function(t){return null};this._chart.select(function(t){return!0}).forEach(function(t){t.fire("highlight",o)})}},_getScrollContainer:function(){return this._container.parentNode.parentNode},_updateResetButtonPosition:function(){this._container.querySelector(l).style.top=this._getScrollContainer().scrollTop+"px"},_generateColorMap:function(t,e){var n=e.length;return t.reduce(function(t,r,i){return t[r]=e[i%n],t},{})},_assignStaticBrewersOrEx:function(){var t=this;t._color.forEach(function(e){var n=t._chart.getSpec().scales[e],r=t._chart.getDataSources({excludeFilter:["legend"]}),i=t._chart.getScaleFactory(r).createScaleInfoByName(e).domain();if(!n.brewer||Array.isArray(n.brewer)){var o=n.brewer||c.range(20).map(function(t){return"color20-"+(1+t)});n.brewer=t._generateColorMap(i,o)}t._legendOrderState[e]=i.reduce(function(t,e,n){return t[e]=n,t},{})})}}}a.a.api.plugins.add("legend",E),e.default=E},8:function(t,n){t.exports=e}})}(n(5),n(6))},function(t,e,n){"use strict";n.r(e);var r=function(){return new i};function i(){this.reset()}i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(t){a(o,t,this.t),a(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i;function a(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var u=1e-6,c=Math.PI,s=c/2,l=c/4,f=2*c,h=180/c,d=c/180,p=Math.abs,g=Math.atan,m=Math.atan2,y=Math.cos,v=Math.ceil,b=Math.exp,_=(Math.floor,Math.log),x=Math.pow,w=Math.sin,M=Math.sign||function(t){return t>0?1:t<0?-1:0},S=Math.sqrt,T=Math.tan;function E(t){return t>1?0:t<-1?c:Math.acos(t)}function k(t){return t>1?s:t<-1?-s:Math.asin(t)}function A(t){return(t=w(t/2))*t}function O(){}function C(t,e){t&&j.hasOwnProperty(t.type)&&j[t.type](t,e)}var N={Feature:function(t,e){C(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)C(n[r].geometry,e)}},j={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){P(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)P(n[r],e,0)},Polygon:function(t,e){L(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)L(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)C(n[r],e)}};function P(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function L(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)P(t[n],e,1);e.polygonEnd()}var F,D,z,R,I,U=function(t,e){t&&N.hasOwnProperty(t.type)?N[t.type](t,e):C(t,e)},H=r(),B=r(),W={point:O,lineStart:O,lineEnd:O,polygonStart:function(){H.reset(),W.lineStart=Y,W.lineEnd=G},polygonEnd:function(){var t=+H;B.add(t<0?f+t:t),this.lineStart=this.lineEnd=this.point=O},sphere:function(){B.add(f)}};function Y(){W.point=X}function G(){q(F,D)}function X(t,e){W.point=q,F=t,D=e,z=t*=d,R=y(e=(e*=d)/2+l),I=w(e)}function q(t,e){e=(e*=d)/2+l;var n=(t*=d)-z,r=n>=0?1:-1,i=r*n,o=y(e),a=w(e),u=I*a,c=R*o+u*y(i),s=u*r*w(i);H.add(m(s,c)),z=t,R=o,I=a}var V=function(t){return B.reset(),U(t,W),2*B};function $(t){return[m(t[1],t[0]),k(t[2])]}function Z(t){var e=t[0],n=t[1],r=y(n);return[r*y(e),r*w(e),w(n)]}function J(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Q(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function K(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function tt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function et(t){var e=S(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var nt,rt,it,ot,at,ut,ct,st,lt,ft,ht=r(),dt={point:pt,lineStart:mt,lineEnd:yt,polygonStart:function(){dt.point=vt,dt.lineStart=bt,dt.lineEnd=_t,ht.reset(),W.polygonStart()},polygonEnd:function(){W.polygonEnd(),dt.point=pt,dt.lineStart=mt,dt.lineEnd=yt,H<0?(nt=-(it=180),rt=-(ot=90)):ht>u?ot=90:ht<-u&&(rt=-90),ft[0]=nt,ft[1]=it}};function pt(t,e){lt.push(ft=[nt=t,it=t]),e<rt&&(rt=e),e>ot&&(ot=e)}function gt(t,e){var n=Z([t*d,e*d]);if(st){var r=Q(st,n),i=Q([r[1],-r[0],0],r);et(i),i=$(i);var o,a=t-at,u=a>0?1:-1,c=i[0]*h*u,s=p(a)>180;s^(u*at<c&&c<u*t)?(o=i[1]*h)>ot&&(ot=o):s^(u*at<(c=(c+360)%360-180)&&c<u*t)?(o=-i[1]*h)<rt&&(rt=o):(e<rt&&(rt=e),e>ot&&(ot=e)),s?t<at?xt(nt,t)>xt(nt,it)&&(it=t):xt(t,it)>xt(nt,it)&&(nt=t):it>=nt?(t<nt&&(nt=t),t>it&&(it=t)):t>at?xt(nt,t)>xt(nt,it)&&(it=t):xt(t,it)>xt(nt,it)&&(nt=t)}else lt.push(ft=[nt=t,it=t]);e<rt&&(rt=e),e>ot&&(ot=e),st=n,at=t}function mt(){dt.point=gt}function yt(){ft[0]=nt,ft[1]=it,dt.point=pt,st=null}function vt(t,e){if(st){var n=t-at;ht.add(p(n)>180?n+(n>0?360:-360):n)}else ut=t,ct=e;W.point(t,e),gt(t,e)}function bt(){W.lineStart()}function _t(){vt(ut,ct),W.lineEnd(),p(ht)>u&&(nt=-(it=180)),ft[0]=nt,ft[1]=it,st=null}function xt(t,e){return(e-=t)<0?e+360:e}function wt(t,e){return t[0]-e[0]}function Mt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var St,Tt,Et,kt,At,Ot,Ct,Nt,jt,Pt,Lt,Ft,Dt,zt,Rt,It,Ut=function(t){var e,n,r,i,o,a,u;if(ot=it=-(nt=rt=1/0),lt=[],U(t,dt),n=lt.length){for(lt.sort(wt),e=1,o=[r=lt[0]];e<n;++e)Mt(r,(i=lt[e])[0])||Mt(r,i[1])?(xt(r[0],i[1])>xt(r[0],r[1])&&(r[1]=i[1]),xt(i[0],r[1])>xt(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(u=xt(r[1],i[0]))>a&&(a=u,nt=i[0],it=r[1])}return lt=ft=null,nt===1/0||rt===1/0?[[NaN,NaN],[NaN,NaN]]:[[nt,rt],[it,ot]]},Ht={sphere:O,point:Bt,lineStart:Yt,lineEnd:qt,polygonStart:function(){Ht.lineStart=Vt,Ht.lineEnd=$t},polygonEnd:function(){Ht.lineStart=Yt,Ht.lineEnd=qt}};function Bt(t,e){t*=d;var n=y(e*=d);Wt(n*y(t),n*w(t),w(e))}function Wt(t,e,n){Et+=(t-Et)/++St,kt+=(e-kt)/St,At+=(n-At)/St}function Yt(){Ht.point=Gt}function Gt(t,e){t*=d;var n=y(e*=d);zt=n*y(t),Rt=n*w(t),It=w(e),Ht.point=Xt,Wt(zt,Rt,It)}function Xt(t,e){t*=d;var n=y(e*=d),r=n*y(t),i=n*w(t),o=w(e),a=m(S((a=Rt*o-It*i)*a+(a=It*r-zt*o)*a+(a=zt*i-Rt*r)*a),zt*r+Rt*i+It*o);Tt+=a,Ot+=a*(zt+(zt=r)),Ct+=a*(Rt+(Rt=i)),Nt+=a*(It+(It=o)),Wt(zt,Rt,It)}function qt(){Ht.point=Bt}function Vt(){Ht.point=Zt}function $t(){Jt(Ft,Dt),Ht.point=Bt}function Zt(t,e){Ft=t,Dt=e,t*=d,e*=d,Ht.point=Jt;var n=y(e);zt=n*y(t),Rt=n*w(t),It=w(e),Wt(zt,Rt,It)}function Jt(t,e){t*=d;var n=y(e*=d),r=n*y(t),i=n*w(t),o=w(e),a=Rt*o-It*i,u=It*r-zt*o,c=zt*i-Rt*r,s=S(a*a+u*u+c*c),l=k(s),f=s&&-l/s;jt+=f*a,Pt+=f*u,Lt+=f*c,Tt+=l,Ot+=l*(zt+(zt=r)),Ct+=l*(Rt+(Rt=i)),Nt+=l*(It+(It=o)),Wt(zt,Rt,It)}var Qt=function(t){St=Tt=Et=kt=At=Ot=Ct=Nt=jt=Pt=Lt=0,U(t,Ht);var e=jt,n=Pt,r=Lt,i=e*e+n*n+r*r;return i<1e-12&&(e=Ot,n=Ct,r=Nt,Tt<u&&(e=Et,n=kt,r=At),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[m(n,e)*h,k(r/S(i))*h]},Kt=function(t){return function(){return t}},te=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function ee(t,e){return[t>c?t-f:t<-c?t+f:t,e]}function ne(t,e,n){return(t%=f)?e||n?te(ie(t),oe(e,n)):ie(t):e||n?oe(e,n):ee}function re(t){return function(e,n){return[(e+=t)>c?e-f:e<-c?e+f:e,n]}}function ie(t){var e=re(t);return e.invert=re(-t),e}function oe(t,e){var n=y(t),r=w(t),i=y(e),o=w(e);function a(t,e){var a=y(e),u=y(t)*a,c=w(t)*a,s=w(e),l=s*n+u*r;return[m(c*i-l*o,u*n-s*r),k(l*i+c*o)]}return a.invert=function(t,e){var a=y(e),u=y(t)*a,c=w(t)*a,s=w(e),l=s*i-c*o;return[m(c*i+s*o,u*n+l*r),k(l*n-u*r)]},a}ee.invert=ee;var ae=function(t){function e(e){return(e=t(e[0]*d,e[1]*d))[0]*=h,e[1]*=h,e}return t=ne(t[0]*d,t[1]*d,t.length>2?t[2]*d:0),e.invert=function(e){return(e=t.invert(e[0]*d,e[1]*d))[0]*=h,e[1]*=h,e},e};function ue(t,e,n,r,i,o){if(n){var a=y(e),u=w(e),c=r*n;null==i?(i=e+r*f,o=e-c/2):(i=ce(a,i),o=ce(a,o),(r>0?i<o:i>o)&&(i+=r*f));for(var s,l=i;r>0?l>o:l<o;l-=c)s=$([a,-u*y(l),-u*w(l)]),t.point(s[0],s[1])}}function ce(t,e){(e=Z(e))[0]-=t,et(e);var n=E(-e[1]);return((-e[2]<0?-n:n)+f-u)%f}var se=function(){var t,e,n=Kt([0,0]),r=Kt(90),i=Kt(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=h,n[1]*=h}};function a(){var a=n.apply(this,arguments),u=r.apply(this,arguments)*d,c=i.apply(this,arguments)*d;return t=[],e=ne(-a[0]*d,-a[1]*d,0).invert,ue(o,u,c,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:Kt([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:Kt(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:Kt(+t),a):i},a},le=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:O,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},fe=function(t,e){return p(t[0]-e[0])<u&&p(t[1]-e[1])<u};function he(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var de=function(t,e,n,r,i){var o,a,u=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(fe(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(n=new he(r,t,null,!0)),c.push(n.o=new he(r,null,n,!1)),u.push(n=new he(a,t,null,!1)),c.push(n.o=new he(a,null,n,!0))}}),u.length){for(c.sort(e),pe(u),pe(c),o=0,a=c.length;o<a;++o)c[o].e=n=!n;for(var s,l,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=s.length;o<a;++o)i.point((l=s[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((l=s[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}};function pe(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var ge=r(),me=function(t,e){var n=e[0],r=e[1],i=w(r),o=[w(n),-y(n),0],a=0,h=0;ge.reset(),1===i?r=s+u:-1===i&&(r=-s-u);for(var d=0,p=t.length;d<p;++d)if(v=(g=t[d]).length)for(var g,v,b=g[v-1],_=b[0],x=b[1]/2+l,M=w(x),S=y(x),T=0;T<v;++T,_=A,M=C,S=N,b=E){var E=g[T],A=E[0],O=E[1]/2+l,C=w(O),N=y(O),j=A-_,P=j>=0?1:-1,L=P*j,F=L>c,D=M*C;if(ge.add(m(D*P*w(L),S*N+D*y(L))),a+=F?j+P*f:j,F^_>=n^A>=n){var z=Q(Z(b),Z(E));et(z);var R=Q(o,z);et(R);var I=(F^j>=0?-1:1)*k(R[2]);(r>I||r===I&&(z[0]||z[1]))&&(h+=F^j>=0?1:-1)}}return(a<-u||a<u&&ge<-u)^1&h},ye=n(2),ve=function(t,e,n,r){return function(i){var o,a,u,c=e(i),s=le(),l=e(s),f=!1,h={point:d,lineStart:g,lineEnd:m,polygonStart:function(){h.point=y,h.lineStart=v,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=m,a=Object(ye.merge)(a);var t=me(o,r);a.length?(f||(i.polygonStart(),f=!0),de(a,_e,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){c.point(t,e)}function g(){h.point=p,c.lineStart()}function m(){h.point=d,c.lineEnd()}function y(t,e){u.push([t,e]),l.point(t,e)}function v(){l.lineStart(),u=[]}function b(){y(u[0][0],u[0][1]),l.lineEnd();var t,e,n,r,c=l.clean(),h=s.result(),d=h.length;if(u.pop(),o.push(u),u=null,d)if(1&c){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&c&&h.push(h.pop().concat(h.shift())),a.push(h.filter(be))}return h}};function be(t){return t.length>1}function _e(t,e){return((t=t.x)[0]<0?t[1]-s-u:s-t[1])-((e=e.x)[0]<0?e[1]-s-u:s-e[1])}var xe=ve(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var l=o>0?c:-c,f=p(o-n);p(f-c)<u?(t.point(n,r=(r+a)/2>0?s:-s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(l,r),t.point(o,r),e=0):i!==l&&f>=c&&(p(n-i)<u&&(n-=i*u),p(o-l)<u&&(o-=l*u),r=function(t,e,n,r){var i,o,a=w(t-n);return p(a)>u?g((w(e)*(o=y(r))*w(n)-w(r)*(i=y(e))*w(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(l,r),e=0),t.point(n=o,r=a),i=l},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*s,r.point(-c,i),r.point(0,i),r.point(c,i),r.point(c,0),r.point(c,-i),r.point(0,-i),r.point(-c,-i),r.point(-c,0),r.point(-c,i);else if(p(t[0]-e[0])>u){var o=t[0]<e[0]?c:-c;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-c,-s]);var we=function(t){var e=y(t),n=6*d,r=e>0,i=p(e)>u;function o(t,n){return y(t)*y(n)>e}function a(t,n,r){var i=[1,0,0],o=Q(Z(t),Z(n)),a=J(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var f=e*a/l,h=-e*s/l,d=Q(i,o),g=tt(i,f);K(g,tt(o,h));var m=d,y=J(g,m),v=J(m,m),b=y*y-v*(J(g,g)-1);if(!(b<0)){var _=S(b),x=tt(m,(-y-_)/v);if(K(x,g),x=$(x),!r)return x;var w,M=t[0],T=n[0],E=t[1],k=n[1];T<M&&(w=M,M=T,T=w);var A=T-M,O=p(A-c)<u;if(!O&&k<E&&(w=E,E=k,k=w),O||A<u?O?E+k>0^x[1]<(p(x[0]-M)<u?E:k):E<=x[1]&&x[1]<=k:A>c^(M<=x[0]&&x[0]<=T)){var C=tt(m,(-y+_)/v);return K(C,g),[x,$(C)]}}}function s(e,n){var i=r?t:c-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return ve(o,function(t){var e,n,l,f,h;return{lineStart:function(){f=l=!1,h=1},point:function(d,p){var g,m=[d,p],y=o(d,p),v=r?y?0:s(d,p):y?s(d+(d<0?c:-c),p):0;if(!e&&(f=l=y)&&t.lineStart(),y!==l&&(!(g=a(e,m))||fe(e,g)||fe(m,g))&&(m[0]+=u,m[1]+=u,y=o(m[0],m[1])),y!==l)h=0,y?(t.lineStart(),g=a(m,e),t.point(g[0],g[1])):(g=a(e,m),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(i&&e&&r^y){var b;v&n||!(b=a(m,e,!0))||(h=0,r?(t.lineStart(),t.point(b[0][0],b[0][1]),t.point(b[1][0],b[1][1]),t.lineEnd()):(t.point(b[1][0],b[1][1]),t.lineEnd(),t.lineStart(),t.point(b[0][0],b[0][1])))}!y||e&&fe(e,m)||t.point(m[0],m[1]),e=m,l=y,n=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return h|(f&&l)<<1}}},function(e,r,i,o){ue(o,t,n,i,e,r)},r?[0,-t]:[-c,t-c])},Me=function(t,e,n,r,i,o){var a,u=t[0],c=t[1],s=0,l=1,f=e[0]-u,h=e[1]-c;if(a=n-u,f||!(a>0)){if(a/=f,f<0){if(a<s)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>s&&(s=a)}if(a=i-u,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>s&&(s=a)}else if(f>0){if(a<s)return;a<l&&(l=a)}if(a=r-c,h||!(a>0)){if(a/=h,h<0){if(a<s)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>s&&(s=a)}if(a=o-c,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>s&&(s=a)}else if(h>0){if(a<s)return;a<l&&(l=a)}return s>0&&(t[0]=u+s*f,t[1]=c+s*h),l<1&&(e[0]=u+l*f,e[1]=c+l*h),!0}}}}},Se=1e9,Te=-Se;function Ee(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,u,c){var l=0,f=0;if(null==i||(l=a(i,u))!==(f=a(o,u))||s(i,o)<0^u>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+u+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return p(r[0]-t)<u?i>0?0:3:p(r[0]-n)<u?i>0?2:1:p(r[1]-e)<u?i>0?1:0:i>0?3:2}function c(t,e){return s(t.x,e.x)}function s(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,s,l,f,h,d,p,g,m,y,v,b=a,_=le(),x={point:w,lineStart:function(){x.point=M,s&&s.push(l=[]);y=!0,m=!1,p=g=NaN},lineEnd:function(){u&&(M(f,h),d&&m&&_.rejoin(),u.push(_.result()));x.point=w,m&&b.lineEnd()},polygonStart:function(){b=_,u=[],s=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=s.length;n<i;++n)for(var o,a,u=s[n],c=1,l=u.length,f=u[0],h=f[0],d=f[1];c<l;++c)o=h,a=d,f=u[c],h=f[0],d=f[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=Object(ye.merge)(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&de(u,c,e,o,a),a.polygonEnd());b=a,u=s=l=null}};function w(t,e){i(t,e)&&b.point(t,e)}function M(o,a){var u=i(o,a);if(s&&l.push([o,a]),y)f=o,h=a,d=u,y=!1,u&&(b.lineStart(),b.point(o,a));else if(u&&m)b.point(o,a);else{var c=[p=Math.max(Te,Math.min(Se,p)),g=Math.max(Te,Math.min(Se,g))],_=[o=Math.max(Te,Math.min(Se,o)),a=Math.max(Te,Math.min(Se,a))];Me(c,_,t,e,n,r)?(m||(b.lineStart(),b.point(c[0],c[1])),b.point(_[0],_[1]),u||b.lineEnd(),v=!1):u&&(b.lineStart(),b.point(o,a),v=!1)}p=o,g=a,m=u}return x}}var ke,Ae,Oe,Ce=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Ee(r,i,o,a)(e=n)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=e=null,n):[[r,i],[o,a]]}}},Ne=r(),je={sphere:O,point:O,lineStart:function(){je.point=Le,je.lineEnd=Pe},lineEnd:O,polygonStart:O,polygonEnd:O};function Pe(){je.point=je.lineEnd=O}function Le(t,e){ke=t*=d,Ae=w(e*=d),Oe=y(e),je.point=Fe}function Fe(t,e){t*=d;var n=w(e*=d),r=y(e),i=p(t-ke),o=y(i),a=r*w(i),u=Oe*n-Ae*r*o,c=Ae*n+Oe*r*o;Ne.add(m(S(a*a+u*u),c)),ke=t,Ae=n,Oe=r}var De=function(t){return Ne.reset(),U(t,je),+Ne},ze=[null,null],Re={type:"LineString",coordinates:ze},Ie=function(t,e){return ze[0]=t,ze[1]=e,De(Re)},Ue={Feature:function(t,e){return Be(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Be(n[r].geometry,e))return!0;return!1}},He={Sphere:function(){return!0},Point:function(t,e){return We(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(We(n[r],e))return!0;return!1},LineString:function(t,e){return Ye(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ye(n[r],e))return!0;return!1},Polygon:function(t,e){return Ge(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ge(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Be(n[r],e))return!0;return!1}};function Be(t,e){return!(!t||!He.hasOwnProperty(t.type))&&He[t.type](t,e)}function We(t,e){return 0===Ie(t,e)}function Ye(t,e){var n=Ie(t[0],t[1]);return Ie(t[0],e)+Ie(e,t[1])<=n+u}function Ge(t,e){return!!me(t.map(Xe),qe(e))}function Xe(t){return(t=t.map(qe)).pop(),t}function qe(t){return[t[0]*d,t[1]*d]}var Ve=function(t,e){return(t&&Ue.hasOwnProperty(t.type)?Ue[t.type]:Be)(t,e)};function $e(t,e,n){var r=Object(ye.range)(t,e-u,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Ze(t,e,n){var r=Object(ye.range)(t,e-u,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Je(){var t,e,n,r,i,o,a,c,s,l,f,h,d=10,g=d,m=90,y=360,b=2.5;function _(){return{type:"MultiLineString",coordinates:x()}}function x(){return Object(ye.range)(v(r/m)*m,n,m).map(f).concat(Object(ye.range)(v(c/y)*y,a,y).map(h)).concat(Object(ye.range)(v(e/d)*d,t,d).filter(function(t){return p(t%m)>u}).map(s)).concat(Object(ye.range)(v(o/g)*g,i,g).filter(function(t){return p(t%y)>u}).map(l))}return _.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(a).slice(1),f(n).reverse().slice(1),h(c).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],c=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),c>a&&(t=c,c=a,a=t),_.precision(b)):[[r,c],[n,a]]},_.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),_.precision(b)):[[e,o],[t,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(m=+t[0],y=+t[1],_):[m,y]},_.stepMinor=function(t){return arguments.length?(d=+t[0],g=+t[1],_):[d,g]},_.precision=function(u){return arguments.length?(b=+u,s=$e(o,i,90),l=Ze(e,t,b),f=$e(c,a,90),h=Ze(r,n,b),_):b},_.extentMajor([[-180,-90+u],[180,90-u]]).extentMinor([[-180,-80-u],[180,80+u]])}function Qe(){return Je()()}var Ke,tn,en,nn,rn=function(t,e){var n=t[0]*d,r=t[1]*d,i=e[0]*d,o=e[1]*d,a=y(r),u=w(r),c=y(o),s=w(o),l=a*y(n),f=a*w(n),p=c*y(i),g=c*w(i),v=2*k(S(A(o-r)+a*c*A(i-n))),b=w(v),_=v?function(t){var e=w(t*=v)/b,n=w(v-t)/b,r=n*l+e*p,i=n*f+e*g,o=n*u+e*s;return[m(i,r)*h,m(o,S(r*r+i*i))*h]}:function(){return[n*h,r*h]};return _.distance=v,_},on=function(t){return t},an=r(),un=r(),cn={point:O,lineStart:O,lineEnd:O,polygonStart:function(){cn.lineStart=sn,cn.lineEnd=hn},polygonEnd:function(){cn.lineStart=cn.lineEnd=cn.point=O,an.add(p(un)),un.reset()},result:function(){var t=an/2;return an.reset(),t}};function sn(){cn.point=ln}function ln(t,e){cn.point=fn,Ke=en=t,tn=nn=e}function fn(t,e){un.add(nn*t-en*e),en=t,nn=e}function hn(){fn(Ke,tn)}var dn=cn,pn=1/0,gn=pn,mn=-pn,yn=mn;var vn,bn,_n,xn,wn={point:function(t,e){t<pn&&(pn=t);t>mn&&(mn=t);e<gn&&(gn=e);e>yn&&(yn=e)},lineStart:O,lineEnd:O,polygonStart:O,polygonEnd:O,result:function(){var t=[[pn,gn],[mn,yn]];return mn=yn=-(gn=pn=1/0),t}},Mn=0,Sn=0,Tn=0,En=0,kn=0,An=0,On=0,Cn=0,Nn=0,jn={point:Pn,lineStart:Ln,lineEnd:zn,polygonStart:function(){jn.lineStart=Rn,jn.lineEnd=In},polygonEnd:function(){jn.point=Pn,jn.lineStart=Ln,jn.lineEnd=zn},result:function(){var t=Nn?[On/Nn,Cn/Nn]:An?[En/An,kn/An]:Tn?[Mn/Tn,Sn/Tn]:[NaN,NaN];return Mn=Sn=Tn=En=kn=An=On=Cn=Nn=0,t}};function Pn(t,e){Mn+=t,Sn+=e,++Tn}function Ln(){jn.point=Fn}function Fn(t,e){jn.point=Dn,Pn(_n=t,xn=e)}function Dn(t,e){var n=t-_n,r=e-xn,i=S(n*n+r*r);En+=i*(_n+t)/2,kn+=i*(xn+e)/2,An+=i,Pn(_n=t,xn=e)}function zn(){jn.point=Pn}function Rn(){jn.point=Un}function In(){Hn(vn,bn)}function Un(t,e){jn.point=Hn,Pn(vn=_n=t,bn=xn=e)}function Hn(t,e){var n=t-_n,r=e-xn,i=S(n*n+r*r);En+=i*(_n+t)/2,kn+=i*(xn+e)/2,An+=i,On+=(i=xn*t-_n*e)*(_n+t),Cn+=i*(xn+e),Nn+=3*i,Pn(_n=t,xn=e)}var Bn=jn;function Wn(t){this._context=t}Wn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,f)}},result:O};var Yn,Gn,Xn,qn,Vn,$n=r(),Zn={point:O,lineStart:function(){Zn.point=Jn},lineEnd:function(){Yn&&Qn(Gn,Xn),Zn.point=O},polygonStart:function(){Yn=!0},polygonEnd:function(){Yn=null},result:function(){var t=+$n;return $n.reset(),t}};function Jn(t,e){Zn.point=Qn,Gn=qn=t,Xn=Vn=e}function Qn(t,e){qn-=t,Vn-=e,$n.add(S(qn*qn+Vn*Vn)),qn=t,Vn=e}var Kn=Zn;function tr(){this._string=[]}function er(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}tr.prototype={_radius:4.5,_circle:er(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=er(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var nr=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),U(t,n(r))),r.result()}return o.area=function(t){return U(t,n(dn)),dn.result()},o.measure=function(t){return U(t,n(Kn)),Kn.result()},o.bounds=function(t){return U(t,n(wn)),wn.result()},o.centroid=function(t){return U(t,n(Bn)),Bn.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,on):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new tr):new Wn(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},rr=function(t){return{stream:ir(t)}};function ir(t){return function(e){var n=new or;for(var r in t)n[r]=t[r];return n.stream=e,n}}function or(){}function ar(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),U(n,t.stream(wn)),e(wn.result()),null!=r&&t.clipExtent(r),t}function ur(t,e,n){return ar(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,u=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,u])},n)}function cr(t,e,n){return ur(t,[[0,0],e],n)}function sr(t,e,n){return ar(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])},n)}function lr(t,e,n){return ar(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])},n)}or.prototype={constructor:or,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var fr=16,hr=y(30*d),dr=function(t,e){return+e?function(t,e){function n(r,i,o,a,c,s,l,f,h,d,g,y,v,b){var _=l-r,x=f-i,w=_*_+x*x;if(w>4*e&&v--){var M=a+d,T=c+g,E=s+y,A=S(M*M+T*T+E*E),O=k(E/=A),C=p(p(E)-1)<u||p(o-h)<u?(o+h)/2:m(T,M),N=t(C,O),j=N[0],P=N[1],L=j-r,F=P-i,D=x*L-_*F;(D*D/w>e||p((_*L+x*F)/w-.5)>.3||a*d+c*g+s*y<hr)&&(n(r,i,o,a,c,s,j,P,C,M/=A,T/=A,E,v,b),b.point(j,P),n(j,P,C,M,T,E,l,f,h,d,g,y,v,b))}}return function(e){var r,i,o,a,u,c,s,l,f,h,d,p,g={point:m,lineStart:y,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=_},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){l=NaN,g.point=v,e.lineStart()}function v(r,i){var o=Z([r,i]),a=t(r,i);n(l,f,s,h,d,p,l=a[0],f=a[1],s=r,h=o[0],d=o[1],p=o[2],fr,e),e.point(l,f)}function b(){g.point=m,e.lineEnd()}function _(){y(),g.point=x,g.lineEnd=w}function x(t,e){v(r=t,e),i=l,o=f,a=h,u=d,c=p,g.point=v}function w(){n(l,f,s,h,d,p,i,o,r,a,u,c,fr,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return ir({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var pr=ir({point:function(t,e){this.stream.point(t*d,e*d)}});function gr(t,e,n,r){var i=y(r),o=w(r),a=i*t,u=o*t,c=i/t,s=o/t,l=(o*n-i*e)/t,f=(o*e+i*n)/t;function h(t,r){return[a*t-u*r+e,n-u*t-a*r]}return h.invert=function(t,e){return[c*t-s*e+l,f-s*t-c*e]},h}function mr(t){return yr(function(){return t})()}function yr(t){var e,n,r,i,o,a,u,c,s,l,f=150,p=480,g=250,m=0,y=0,v=0,b=0,_=0,x=0,w=null,M=xe,T=null,E=on,k=.5;function A(t){return c(t[0]*d,t[1]*d)}function O(t){return(t=c.invert(t[0],t[1]))&&[t[0]*h,t[1]*h]}function C(){var t=gr(f,0,0,x).apply(null,e(m,y)),r=(x?gr:function(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r})(f,p-t[0],g-t[1],x);return n=ne(v,b,_),u=te(e,r),c=te(n,u),a=dr(u,k),N()}function N(){return s=l=null,A}return A.stream=function(t){return s&&l===t?s:s=pr(function(t){return ir({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(M(a(E(l=t)))))},A.preclip=function(t){return arguments.length?(M=t,w=void 0,N()):M},A.postclip=function(t){return arguments.length?(E=t,T=r=i=o=null,N()):E},A.clipAngle=function(t){return arguments.length?(M=+t?we(w=t*d):(w=null,xe),N()):w*h},A.clipExtent=function(t){return arguments.length?(E=null==t?(T=r=i=o=null,on):Ee(T=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),N()):null==T?null:[[T,r],[i,o]]},A.scale=function(t){return arguments.length?(f=+t,C()):f},A.translate=function(t){return arguments.length?(p=+t[0],g=+t[1],C()):[p,g]},A.center=function(t){return arguments.length?(m=t[0]%360*d,y=t[1]%360*d,C()):[m*h,y*h]},A.rotate=function(t){return arguments.length?(v=t[0]%360*d,b=t[1]%360*d,_=t.length>2?t[2]%360*d:0,C()):[v*h,b*h,_*h]},A.angle=function(t){return arguments.length?(x=t%360*d,C()):x*h},A.precision=function(t){return arguments.length?(a=dr(u,k=t*t),N()):S(k)},A.fitExtent=function(t,e){return ur(A,t,e)},A.fitSize=function(t,e){return cr(A,t,e)},A.fitWidth=function(t,e){return sr(A,t,e)},A.fitHeight=function(t,e){return lr(A,t,e)},function(){return e=t.apply(this,arguments),A.invert=e.invert&&O,C()}}function vr(t){var e=0,n=c/3,r=yr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*d,n=t[1]*d):[e*h,n*h]},i}function br(t,e){var n=w(t),r=(n+w(e))/2;if(p(r)<u)return function(t){var e=y(t);function n(t,n){return[t*e,w(n)/e]}return n.invert=function(t,n){return[t/e,k(n*e)]},n}(t);var i=1+n*(2*r-n),o=S(i)/r;function a(t,e){var n=S(i-2*r*w(e))/r;return[n*w(t*=r),o-n*y(t)]}return a.invert=function(t,e){var n=o-e;return[m(t,p(n))/r*M(n),k((i-(t*t+n*n)*r*r)/(2*r))]},a}var _r=function(){return vr(br).scale(155.424).center([0,33.6442])},xr=function(){return _r().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var wr=function(){var t,e,n,r,i,o,a=xr(),c=_r().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=_r().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){o=[t,e]}};function f(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,f}return f.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?c:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(t)},f.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([a.stream(e=n),c.stream(n),s.stream(n)])},f.precision=function(t){return arguments.length?(a.precision(t),c.precision(t),s.precision(t),h()):a.precision()},f.scale=function(t){return arguments.length?(a.scale(t),c.scale(.35*t),s.scale(t),f.translate(a.translate())):a.scale()},f.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,f-.238*e],[o+.455*e,f+.238*e]]).stream(l),r=c.translate([o-.307*e,f+.201*e]).clipExtent([[o-.425*e+u,f+.12*e+u],[o-.214*e-u,f+.234*e-u]]).stream(l),i=s.translate([o-.205*e,f+.212*e]).clipExtent([[o-.214*e+u,f+.166*e+u],[o-.115*e-u,f+.234*e-u]]).stream(l),h()},f.fitExtent=function(t,e){return ur(f,t,e)},f.fitSize=function(t,e){return cr(f,t,e)},f.fitWidth=function(t,e){return sr(f,t,e)},f.fitHeight=function(t,e){return lr(f,t,e)},f.scale(1070)};function Mr(t){return function(e,n){var r=y(e),i=y(n),o=t(r*i);return[o*i*w(e),o*w(n)]}}function Sr(t){return function(e,n){var r=S(e*e+n*n),i=t(r),o=w(i),a=y(i);return[m(e*o,r*a),k(r&&n*o/r)]}}var Tr=Mr(function(t){return S(2/(1+t))});Tr.invert=Sr(function(t){return 2*k(t/2)});var Er=function(){return mr(Tr).scale(124.75).clipAngle(179.999)},kr=Mr(function(t){return(t=E(t))&&t/w(t)});kr.invert=Sr(function(t){return t});var Ar=function(){return mr(kr).scale(79.4188).clipAngle(179.999)};function Or(t,e){return[t,_(T((s+e)/2))]}Or.invert=function(t,e){return[t,2*g(b(e))-s]};var Cr=function(){return Nr(Or).scale(961/f)};function Nr(t){var e,n,r,i=mr(t),o=i.center,a=i.scale,u=i.translate,s=i.clipExtent,l=null;function f(){var o=c*a(),u=i(ae(i.rotate()).invert([0,0]));return s(null==l?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===Or?[[Math.max(u[0]-o,l),e],[Math.min(u[0]+o,n),r]]:[[l,Math.max(u[1]-o,e)],[n,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),f()):a()},i.translate=function(t){return arguments.length?(u(t),f()):u()},i.center=function(t){return arguments.length?(o(t),f()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),f()):null==l?null:[[l,e],[n,r]]},f()}function jr(t){return T((s+t)/2)}function Pr(t,e){var n=y(t),r=t===e?w(t):_(n/y(e))/_(jr(e)/jr(t)),i=n*x(jr(t),r)/r;if(!r)return Or;function o(t,e){i>0?e<-s+u&&(e=-s+u):e>s-u&&(e=s-u);var n=i/x(jr(e),r);return[n*w(r*t),i-n*y(r*t)]}return o.invert=function(t,e){var n=i-e,o=M(r)*S(t*t+n*n);return[m(t,p(n))/r*M(n),2*g(x(i/o,1/r))-s]},o}var Lr=function(){return vr(Pr).scale(109.5).parallels([30,30])};function Fr(t,e){return[t,e]}Fr.invert=Fr;var Dr=function(){return mr(Fr).scale(152.63)};function zr(t,e){var n=y(t),r=t===e?w(t):(n-y(e))/(e-t),i=n/r+t;if(p(r)<u)return Fr;function o(t,e){var n=i-e,o=r*t;return[n*w(o),i-n*y(o)]}return o.invert=function(t,e){var n=i-e;return[m(t,p(n))/r*M(n),i-M(r)*S(t*t+n*n)]},o}var Rr=function(){return vr(zr).scale(131.154).center([0,13.9389])};function Ir(t,e){var n=y(e),r=y(t)*n;return[n*w(t)/r,w(e)/r]}Ir.invert=Sr(g);var Ur=function(){return mr(Ir).scale(144.049).clipAngle(60)};function Hr(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?on:ir({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}var Br=function(){var t,e,n,r,i,o,a=1,u=0,c=0,s=1,l=1,f=on,h=null,d=on;function p(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=f(d(i=t))},postclip:function(r){return arguments.length?(d=r,h=t=e=n=null,p()):d},clipExtent:function(r){return arguments.length?(d=null==r?(h=t=e=n=null,on):Ee(h=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),p()):null==h?null:[[h,t],[e,n]]},scale:function(t){return arguments.length?(f=Hr((a=+t)*s,a*l,u,c),p()):a},translate:function(t){return arguments.length?(f=Hr(a*s,a*l,u=+t[0],c=+t[1]),p()):[u,c]},reflectX:function(t){return arguments.length?(f=Hr(a*(s=t?-1:1),a*l,u,c),p()):s<0},reflectY:function(t){return arguments.length?(f=Hr(a*s,a*(l=t?-1:1),u,c),p()):l<0},fitExtent:function(t,e){return ur(o,t,e)},fitSize:function(t,e){return cr(o,t,e)},fitWidth:function(t,e){return sr(o,t,e)},fitHeight:function(t,e){return lr(o,t,e)}}};function Wr(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Wr.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(p(n)>u&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var Yr=function(){return mr(Wr).scale(175.295)};function Gr(t,e){return[y(e)*w(t),w(e)]}Gr.invert=Sr(k);var Xr=function(){return mr(Gr).scale(249.5).clipAngle(90+u)};function qr(t,e){var n=y(e),r=1+y(t)*n;return[n*w(t)/r,w(e)/r]}qr.invert=Sr(function(t){return 2*g(t)});var Vr=function(){return mr(qr).scale(250).clipAngle(142)};function $r(t,e){return[_(T((s+e)/2)),-t]}$r.invert=function(t,e){return[-e,2*g(b(t))-s]};var Zr=function(){var t=Nr($r),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};n.d(e,"geoArea",function(){return V}),n.d(e,"geoBounds",function(){return Ut}),n.d(e,"geoCentroid",function(){return Qt}),n.d(e,"geoCircle",function(){return se}),n.d(e,"geoClipAntimeridian",function(){return xe}),n.d(e,"geoClipCircle",function(){return we}),n.d(e,"geoClipExtent",function(){return Ce}),n.d(e,"geoClipRectangle",function(){return Ee}),n.d(e,"geoContains",function(){return Ve}),n.d(e,"geoDistance",function(){return Ie}),n.d(e,"geoGraticule",function(){return Je}),n.d(e,"geoGraticule10",function(){return Qe}),n.d(e,"geoInterpolate",function(){return rn}),n.d(e,"geoLength",function(){return De}),n.d(e,"geoPath",function(){return nr}),n.d(e,"geoAlbers",function(){return xr}),n.d(e,"geoAlbersUsa",function(){return wr}),n.d(e,"geoAzimuthalEqualArea",function(){return Er}),n.d(e,"geoAzimuthalEqualAreaRaw",function(){return Tr}),n.d(e,"geoAzimuthalEquidistant",function(){return Ar}),n.d(e,"geoAzimuthalEquidistantRaw",function(){return kr}),n.d(e,"geoConicConformal",function(){return Lr}),n.d(e,"geoConicConformalRaw",function(){return Pr}),n.d(e,"geoConicEqualArea",function(){return _r}),n.d(e,"geoConicEqualAreaRaw",function(){return br}),n.d(e,"geoConicEquidistant",function(){return Rr}),n.d(e,"geoConicEquidistantRaw",function(){return zr}),n.d(e,"geoEquirectangular",function(){return Dr}),n.d(e,"geoEquirectangularRaw",function(){return Fr}),n.d(e,"geoGnomonic",function(){return Ur}),n.d(e,"geoGnomonicRaw",function(){return Ir}),n.d(e,"geoIdentity",function(){return Br}),n.d(e,"geoProjection",function(){return mr}),n.d(e,"geoProjectionMutator",function(){return yr}),n.d(e,"geoMercator",function(){return Cr}),n.d(e,"geoMercatorRaw",function(){return Or}),n.d(e,"geoNaturalEarth1",function(){return Yr}),n.d(e,"geoNaturalEarth1Raw",function(){return Wr}),n.d(e,"geoOrthographic",function(){return Xr}),n.d(e,"geoOrthographicRaw",function(){return Gr}),n.d(e,"geoStereographic",function(){return Vr}),n.d(e,"geoStereographicRaw",function(){return qr}),n.d(e,"geoTransverseMercator",function(){return Zr}),n.d(e,"geoTransverseMercatorRaw",function(){return $r}),n.d(e,"geoRotation",function(){return ae}),n.d(e,"geoStream",function(){return U}),n.d(e,"geoTransform",function(){return rr})},function(t,e,n){"use strict";n.r(e);var r=Math.PI,i=2*r,o=i-1e-6;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function u(){return new a}a.prototype=u.prototype={constructor:a,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var a=this._x1,u=this._y1,c=n-t,s=i-e,l=a-t,f=u-e,h=l*l+f*f;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(f*c-s*l)>1e-6&&o){var d=n-a,p=i-u,g=c*c+s*s,m=d*d+p*p,y=Math.sqrt(g),v=Math.sqrt(h),b=o*Math.tan((r-Math.acos((g+h-m)/(2*y*v)))/2),_=b/v,x=b/y;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*l)+","+(e+_*f)),this._+="A"+o+","+o+",0,0,"+ +(f*d>l*p)+","+(this._x1=t+x*c)+","+(this._y1=e+x*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,a,u,c){t=+t,e=+e;var s=(n=+n)*Math.cos(a),l=n*Math.sin(a),f=t+s,h=e+l,d=1^c,p=c?a-u:u-a;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+f+","+h:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+f+","+h),n&&(p<0&&(p=p%i+i),p>o?this._+="A"+n+","+n+",0,1,"+d+","+(t-s)+","+(e-l)+"A"+n+","+n+",0,1,"+d+","+(this._x1=f)+","+(this._y1=h):p>1e-6&&(this._+="A"+n+","+n+",0,"+ +(p>=r)+","+d+","+(this._x1=t+n*Math.cos(u))+","+(this._y1=e+n*Math.sin(u))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var c=u,s=function(t){return function(){return t}},l=Math.abs,f=Math.atan2,h=Math.cos,d=Math.max,p=Math.min,g=Math.sin,m=Math.sqrt,y=1e-12,v=Math.PI,b=v/2,_=2*v;function x(t){return t>=1?b:t<=-1?-b:Math.asin(t)}function w(t){return t.innerRadius}function M(t){return t.outerRadius}function S(t){return t.startAngle}function T(t){return t.endAngle}function E(t){return t&&t.padAngle}function k(t,e,n,r,i,o,a){var u=t-n,c=e-r,s=(a?o:-o)/m(u*u+c*c),l=s*c,f=-s*u,h=t+l,p=e+f,g=n+l,y=r+f,v=(h+g)/2,b=(p+y)/2,_=g-h,x=y-p,w=_*_+x*x,M=i-o,S=h*y-g*p,T=(x<0?-1:1)*m(d(0,M*M*w-S*S)),E=(S*x-_*T)/w,k=(-S*_-x*T)/w,A=(S*x+_*T)/w,O=(-S*_+x*T)/w,C=E-v,N=k-b,j=A-v,P=O-b;return C*C+N*N>j*j+P*P&&(E=A,k=O),{cx:E,cy:k,x01:-l,y01:-f,x11:E*(i/M-1),y11:k*(i/M-1)}}var A=function(){var t=w,e=M,n=s(0),r=null,i=S,o=T,a=E,u=null;function d(){var s,d,w=+t.apply(this,arguments),M=+e.apply(this,arguments),S=i.apply(this,arguments)-b,T=o.apply(this,arguments)-b,E=l(T-S),A=T>S;if(u||(u=s=c()),M<w&&(d=M,M=w,w=d),M>y)if(E>_-y)u.moveTo(M*h(S),M*g(S)),u.arc(0,0,M,S,T,!A),w>y&&(u.moveTo(w*h(T),w*g(T)),u.arc(0,0,w,T,S,A));else{var O,C,N=S,j=T,P=S,L=T,F=E,D=E,z=a.apply(this,arguments)/2,R=z>y&&(r?+r.apply(this,arguments):m(w*w+M*M)),I=p(l(M-w)/2,+n.apply(this,arguments)),U=I,H=I;if(R>y){var B=x(R/w*g(z)),W=x(R/M*g(z));(F-=2*B)>y?(P+=B*=A?1:-1,L-=B):(F=0,P=L=(S+T)/2),(D-=2*W)>y?(N+=W*=A?1:-1,j-=W):(D=0,N=j=(S+T)/2)}var Y=M*h(N),G=M*g(N),X=w*h(L),q=w*g(L);if(I>y){var V=M*h(j),$=M*g(j),Z=w*h(P),J=w*g(P);if(E<v){var Q=F>y?function(t,e,n,r,i,o,a,u){var c=n-t,s=r-e,l=a-i,f=u-o,h=(l*(e-o)-f*(t-i))/(f*c-l*s);return[t+h*c,e+h*s]}(Y,G,Z,J,V,$,X,q):[X,q],K=Y-Q[0],tt=G-Q[1],et=V-Q[0],nt=$-Q[1],rt=1/g(function(t){return t>1?0:t<-1?v:Math.acos(t)}((K*et+tt*nt)/(m(K*K+tt*tt)*m(et*et+nt*nt)))/2),it=m(Q[0]*Q[0]+Q[1]*Q[1]);U=p(I,(w-it)/(rt-1)),H=p(I,(M-it)/(rt+1))}}D>y?H>y?(O=k(Z,J,Y,G,M,H,A),C=k(V,$,X,q,M,H,A),u.moveTo(O.cx+O.x01,O.cy+O.y01),H<I?u.arc(O.cx,O.cy,H,f(O.y01,O.x01),f(C.y01,C.x01),!A):(u.arc(O.cx,O.cy,H,f(O.y01,O.x01),f(O.y11,O.x11),!A),u.arc(0,0,M,f(O.cy+O.y11,O.cx+O.x11),f(C.cy+C.y11,C.cx+C.x11),!A),u.arc(C.cx,C.cy,H,f(C.y11,C.x11),f(C.y01,C.x01),!A))):(u.moveTo(Y,G),u.arc(0,0,M,N,j,!A)):u.moveTo(Y,G),w>y&&F>y?U>y?(O=k(X,q,V,$,w,-U,A),C=k(Y,G,Z,J,w,-U,A),u.lineTo(O.cx+O.x01,O.cy+O.y01),U<I?u.arc(O.cx,O.cy,U,f(O.y01,O.x01),f(C.y01,C.x01),!A):(u.arc(O.cx,O.cy,U,f(O.y01,O.x01),f(O.y11,O.x11),!A),u.arc(0,0,w,f(O.cy+O.y11,O.cx+O.x11),f(C.cy+C.y11,C.cx+C.x11),A),u.arc(C.cx,C.cy,U,f(C.y11,C.x11),f(C.y01,C.x01),!A))):u.arc(0,0,w,L,P,A):u.lineTo(X,q)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return d.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-v/2;return[h(r)*n,g(r)*n]},d.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:s(+e),d):t},d.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:s(+t),d):e},d.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:s(+t),d):n},d.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:s(+t),d):r},d.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:s(+t),d):i},d.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:s(+t),d):o},d.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:s(+t),d):a},d.context=function(t){return arguments.length?(u=null==t?null:t,d):u},d};function O(t){this._context=t}O.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var C=function(t){return new O(t)};function N(t){return t[0]}function j(t){return t[1]}var P=function(){var t=N,e=j,n=s(!0),r=null,i=C,o=null;function a(a){var u,s,l,f=a.length,h=!1;for(null==r&&(o=i(l=c())),u=0;u<=f;++u)!(u<f&&n(s=a[u],u,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(s,u,a),+e(s,u,a));if(l)return o=null,l+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:s(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:s(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:s(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},L=function(){var t=N,e=null,n=s(0),r=j,i=s(!0),o=null,a=C,u=null;function l(s){var l,f,h,d,p,g=s.length,m=!1,y=new Array(g),v=new Array(g);for(null==o&&(u=a(p=c())),l=0;l<=g;++l){if(!(l<g&&i(d=s[l],l,s))===m)if(m=!m)f=l,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),h=l-1;h>=f;--h)u.point(y[h],v[h]);u.lineEnd(),u.areaEnd()}m&&(y[l]=+t(d,l,s),v[l]=+n(d,l,s),u.point(e?+e(d,l,s):y[l],r?+r(d,l,s):v[l]))}if(p)return u=null,p+""||null}function f(){return P().defined(i).curve(a).context(o)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:s(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:s(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:s(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:s(+t),r=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:s(+t),l):n},l.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:s(+t),l):r},l.lineX0=l.lineY0=function(){return f().x(t).y(n)},l.lineY1=function(){return f().x(t).y(r)},l.lineX1=function(){return f().x(e).y(n)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:s(!!t),l):i},l.curve=function(t){return arguments.length?(a=t,null!=o&&(u=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=u=null:u=a(o=t),l):o},l},F=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},D=function(t){return t},z=function(){var t=D,e=F,n=null,r=s(0),i=s(_),o=s(0);function a(a){var u,c,s,l,f,h=a.length,d=0,p=new Array(h),g=new Array(h),m=+r.apply(this,arguments),y=Math.min(_,Math.max(-_,i.apply(this,arguments)-m)),v=Math.min(Math.abs(y)/h,o.apply(this,arguments)),b=v*(y<0?-1:1);for(u=0;u<h;++u)(f=g[p[u]=u]=+t(a[u],u,a))>0&&(d+=f);for(null!=e?p.sort(function(t,n){return e(g[t],g[n])}):null!=n&&p.sort(function(t,e){return n(a[t],a[e])}),u=0,s=d?(y-h*b)/d:0;u<h;++u,m=l)c=p[u],l=m+((f=g[c])>0?f*s:0)+b,g[c]={data:a[c],index:u,value:f,startAngle:m,endAngle:l,padAngle:v};return g}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:s(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:s(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:s(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:s(+t),a):o},a},R=U(C);function I(t){this._curve=t}function U(t){function e(e){return new I(t(e))}return e._curve=t,e}function H(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(U(t)):e()._curve},t}I.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var B=function(){return H(P().curve(R))},W=function(){var t=L().curve(R),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return H(n())},delete t.lineX0,t.lineEndAngle=function(){return H(r())},delete t.lineX1,t.lineInnerRadius=function(){return H(i())},delete t.lineY0,t.lineOuterRadius=function(){return H(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(U(t)):e()._curve},t},Y=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},G=Array.prototype.slice;function X(t){return t.source}function q(t){return t.target}function V(t){var e=X,n=q,r=N,i=j,o=null;function a(){var a,u=G.call(arguments),s=e.apply(this,u),l=n.apply(this,u);if(o||(o=a=c()),t(o,+r.apply(this,(u[0]=s,u)),+i.apply(this,u),+r.apply(this,(u[0]=l,u)),+i.apply(this,u)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:s(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:s(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function $(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function Z(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function J(t,e,n,r,i){var o=Y(e,n),a=Y(e,n=(n+i)/2),u=Y(r,n),c=Y(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],u[0],u[1],c[0],c[1])}function Q(){return V($)}function K(){return V(Z)}function tt(){var t=V(J);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var et={draw:function(t,e){var n=Math.sqrt(e/v);t.moveTo(n,0),t.arc(0,0,n,0,_)}},nt={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},rt=Math.sqrt(1/3),it=2*rt,ot={draw:function(t,e){var n=Math.sqrt(e/it),r=n*rt;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},at=Math.sin(v/10)/Math.sin(7*v/10),ut=Math.sin(_/10)*at,ct=-Math.cos(_/10)*at,st={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=ut*n,i=ct*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=_*o/5,u=Math.cos(a),c=Math.sin(a);t.lineTo(c*n,-u*n),t.lineTo(u*r-c*i,c*r+u*i)}t.closePath()}},lt={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},ft=Math.sqrt(3),ht={draw:function(t,e){var n=-Math.sqrt(e/(3*ft));t.moveTo(0,2*n),t.lineTo(-ft*n,-n),t.lineTo(ft*n,-n),t.closePath()}},dt=Math.sqrt(3)/2,pt=1/Math.sqrt(12),gt=3*(pt/2+1),mt={draw:function(t,e){var n=Math.sqrt(e/gt),r=n/2,i=n*pt,o=r,a=n*pt+n,u=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,c),t.lineTo(-.5*r-dt*i,dt*r+-.5*i),t.lineTo(-.5*o-dt*a,dt*o+-.5*a),t.lineTo(-.5*u-dt*c,dt*u+-.5*c),t.lineTo(-.5*r+dt*i,-.5*i-dt*r),t.lineTo(-.5*o+dt*a,-.5*a-dt*o),t.lineTo(-.5*u+dt*c,-.5*c-dt*u),t.closePath()}},yt=[et,nt,ot,lt,st,ht,mt],vt=function(){var t=s(et),e=s(64),n=null;function r(){var r;if(n||(n=r=c()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:s(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:s(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},bt=function(){};function _t(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function xt(t){this._context=t}xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_t(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_t(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var wt=function(t){return new xt(t)};function Mt(t){this._context=t}Mt.prototype={areaStart:bt,areaEnd:bt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_t(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var St=function(t){return new Mt(t)};function Tt(t){this._context=t}Tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:_t(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Et=function(t){return new Tt(t)};function kt(t,e){this._basis=new xt(t),this._beta=e}kt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,u=e[n]-o,c=-1;++c<=n;)r=c/n,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*e[c]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var At=function t(e){function n(t){return 1===e?new xt(t):new kt(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Ot(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ct(t,e){this._context=t,this._k=(1-e)/6}Ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ot(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ot(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Nt=function t(e){function n(t){return new Ct(t,e)}return n.tension=function(e){return t(+e)},n}(0);function jt(t,e){this._context=t,this._k=(1-e)/6}jt.prototype={areaStart:bt,areaEnd:bt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ot(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Pt=function t(e){function n(t){return new jt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Lt(t,e){this._context=t,this._k=(1-e)/6}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ot(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ft=function t(e){function n(t){return new Lt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Dt(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>y){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>y){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function zt(t,e){this._context=t,this._alpha=e}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Dt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Rt=function t(e){function n(t){return e?new zt(t,e):new Ct(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function It(t,e){this._context=t,this._alpha=e}It.prototype={areaStart:bt,areaEnd:bt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Dt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ut=function t(e){function n(t){return e?new It(t,e):new jt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ht(t,e){this._context=t,this._alpha=e}Ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Dt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bt=function t(e){function n(t){return e?new Ht(t,e):new Lt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Wt(t){this._context=t}Wt.prototype={areaStart:bt,areaEnd:bt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Yt=function(t){return new Wt(t)};function Gt(t){return t<0?-1:1}function Xt(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(Gt(o)+Gt(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function qt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Vt(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,a-u*n,o,a)}function $t(t){this._context=t}function Zt(t){this._context=new Jt(t)}function Jt(t){this._context=t}function Qt(t){return new $t(t)}function Kt(t){return new Zt(t)}function te(t){this._context=t}function ee(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}$t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Vt(this,this._t0,qt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Vt(this,qt(this,n=Xt(this,t,e)),n);break;default:Vt(this,this._t0,n=Xt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Zt.prototype=Object.create($t.prototype)).point=function(t,e){$t.prototype.point.call(this,e,t)},Jt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=ee(t),i=ee(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ne=function(t){return new te(t)};function re(t,e){this._context=t,this._t=e}re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var ie=function(t){return new re(t,.5)};function oe(t){return new re(t,0)}function ae(t){return new re(t,1)}var ue=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],u=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<u;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},ce=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function se(t,e){return t[e]}var le=function(){var t=s([]),e=ce,n=ue,r=se;function i(i){var o,a,u=t.apply(this,arguments),c=i.length,s=u.length,l=new Array(s);for(o=0;o<s;++o){for(var f,h=u[o],d=l[o]=new Array(c),p=0;p<c;++p)d[p]=f=[0,+r(i[p],h,p,i)],f.data=i[p];d.key=h}for(o=0,a=e(l);o<s;++o)l[a[o]].index=o;return n(l,a),l}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:s(G.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:s(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?ce:"function"==typeof t?t:s(G.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?ue:t,i):n},i},fe=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}ue(t,e)}},he=function(t,e){if((u=t.length)>1)for(var n,r,i,o,a,u,c=0,s=t[e[0]].length;c<s;++c)for(o=a=0,n=0;n<u;++n)(i=(r=t[e[n]][c])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},de=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<n;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}ue(t,e)}},pe=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var u=0,c=0,s=0;u<i;++u){for(var l=t[e[u]],f=l[a][1]||0,h=(f-(l[a-1][1]||0))/2,d=0;d<u;++d){var p=t[e[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}c+=f,s+=h*f}n[a-1][1]+=n[a-1][0]=o,c&&(o-=s/c)}n[a-1][1]+=n[a-1][0]=o,ue(t,e)}},ge=function(t){var e=t.map(me);return ce(t).sort(function(t,n){return e[t]-e[n]})};function me(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var ye=function(t){return ge(t).reverse()},ve=function(t){var e,n,r=t.length,i=t.map(me),o=ce(t).sort(function(t,e){return i[e]-i[t]}),a=0,u=0,c=[],s=[];for(e=0;e<r;++e)n=o[e],a<u?(a+=i[n],c.push(n)):(u+=i[n],s.push(n));return s.reverse().concat(c)},be=function(t){return ce(t).reverse()};n.d(e,"arc",function(){return A}),n.d(e,"area",function(){return L}),n.d(e,"line",function(){return P}),n.d(e,"pie",function(){return z}),n.d(e,"areaRadial",function(){return W}),n.d(e,"radialArea",function(){return W}),n.d(e,"lineRadial",function(){return B}),n.d(e,"radialLine",function(){return B}),n.d(e,"pointRadial",function(){return Y}),n.d(e,"linkHorizontal",function(){return Q}),n.d(e,"linkVertical",function(){return K}),n.d(e,"linkRadial",function(){return tt}),n.d(e,"symbol",function(){return vt}),n.d(e,"symbols",function(){return yt}),n.d(e,"symbolCircle",function(){return et}),n.d(e,"symbolCross",function(){return nt}),n.d(e,"symbolDiamond",function(){return ot}),n.d(e,"symbolSquare",function(){return lt}),n.d(e,"symbolStar",function(){return st}),n.d(e,"symbolTriangle",function(){return ht}),n.d(e,"symbolWye",function(){return mt}),n.d(e,"curveBasisClosed",function(){return St}),n.d(e,"curveBasisOpen",function(){return Et}),n.d(e,"curveBasis",function(){return wt}),n.d(e,"curveBundle",function(){return At}),n.d(e,"curveCardinalClosed",function(){return Pt}),n.d(e,"curveCardinalOpen",function(){return Ft}),n.d(e,"curveCardinal",function(){return Nt}),n.d(e,"curveCatmullRomClosed",function(){return Ut}),n.d(e,"curveCatmullRomOpen",function(){return Bt}),n.d(e,"curveCatmullRom",function(){return Rt}),n.d(e,"curveLinearClosed",function(){return Yt}),n.d(e,"curveLinear",function(){return C}),n.d(e,"curveMonotoneX",function(){return Qt}),n.d(e,"curveMonotoneY",function(){return Kt}),n.d(e,"curveNatural",function(){return ne}),n.d(e,"curveStep",function(){return ie}),n.d(e,"curveStepAfter",function(){return ae}),n.d(e,"curveStepBefore",function(){return oe}),n.d(e,"stack",function(){return le}),n.d(e,"stackOffsetExpand",function(){return fe}),n.d(e,"stackOffsetDiverging",function(){return he}),n.d(e,"stackOffsetNone",function(){return ue}),n.d(e,"stackOffsetSilhouette",function(){return de}),n.d(e,"stackOffsetWiggle",function(){return pe}),n.d(e,"stackOrderAscending",function(){return ge}),n.d(e,"stackOrderDescending",function(){return ye}),n.d(e,"stackOrderInsideOut",function(){return ve}),n.d(e,"stackOrderNone",function(){return ce}),n.d(e,"stackOrderReverse",function(){return be})},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(9),o=Array.prototype,a=o.map,u=o.slice,c={name:"implicit"};function s(t){var e=Object(i.a)(),n=[],r=c;function o(i){var o=i+"",a=e.get(o);if(!a){if(r!==c)return r;e.set(o,a=n.push(i))}return t[(a-1)%t.length]}return t=null==t?[]:u.call(t),o.domain=function(t){if(!arguments.length)return n.slice();n=[],e=Object(i.a)();for(var r,a,u=-1,c=t.length;++u<c;)e.has(a=(r=t[u])+"")||e.set(a,n.push(r));return o},o.range=function(e){return arguments.length?(t=u.call(e),o):t.slice()},o.unknown=function(t){return arguments.length?(r=t,o):r},o.copy=function(){return s().domain(n).range(t).unknown(r)},o}function l(){var t,e,n=s().unknown(void 0),i=n.domain,o=n.range,a=[0,1],u=!1,c=0,f=0,h=.5;function d(){var n=i().length,s=a[1]<a[0],l=a[s-0],d=a[1-s];t=(d-l)/Math.max(1,n-c+2*f),u&&(t=Math.floor(t)),l+=(d-l-t*(n-c))*h,e=t*(1-c),u&&(l=Math.round(l),e=Math.round(e));var p=Object(r.range)(n).map(function(e){return l+t*e});return o(s?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),d()):i()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],d()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],u=!0,d()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(u=!!t,d()):u},n.padding=function(t){return arguments.length?(c=f=Math.max(0,Math.min(1,t)),d()):c},n.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),d()):c},n.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),d()):f},n.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),d()):h},n.copy=function(){return l().domain(i()).range(a).round(u).paddingInner(c).paddingOuter(f).align(h)},d()}function f(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(l().paddingInner(1))}var h=n(4),d=function(t){return function(){return t}},p=function(t){return+t},g=[0,1];function m(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:d(e)}function y(t,e,n,r){var i=t[0],o=t[1],a=e[0],u=e[1];return o<i?(i=n(o,i),a=r(u,a)):(i=n(i,o),a=r(a,u)),function(t){return a(i(t))}}function v(t,e,n,i){var o=Math.min(t.length,e.length)-1,a=new Array(o),u=new Array(o),c=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<o;)a[c]=n(t[c],t[c+1]),u[c]=i(e[c],e[c+1]);return function(e){var n=Object(r.bisect)(t,e,1,o)-1;return u[n](a[n](e))}}function b(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function _(t,e){var n,r,i,o=g,c=g,s=h.a,l=!1;function f(){return n=Math.min(o.length,c.length)>2?v:y,r=i=null,d}function d(e){return(r||(r=n(o,c,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,s)))(+e)}return d.invert=function(t){return(i||(i=n(c,o,m,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},d.domain=function(t){return arguments.length?(o=a.call(t,p),f()):o.slice()},d.range=function(t){return arguments.length?(c=u.call(t),f()):c.slice()},d.rangeRound=function(t){return c=u.call(t),s=h.e,f()},d.clamp=function(t){return arguments.length?(l=!!t,f()):l},d.interpolate=function(t){return arguments.length?(s=t,f()):s},f()}var x=n(6),w=function(t,e,n){var i,o=t[0],a=t[t.length-1],u=Object(r.tickStep)(o,a,null==e?10:e);switch((n=Object(x.formatSpecifier)(null==n?",f":n)).type){case"s":var c=Math.max(Math.abs(o),Math.abs(a));return null!=n.precision||isNaN(i=Object(x.precisionPrefix)(u,c))||(n.precision=i),Object(x.formatPrefix)(n,c);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=Object(x.precisionRound)(u,Math.max(Math.abs(o),Math.abs(a))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=Object(x.precisionFixed)(u))||(n.precision=i-2*("%"===n.type))}return Object(x.format)(n)};function M(t){var e=t.domain;return t.ticks=function(t){var n=e();return Object(r.ticks)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return w(e(),t,n)},t.nice=function(n){null==n&&(n=10);var i,o=e(),a=0,u=o.length-1,c=o[a],s=o[u];return s<c&&(i=c,c=s,s=i,i=a,a=u,u=i),(i=Object(r.tickIncrement)(c,s,n))>0?(c=Math.floor(c/i)*i,s=Math.ceil(s/i)*i,i=Object(r.tickIncrement)(c,s,n)):i<0&&(c=Math.ceil(c*i)/i,s=Math.floor(s*i)/i,i=Object(r.tickIncrement)(c,s,n)),i>0?(o[a]=Math.floor(c/i)*i,o[u]=Math.ceil(s/i)*i,e(o)):i<0&&(o[a]=Math.ceil(c*i)/i,o[u]=Math.floor(s*i)/i,e(o)),t},t}function S(){var t=_(m,h.c);return t.copy=function(){return b(t,S())},M(t)}function T(){var t=[0,1];function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=a.call(n,p),e):t.slice()},e.copy=function(){return T().domain(t)},M(e)}var E=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function k(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:d(e)}function A(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function O(t){return isFinite(t)?+("1e"+t):t<0?0:t}function C(t){return 10===t?O:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function N(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function j(t){return function(e){return-t(-e)}}function P(){var t=_(k,A).domain([1,10]),e=t.domain,n=10,i=N(10),o=C(10);function a(){return i=N(n),o=C(n),e()[0]<0&&(i=j(i),o=j(o)),t}return t.base=function(t){return arguments.length?(n=+t,a()):n},t.domain=function(t){return arguments.length?(e(t),a()):e()},t.ticks=function(t){var a,u=e(),c=u[0],s=u[u.length-1];(a=s<c)&&(d=c,c=s,s=d);var l,f,h,d=i(c),p=i(s),g=null==t?10:+t,m=[];if(!(n%1)&&p-d<g){if(d=Math.round(d)-1,p=Math.round(p)+1,c>0){for(;d<p;++d)for(f=1,l=o(d);f<n;++f)if(!((h=l*f)<c)){if(h>s)break;m.push(h)}}else for(;d<p;++d)for(f=n-1,l=o(d);f>=1;--f)if(!((h=l*f)<c)){if(h>s)break;m.push(h)}}else m=Object(r.ticks)(d,p,Math.min(p-d,g)).map(o);return a?m.reverse():m},t.tickFormat=function(e,r){if(null==r&&(r=10===n?".0e":","),"function"!=typeof r&&(r=Object(x.format)(r)),e===1/0)return r;null==e&&(e=10);var a=Math.max(1,n*e/t.ticks().length);return function(t){var e=t/o(Math.round(i(t)));return e*n<n-.5&&(e*=n),e<=a?r(t):""}},t.nice=function(){return e(E(e(),{floor:function(t){return o(Math.floor(i(t)))},ceil:function(t){return o(Math.ceil(i(t)))}}))},t.copy=function(){return b(t,P().base(n))},t}function L(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function F(){var t=1,e=_(function(e,n){return(n=L(n,t)-(e=L(e,t)))?function(r){return(L(r,t)-e)/n}:d(n)},function(e,n){return n=L(n,t)-(e=L(e,t)),function(r){return L(e+n*r,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return b(e,F().exponent(t))},M(e)}function D(){return F().exponent(.5)}function z(){var t=[],e=[],n=[];function i(){var i=0,a=Math.max(1,e.length);for(n=new Array(a-1);++i<a;)n[i-1]=Object(r.quantile)(t,i/a);return o}function o(t){if(!isNaN(t=+t))return e[Object(r.bisect)(n,t)]}return o.invertExtent=function(r){var i=e.indexOf(r);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,o=0,a=e.length;o<a;++o)null==(n=e[o])||isNaN(n=+n)||t.push(n);return t.sort(r.ascending),i()},o.range=function(t){return arguments.length?(e=u.call(t),i()):e.slice()},o.quantiles=function(){return n.slice()},o.copy=function(){return z().domain(t).range(e)},o}function R(){var t=0,e=1,n=1,i=[.5],o=[0,1];function a(t){if(t<=t)return o[Object(r.bisect)(i,t,0,n)]}function c(){var r=-1;for(i=new Array(n);++r<n;)i[r]=((r+1)*e-(r-n)*t)/(n+1);return a}return a.domain=function(n){return arguments.length?(t=+n[0],e=+n[1],c()):[t,e]},a.range=function(t){return arguments.length?(n=(o=u.call(t)).length-1,c()):o.slice()},a.invertExtent=function(r){var a=o.indexOf(r);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=n?[i[n-1],e]:[i[a-1],i[a]]},a.copy=function(){return R().domain([t,e]).range(o)},M(a)}function I(){var t=[.5],e=[0,1],n=1;function i(i){if(i<=i)return e[Object(r.bisect)(t,i,0,n)]}return i.domain=function(r){return arguments.length?(t=u.call(r),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(r){return arguments.length?(e=u.call(r),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},i.copy=function(){return I().domain(t).range(e)},i}var U=n(1),H=n(8),B=1e3,W=60*B,Y=60*W,G=24*Y,X=7*G,q=30*G,V=365*G;function $(t){return new Date(t)}function Z(t){return t instanceof Date?+t:+new Date(+t)}function J(t,e,n,i,o,u,c,s,l){var f=_(m,h.c),d=f.invert,p=f.domain,g=l(".%L"),y=l(":%S"),v=l("%I:%M"),x=l("%I %p"),w=l("%a %d"),M=l("%b %d"),S=l("%B"),T=l("%Y"),k=[[c,1,B],[c,5,5*B],[c,15,15*B],[c,30,30*B],[u,1,W],[u,5,5*W],[u,15,15*W],[u,30,30*W],[o,1,Y],[o,3,3*Y],[o,6,6*Y],[o,12,12*Y],[i,1,G],[i,2,2*G],[n,1,X],[e,1,q],[e,3,3*q],[t,1,V]];function A(r){return(c(r)<r?g:u(r)<r?y:o(r)<r?v:i(r)<r?x:e(r)<r?n(r)<r?w:M:t(r)<r?S:T)(r)}function O(e,n,i,o){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(i-n)/e,u=Object(r.bisector)(function(t){return t[2]}).right(k,a);u===k.length?(o=Object(r.tickStep)(n/V,i/V,e),e=t):u?(o=(u=k[a/k[u-1][2]<k[u][2]/a?u-1:u])[1],e=u[0]):(o=Math.max(Object(r.tickStep)(n,i,e),1),e=s)}return null==o?e:e.every(o)}return f.invert=function(t){return new Date(d(t))},f.domain=function(t){return arguments.length?p(a.call(t,Z)):p().map($)},f.ticks=function(t,e){var n,r=p(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=O(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},f.tickFormat=function(t,e){return null==e?A:l(e)},f.nice=function(t,e){var n=p();return(t=O(t,n[0],n[n.length-1],e))?p(E(n,t)):f},f.copy=function(){return b(f,J(t,e,n,i,o,u,c,s,l))},f}var Q=function(){return J(U.timeYear,U.timeMonth,U.timeWeek,U.timeDay,U.timeHour,U.timeMinute,U.timeSecond,U.timeMillisecond,H.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},K=function(){return J(U.utcYear,U.utcMonth,U.utcWeek,U.utcDay,U.utcHour,U.utcMinute,U.utcSecond,U.utcMillisecond,H.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},tt=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},et=tt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),nt=tt("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),rt=tt("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),it=tt("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),ot=n(3),at=Object(h.b)(Object(ot.cubehelix)(300,.5,0),Object(ot.cubehelix)(-240,.5,1)),ut=Object(h.b)(Object(ot.cubehelix)(-100,.75,.35),Object(ot.cubehelix)(80,1.5,.8)),ct=Object(h.b)(Object(ot.cubehelix)(260,.75,.35),Object(ot.cubehelix)(80,1.5,.8)),st=Object(ot.cubehelix)(),lt=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return st.h=360*t-100,st.s=1.5-1.5*e,st.l=.8-.9*e,st+""};function ft(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var ht=ft(tt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),dt=ft(tt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),pt=ft(tt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),gt=ft(tt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function mt(t){var e=0,n=1,r=!1;function i(i){var o=(i-e)/(n-e);return t(r?Math.max(0,Math.min(1,o)):o)}return i.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.clamp=function(t){return arguments.length?(r=!!t,i):r},i.interpolator=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return mt(t).domain([e,n]).clamp(r)},M(i)}n.d(e,"scaleBand",function(){return l}),n.d(e,"scalePoint",function(){return f}),n.d(e,"scaleIdentity",function(){return T}),n.d(e,"scaleLinear",function(){return S}),n.d(e,"scaleLog",function(){return P}),n.d(e,"scaleOrdinal",function(){return s}),n.d(e,"scaleImplicit",function(){return c}),n.d(e,"scalePow",function(){return F}),n.d(e,"scaleSqrt",function(){return D}),n.d(e,"scaleQuantile",function(){return z}),n.d(e,"scaleQuantize",function(){return R}),n.d(e,"scaleThreshold",function(){return I}),n.d(e,"scaleTime",function(){return Q}),n.d(e,"scaleUtc",function(){return K}),n.d(e,"schemeCategory10",function(){return et}),n.d(e,"schemeCategory20b",function(){return nt}),n.d(e,"schemeCategory20c",function(){return rt}),n.d(e,"schemeCategory20",function(){return it}),n.d(e,"interpolateCubehelixDefault",function(){return at}),n.d(e,"interpolateRainbow",function(){return lt}),n.d(e,"interpolateWarm",function(){return ut}),n.d(e,"interpolateCool",function(){return ct}),n.d(e,"interpolateViridis",function(){return ht}),n.d(e,"interpolateMagma",function(){return dt}),n.d(e,"interpolateInferno",function(){return pt}),n.d(e,"interpolatePlasma",function(){return gt}),n.d(e,"scaleSequential",function(){return mt})},function(t,e,n){"use strict";n.r(e);function r(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,u,c,s,l,f,h,d=t._root,p={data:r},g=t._x0,m=t._y0,y=t._x1,v=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((s=e>=(o=(g+y)/2))?g=o:y=o,(l=n>=(a=(m+v)/2))?m=a:v=a,i=d,!(d=d[f=l<<1|s]))return i[f]=p,t;if(u=+t._x.call(null,d.data),c=+t._y.call(null,d.data),e===u&&n===c)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(s=e>=(o=(g+y)/2))?g=o:y=o,(l=n>=(a=(m+v)/2))?m=a:v=a}while((f=l<<1|s)==(h=(c>=a)<<1|u>=o));return i[h]=d,i[f]=p,t}var i=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function o(t){return t[0]}function a(t){return t[1]}function u(t,e,n){var r=new c(null==e?o:e,null==n?a:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function c(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function s(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var l=u.prototype=c.prototype;l.copy=function(){var t,e,n=new c(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=s(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=s(e));return n},l.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return r(this.cover(e,n),e,n,t)},l.addAll=function(t){var e,n,i,o,a=t.length,u=new Array(a),c=new Array(a),s=1/0,l=1/0,f=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(u[n]=i,c[n]=o,i<s&&(s=i),i>f&&(f=i),o<l&&(l=o),o>h&&(h=o));for(f<s&&(s=this._x0,f=this._x1),h<l&&(l=this._y0,h=this._y1),this.cover(s,l).cover(f,h),n=0;n<a;++n)r(this,u[n],c[n],t[n]);return this},l.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,u,c=i-n,s=this._root;switch(u=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do{(a=new Array(4))[u]=s,s=a}while(o=r+(c*=2),t>(i=n+c)||e>o);break;case 1:do{(a=new Array(4))[u]=s,s=a}while(o=r+(c*=2),(n=i-c)>t||e>o);break;case 2:do{(a=new Array(4))[u]=s,s=a}while(r=o-(c*=2),t>(i=n+c)||r>e);break;case 3:do{(a=new Array(4))[u]=s,s=a}while(r=o-(c*=2),(n=i-c)>t||r>e)}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},l.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},l.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},l.find=function(t,e,n){var r,o,a,u,c,s,l,f=this._x0,h=this._y0,d=this._x1,p=this._y1,g=[],m=this._root;for(m&&g.push(new i(m,f,h,d,p)),null==n?n=1/0:(f=t-n,h=e-n,d=t+n,p=e+n,n*=n);s=g.pop();)if(!(!(m=s.node)||(o=s.x0)>d||(a=s.y0)>p||(u=s.x1)<f||(c=s.y1)<h))if(m.length){var y=(o+u)/2,v=(a+c)/2;g.push(new i(m[3],y,v,u,c),new i(m[2],o,v,y,c),new i(m[1],y,a,u,v),new i(m[0],o,a,y,v)),(l=(e>=v)<<1|t>=y)&&(s=g[g.length-1],g[g.length-1]=g[g.length-1-l],g[g.length-1-l]=s)}else{var b=t-+this._x.call(null,m.data),_=e-+this._y.call(null,m.data),x=b*b+_*_;if(x<n){var w=Math.sqrt(n=x);f=t-w,h=e-w,d=t+w,p=e+w,r=m.data}}return r},l.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,u,c,s,l,f,h,d=this._root,p=this._x0,g=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((s=o>=(u=(p+m)/2))?p=u:m=u,(l=a>=(c=(g+y)/2))?g=c:y=c,e=d,!(d=d[f=l<<1|s]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},l.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},l.root=function(){return this._root},l.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},l.visit=function(t){var e,n,r,o,a,u,c=[],s=this._root;for(s&&c.push(new i(s,this._x0,this._y0,this._x1,this._y1));e=c.pop();)if(!t(s=e.node,r=e.x0,o=e.y0,a=e.x1,u=e.y1)&&s.length){var l=(r+a)/2,f=(o+u)/2;(n=s[3])&&c.push(new i(n,l,f,a,u)),(n=s[2])&&c.push(new i(n,r,f,l,u)),(n=s[1])&&c.push(new i(n,l,o,a,f)),(n=s[0])&&c.push(new i(n,r,o,l,f))}return this},l.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var a,u=e.x0,c=e.y0,s=e.x1,l=e.y1,f=(u+s)/2,h=(c+l)/2;(a=o[0])&&n.push(new i(a,u,c,f,h)),(a=o[1])&&n.push(new i(a,f,c,s,h)),(a=o[2])&&n.push(new i(a,u,h,f,l)),(a=o[3])&&n.push(new i(a,f,h,s,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},l.x=function(t){return arguments.length?(this._x=t,this):this._x},l.y=function(t){return arguments.length?(this._y=t,this):this._y},n.d(e,"quadtree",function(){return u})},function(t,e,n){"use strict";n.r(e);var r=n(9),i=n(7),o=function(t,e){var n,o,a,u,c=Object(i.a)("beforesend","progress","load","error"),s=Object(r.a)(),l=new XMLHttpRequest,f=null,h=null,d=0;function p(t){var e,r=l.status;if(!r&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||r>=200&&r<300||304===r){if(a)try{e=a.call(n,l)}catch(t){return void c.call("error",n,t)}else e=l;c.call("load",n,e)}else c.call("error",n,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=p:l.onreadystatechange=function(t){l.readyState>3&&p(t)},l.onprogress=function(t){c.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+""),n)},mimeType:function(t){return arguments.length?(o=null==t?null:t+"",n):o},responseType:function(t){return arguments.length?(u=t,n):u},timeout:function(t){return arguments.length?(d=+t,n):d},user:function(t){return arguments.length<1?f:(f=null==t?null:t+"",n)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",n)},response:function(t){return a=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,r,i){return l.open(e,t,!0,f,h),null==o||s.has("accept")||s.set("accept",o+",*/*"),l.setRequestHeader&&s.each(function(t,e){l.setRequestHeader(e,t)}),null!=o&&l.overrideMimeType&&l.overrideMimeType(o),null!=u&&(l.responseType=u),d>0&&(l.timeout=d),null==i&&"function"==typeof r&&(i=r,r=null),null!=i&&1===i.length&&(i=function(t){return function(e,n){t(null==e?n:null)}}(i)),null!=i&&n.on("error",i).on("load",function(t){i(null,t)}),c.call("beforesend",n,l),l.send(null==r?null:r),n},abort:function(){return l.abort(),n},on:function(){var t=c.on.apply(c,arguments);return t===c?n:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n};var a=function(t,e){return function(n,r){var i=o(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},u=a("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),c=a("application/json",function(t){return JSON.parse(t.responseText)}),s=a("text/plain",function(t){return t.responseText}),l=a("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),f={},h={},d=34,p=10,g=13;function m(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}var y=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,u=0,c=o<=0,s=!1;function l(){if(c)return h;if(s)return s=!1,f;var e,r,i=a;if(t.charCodeAt(i)===d){for(;a++<o&&t.charCodeAt(a)!==d||t.charCodeAt(++a)===d;);return(e=a)>=o?c=!0:(r=t.charCodeAt(a++))===p?s=!0:r===g&&(s=!0,t.charCodeAt(a)===p&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(e=a++))===p)s=!0;else if(r===g)s=!0,t.charCodeAt(a)===p&&++a;else if(r!==n)continue;return t.slice(i,e)}return c=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===p&&--o,t.charCodeAt(o-1)===g&&--o;(r=l())!==h;){for(var m=[];r!==f&&r!==h;)m.push(r),r=l();e&&null==(m=e(m,u++))||i.push(m)}return i}function i(e){return e.map(o).join(t)}function o(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=m(t);return function(r,i){return e(n(r),i,t)}}(t,e):m(t)});return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(o).join(t)].concat(e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}},v=y(","),b=v.parse,_=(v.parseRows,v.format,v.formatRows,y("\t")),x=_.parse,w=(_.parseRows,_.format,_.formatRows,function(t,e){return function(n,r,i){arguments.length<3&&(i=r,r=null);var a=o(n).mimeType(t);return a.row=function(t){return arguments.length?a.response(function(t,e){return function(n){return t(n.responseText,e)}}(e,r=t)):r},a.row(r),i?a.get(i):a}});var M=w("text/csv",b),S=w("text/tab-separated-values",x);n.d(e,"request",function(){return o}),n.d(e,"html",function(){return u}),n.d(e,"json",function(){return c}),n.d(e,"text",function(){return s}),n.d(e,"xml",function(){return l}),n.d(e,"csv",function(){return M}),n.d(e,"tsv",function(){return S})},function(t,e,n){"use strict";n.r(e);var r=function(t){return t},i=function(t){if(null==t)return r;var e,n,i=t.scale[0],o=t.scale[1],a=t.translate[0],u=t.translate[1];return function(t,r){r||(e=n=0);var c=2,s=t.length,l=new Array(s);for(l[0]=(e+=t[0])*i+a,l[1]=(n+=t[1])*o+u;c<s;)l[c]=t[c],++c;return l}},o=function(t){var e,n=i(t.transform),r=1/0,o=r,a=-r,u=-r;function c(t){(t=n(t))[0]<r&&(r=t[0]),t[0]>a&&(a=t[0]),t[1]<o&&(o=t[1]),t[1]>u&&(u=t[1])}function s(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(s);break;case"Point":c(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(c)}}for(e in t.arcs.forEach(function(t){for(var e,i=-1,c=t.length;++i<c;)(e=n(t[i],i))[0]<r&&(r=e[0]),e[0]>a&&(a=e[0]),e[1]<o&&(o=e[1]),e[1]>u&&(u=e[1])}),t.objects)s(t.objects[e]);return[r,o,a,u]},a=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},u=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return c(t,e)})}:c(t,e)};function c(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=s(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function s(t,e){var n=i(t.transform),r=t.arcs;function o(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,u=i.length;o<u;++o)e.push(n(i[o],o));t<0&&a(e,u)}function u(t){return n(t)}function c(t){for(var e=[],n=0,r=t.length;n<r;++n)o(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=c(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=u(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(u);break;case"LineString":n=c(e.arcs);break;case"MultiLineString":n=e.arcs.map(c);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}var l=function(t,e){var n={},r={},i={},o=[],a=-1;function u(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),u=a[0],c=a[1];if(n=i[u])if(delete i[n.end],n.push(e),n.end=c,o=r[c]){delete r[o.start];var s=o===n?n:n.concat(o);r[s.start=n.start]=i[s.end=o.end]=s}else r[n.start]=i[n.end]=n;else if(n=r[c])if(delete r[n.start],n.unshift(e),n.start=u,o=i[u]){delete i[o.end];var l=o===n?n:o.concat(n);r[l.start=o.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=u]=i[n.end=c]=n}),u(i,r),u(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o},f=function(t){return s(t,h.apply(this,arguments))};function h(t,e,n){var r,i,o;if(arguments.length>1)r=function(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function u(t){t.forEach(a)}function c(t){t.forEach(u)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":u(e.arcs);break;case"MultiLineString":case"Polygon":c(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(c)}(e.arcs)}}(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:l(t,r)}}var d=function(t){return s(t,p.apply(this,arguments))};function p(t,e){var n={},r=[],i=[];function o(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),r.push(t)}function a(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(s(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),r.forEach(function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(e){var r,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&i.push(t)})})}),(r=(i=l(t,i)).length)>1)for(var o,u,c=1,s=a(i[0]);c<r;++c)(o=a(i[c]))>s&&(u=i[0],i[0]=i[c],i[c]=u,s=o);return i})}}var g=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n},m=function(t){var e={},n=t.map(function(){return[]});function r(t,n){t.forEach(function(t){t<0&&(t=~t);var r=e[t];r?r.push(n):e[t]=[n]})}function i(t,e){t.forEach(function(t){r(t,e)})}var o={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach(function(t){i(t,e)})}};for(var a in t.forEach(function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach(function(e){t(e,n)}):e.type in o&&o[e.type](e.arcs,n)}),e)for(var u=e[a],c=u.length,s=0;s<c;++s)for(var l=s+1;l<c;++l){var f,h=u[s],d=u[l];(f=n[h])[a=g(f,d)]!==d&&f.splice(a,0,d),(f=n[d])[a=g(f,h)]!==h&&f.splice(a,0,h)}return n},y=function(t){if(null==t)return r;var e,n,i=t.scale[0],o=t.scale[1],a=t.translate[0],u=t.translate[1];return function(t,r){r||(e=n=0);var c=2,s=t.length,l=new Array(s),f=Math.round((t[0]-a)/i),h=Math.round((t[1]-u)/o);for(l[0]=f-e,e=f,l[1]=h-n,n=h;c<s;)l[c]=t[c],++c;return l}},v=function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)c=t.bbox;else{if(!((n=Math.floor(e))>=2))throw new Error("n must be 2");var n,r=(c=t.bbox||o(t))[0],i=c[1],a=c[2],u=c[3];e={scale:[a-r?(a-r)/(n-1):1,u-i?(u-i)/(n-1):1],translate:[r,i]}}var c,s,l=y(e),f=t.objects,h={};function d(t){return l(t)}function p(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(p)};break;case"Point":e={type:"Point",coordinates:d(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(d)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(s in f)h[s]=p(f[s]);return{type:"Topology",bbox:c,transform:e,objects:h,arcs:t.arcs.map(function(t){var e,n=0,r=1,i=t.length,o=new Array(i);for(o[0]=l(t[0],0);++n<i;)((e=l(t[n],n))[0]||e[1])&&(o[r++]=e);return 1===r&&(o[r++]=[0,0]),o.length=r,o})}};n.d(e,"bbox",function(){return o}),n.d(e,"feature",function(){return u}),n.d(e,"mesh",function(){return f}),n.d(e,"meshArcs",function(){return h}),n.d(e,"merge",function(){return d}),n.d(e,"mergeArcs",function(){return p}),n.d(e,"neighbors",function(){return m}),n.d(e,"quantize",function(){return v}),n.d(e,"transform",function(){return i}),n.d(e,"untransform",function(){return y})},function(t,e,n){"use strict";n.r(e);var r=n(7),i=n(0);var o=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()},a=function(t){var e=t.document.documentElement,n=Object(i.select)(t).on("dragstart.drag",o,!0);"onselectstart"in e?n.on("selectstart.drag",o,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function u(t,e){var n=t.document.documentElement,r=Object(i.select)(t).on("dragstart.drag",null);e&&(r.on("click.drag",o,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function c(t,e,n,r,i,o,a,u,c,s){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=c,this._=s}c.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var s=n(4),l=n(10),f=function(t){return function(){return t}},h=function(t,e,n){this.target=t,this.type=e,this.selection=n};function d(){i.event.stopImmediatePropagation()}var p=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()},g={name:"drag"},m={name:"space"},y={name:"handle"},v={name:"center"},b={name:"x",handles:["e","w"].map(k),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},_={name:"y",handles:["n","s"].map(k),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},x={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(k),input:function(t){return t},output:function(t){return t}},w={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},M={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},S={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},T={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},E={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function k(t){return{type:t}}function A(){return!i.event.button}function O(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function C(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function N(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function j(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function P(){return D(b)}function L(){return D(_)}var F=function(){return D(x)};function D(t){var e,n=O,o=A,c=Object(r.a)(j,"start","brush","end"),x=6;function j(e){var n=e.property("__brush",z).selectAll(".overlay").data([k("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",w.overlay).merge(n).each(function(){var t=C(this).extent;Object(i.select)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([k("selection")]).enter().append("rect").attr("class","selection").attr("cursor",w.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return w[t.type]}),e.each(P).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",D)}function P(){var t=Object(i.select)(this),e=C(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-x/2:e[0][0]-x/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-x/2:e[0][1]-x/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+x:x}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+x:x})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function L(t,e){return t.__brush.emitter||new F(t,e)}function F(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function D(){if(i.event.touches){if(i.event.changedTouches.length<i.event.touches.length)return p()}else if(e)return;if(o.apply(this,arguments)){var n,r,c,s,f,h,x,k,A,O,j,F,D,z=this,R=i.event.target.__data__.type,I="selection"===(i.event.metaKey?R="overlay":R)?g:i.event.altKey?v:y,U=t===_?null:T[R],H=t===b?null:E[R],B=C(z),W=B.extent,Y=B.selection,G=W[0][0],X=W[0][1],q=W[1][0],V=W[1][1],$=U&&H&&i.event.shiftKey,Z=Object(i.mouse)(z),J=Z,Q=L(z,arguments).beforestart();"overlay"===R?B.selection=Y=[[n=t===_?G:Z[0],c=t===b?X:Z[1]],[f=t===_?q:n,x=t===b?V:c]]:(n=Y[0][0],c=Y[0][1],f=Y[1][0],x=Y[1][1]),r=n,s=c,h=f,k=x;var K=Object(i.select)(z).attr("pointer-events","none"),tt=K.selectAll(".overlay").attr("cursor",w[R]);if(i.event.touches)K.on("touchmove.brush",nt,!0).on("touchend.brush touchcancel.brush",it,!0);else{var et=Object(i.select)(i.event.view).on("keydown.brush",function(){switch(i.event.keyCode){case 16:$=U&&H;break;case 18:I===y&&(U&&(f=h-A*U,n=r+A*U),H&&(x=k-O*H,c=s+O*H),I=v,rt());break;case 32:I!==y&&I!==v||(U<0?f=h-A:U>0&&(n=r-A),H<0?x=k-O:H>0&&(c=s-O),I=m,tt.attr("cursor",w.selection),rt());break;default:return}p()},!0).on("keyup.brush",function(){switch(i.event.keyCode){case 16:$&&(F=D=$=!1,rt());break;case 18:I===v&&(U<0?f=h:U>0&&(n=r),H<0?x=k:H>0&&(c=s),I=y,rt());break;case 32:I===m&&(i.event.altKey?(U&&(f=h-A*U,n=r+A*U),H&&(x=k-O*H,c=s+O*H),I=v):(U<0?f=h:U>0&&(n=r),H<0?x=k:H>0&&(c=s),I=y),tt.attr("cursor",w[R]),rt());break;default:return}p()},!0).on("mousemove.brush",nt,!0).on("mouseup.brush",it,!0);a(i.event.view)}d(),Object(l.interrupt)(z),P.call(z),Q.start()}function nt(){var t=Object(i.mouse)(z);!$||F||D||(Math.abs(t[0]-J[0])>Math.abs(t[1]-J[1])?D=!0:F=!0),J=t,j=!0,p(),rt()}function rt(){var t;switch(A=J[0]-Z[0],O=J[1]-Z[1],I){case m:case g:U&&(A=Math.max(G-n,Math.min(q-f,A)),r=n+A,h=f+A),H&&(O=Math.max(X-c,Math.min(V-x,O)),s=c+O,k=x+O);break;case y:U<0?(A=Math.max(G-n,Math.min(q-n,A)),r=n+A,h=f):U>0&&(A=Math.max(G-f,Math.min(q-f,A)),r=n,h=f+A),H<0?(O=Math.max(X-c,Math.min(V-c,O)),s=c+O,k=x):H>0&&(O=Math.max(X-x,Math.min(V-x,O)),s=c,k=x+O);break;case v:U&&(r=Math.max(G,Math.min(q,n-A*U)),h=Math.max(G,Math.min(q,f+A*U))),H&&(s=Math.max(X,Math.min(V,c-O*H)),k=Math.max(X,Math.min(V,x+O*H)))}h<r&&(U*=-1,t=n,n=f,f=t,t=r,r=h,h=t,R in M&&tt.attr("cursor",w[R=M[R]])),k<s&&(H*=-1,t=c,c=x,x=t,t=s,s=k,k=t,R in S&&tt.attr("cursor",w[R=S[R]])),B.selection&&(Y=B.selection),F&&(r=Y[0][0],h=Y[1][0]),D&&(s=Y[0][1],k=Y[1][1]),Y[0][0]===r&&Y[0][1]===s&&Y[1][0]===h&&Y[1][1]===k||(B.selection=[[r,s],[h,k]],P.call(z),Q.brush())}function it(){if(d(),i.event.touches){if(i.event.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500),K.on("touchmove.brush touchend.brush touchcancel.brush",null)}else u(i.event.view,j),et.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);K.attr("pointer-events","all"),tt.attr("cursor",w.overlay),B.selection&&(Y=B.selection),N(Y)&&(B.selection=null,P.call(z)),Q.end()}}function z(){var e=this.__brush||{selection:null};return e.extent=n.apply(this,arguments),e.dim=t,e}return j.move=function(e,n){e.selection?e.on("start.brush",function(){L(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){L(this,arguments).end()}).tween("brush",function(){var e=this,r=e.__brush,i=L(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),u=Object(s.a)(o,a);function c(t){r.selection=1===t&&N(a)?null:u(t),P.call(e),i.brush()}return o&&a?c:c(1)}):e.each(function(){var e=arguments,r=this.__brush,i=t.input("function"==typeof n?n.apply(this,e):n,r.extent),o=L(this,e).beforestart();Object(l.interrupt)(this),r.selection=null==i||N(i)?null:i,P.call(this),o.start().brush().end()})},F.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Object(i.customEvent)(new h(j,e,t.output(this.state.selection)),c.apply,c,[e,this.that,this.args])}},j.extent=function(t){return arguments.length?(n="function"==typeof t?t:f([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),j):n},j.filter=function(t){return arguments.length?(o="function"==typeof t?t:f(!!t),j):o},j.handleSize=function(t){return arguments.length?(x=+t,j):x},j.on=function(){var t=c.on.apply(c,arguments);return t===c?j:t},j}n.d(e,"brush",function(){return F}),n.d(e,"brushX",function(){return P}),n.d(e,"brushY",function(){return L}),n.d(e,"brushSelection",function(){return j})},function(t,e,n){"use strict";n.r(e);var r=Array.prototype.slice,i=function(t){return t},o=1,a=2,u=3,c=4,s=1e-6;function l(t){return"translate("+(t+.5)+",0)"}function f(t){return"translate(0,"+(t+.5)+")"}function h(){return!this.__axis}function d(t,e){var n=[],d=null,p=null,g=6,m=6,y=3,v=t===o||t===c?-1:1,b=t===c||t===a?"x":"y",_=t===o||t===u?l:f;function x(r){var l=null==d?e.ticks?e.ticks.apply(e,n):e.domain():d,f=null==p?e.tickFormat?e.tickFormat.apply(e,n):i:p,x=Math.max(g,0)+y,w=e.range(),M=+w[0]+.5,S=+w[w.length-1]+.5,T=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),E=r.selection?r.selection():r,k=E.selectAll(".domain").data([null]),A=E.selectAll(".tick").data(l,e).order(),O=A.exit(),C=A.enter().append("g").attr("class","tick"),N=A.select("line"),j=A.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),A=A.merge(C),N=N.merge(C.append("line").attr("stroke","#000").attr(b+"2",v*g)),j=j.merge(C.append("text").attr("fill","#000").attr(b,v*x).attr("dy",t===o?"0em":t===u?"0.71em":"0.32em")),r!==E&&(k=k.transition(r),A=A.transition(r),N=N.transition(r),j=j.transition(r),O=O.transition(r).attr("opacity",s).attr("transform",function(t){return isFinite(t=T(t))?_(t):this.getAttribute("transform")}),C.attr("opacity",s).attr("transform",function(t){var e=this.parentNode.__axis;return _(e&&isFinite(e=e(t))?e:T(t))})),O.remove(),k.attr("d",t===c||t==a?"M"+v*m+","+M+"H0.5V"+S+"H"+v*m:"M"+M+","+v*m+"V0.5H"+S+"V"+v*m),A.attr("opacity",1).attr("transform",function(t){return _(T(t))}),N.attr(b+"2",v*g),j.attr(b,v*x).text(f),E.filter(h).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===a?"start":t===c?"end":"middle"),E.each(function(){this.__axis=T})}return x.scale=function(t){return arguments.length?(e=t,x):e},x.ticks=function(){return n=r.call(arguments),x},x.tickArguments=function(t){return arguments.length?(n=null==t?[]:r.call(t),x):n.slice()},x.tickValues=function(t){return arguments.length?(d=null==t?null:r.call(t),x):d&&d.slice()},x.tickFormat=function(t){return arguments.length?(p=t,x):p},x.tickSize=function(t){return arguments.length?(g=m=+t,x):g},x.tickSizeInner=function(t){return arguments.length?(g=+t,x):g},x.tickSizeOuter=function(t){return arguments.length?(m=+t,x):m},x.tickPadding=function(t){return arguments.length?(y=+t,x):y},x}function p(t){return d(o,t)}function g(t){return d(a,t)}function m(t){return d(u,t)}function y(t){return d(c,t)}n.d(e,"axisTop",function(){return p}),n.d(e,"axisRight",function(){return g}),n.d(e,"axisBottom",function(){return m}),n.d(e,"axisLeft",function(){return y})}]);